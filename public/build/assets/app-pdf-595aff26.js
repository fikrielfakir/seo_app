var sn=Object.defineProperty;var ln=(e,t,n)=>t in e?sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var De=(e,t,n)=>(ln(e,typeof t!="symbol"?t+"":t,n),n),dt=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var M=(e,t,n)=>(dt(e,t,"read from private field"),n?n.call(e):t.get(e)),ne=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ge=(e,t,n,i)=>(dt(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);var at=(e,t,n,i)=>({set _(r){ge(e,t,r,n)},get _(){return M(e,t,i)}}),oe=(e,t,n)=>(dt(e,t,"access private method"),n);import{S as Sortable,a as Swal}from"./sweetalert2.all-3a36e020.js";import"./_commonjsHelpers-725317a4.js";function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var a=Function.bind.apply(t,r);return new a}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)lookup[t]=e[t],revLookup[e.charCodeAt(t)]=t;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(e){inited||init();var t,n,i,r,a,s,b=e.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a=e[b-2]==="="?2:e[b-1]==="="?1:0,s=new Arr(b*3/4-a),i=a>0?b-4:b;var E=0;for(t=0,n=0;t<i;t+=4,n+=3)r=revLookup[e.charCodeAt(t)]<<18|revLookup[e.charCodeAt(t+1)]<<12|revLookup[e.charCodeAt(t+2)]<<6|revLookup[e.charCodeAt(t+3)],s[E++]=r>>16&255,s[E++]=r>>8&255,s[E++]=r&255;return a===2?(r=revLookup[e.charCodeAt(t)]<<2|revLookup[e.charCodeAt(t+1)]>>4,s[E++]=r&255):a===1&&(r=revLookup[e.charCodeAt(t)]<<10|revLookup[e.charCodeAt(t+1)]<<4|revLookup[e.charCodeAt(t+2)]>>2,s[E++]=r>>8&255,s[E++]=r&255),s}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,t,n){for(var i,r=[],a=t;a<n;a+=3)i=(e[a]<<16)+(e[a+1]<<8)+e[a+2],r.push(tripletToBase64(i));return r.join("")}function fromByteArray(e){inited||init();for(var t,n=e.length,i=n%3,r="",a=[],s=16383,b=0,E=n-i;b<E;b+=s)a.push(encodeChunk(e,b,b+s>E?E:b+s));return i===1?(t=e[n-1],r+=lookup[t>>2],r+=lookup[t<<4&63],r+="=="):i===2&&(t=(e[n-2]<<8)+e[n-1],r+=lookup[t>>10],r+=lookup[t>>4&63],r+=lookup[t<<2&63],r+="="),a.push(r),a.join("")}function read(e,t,n,i,r){var a,s,b=r*8-i-1,E=(1<<b)-1,l=E>>1,c=-7,O=n?r-1:0,C=n?-1:1,m=e[t+O];for(O+=C,a=m&(1<<-c)-1,m>>=-c,c+=b;c>0;a=a*256+e[t+O],O+=C,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=i;c>0;s=s*256+e[t+O],O+=C,c-=8);if(a===0)a=1-l;else{if(a===E)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,i),a=a-l}return(m?-1:1)*s*Math.pow(2,a-i)}function write(e,t,n,i,r,a){var s,b,E,l=a*8-r-1,c=(1<<l)-1,O=c>>1,C=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=i?0:a-1,_=i?1:-1,S=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(E=Math.pow(2,-s))<1&&(s--,E*=2),s+O>=1?t+=C/E:t+=C*Math.pow(2,1-O),t*E>=2&&(s++,E/=2),s+O>=c?(b=0,s=c):s+O>=1?(b=(t*E-1)*Math.pow(2,r),s=s+O):(b=t*Math.pow(2,O-1)*Math.pow(2,r),s=0));r>=8;e[n+m]=b&255,m+=_,b/=256,r-=8);for(s=s<<r|b,l+=r;l>0;e[n+m]=s&255,m+=_,s/=256,l-=8);e[n+m-_]|=S*128}var toString={}.toString,isArray$2=Array.isArray||function(e){return toString.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==void 0?global$1.TYPED_ARRAY_SUPPORT:!0;kMaxLength();function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=Buffer.prototype):(e===null&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,n){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(e,t,n);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,n)}Buffer.poolSize=8192;Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e};function from(e,t,n,i){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,n,i):typeof t=="string"?fromString(e,t,n):fromObject(e,t)}Buffer.from=function(e,t,n){return from(null,e,t,n)};Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer[Symbol.species]);function assertSize(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,n,i){return assertSize(t),t<=0?createBuffer(e,t):n!==void 0?typeof i=="string"?createBuffer(e,t).fill(n,i):createBuffer(e,t).fill(n):createBuffer(e,t)}Buffer.alloc=function(e,t,n){return alloc(null,e,t,n)};function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:checked(t)|0),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)};Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)};function fromString(e,t,n){if((typeof n!="string"||n==="")&&(n="utf8"),!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=byteLength(t,n)|0;e=createBuffer(e,i);var r=e.write(t,n);return r!==i&&(e=e.slice(0,r)),e}function fromArrayLike(e,t){var n=t.length<0?0:checked(t.length)|0;e=createBuffer(e,n);for(var i=0;i<n;i+=1)e[i]=t[i]&255;return e}function fromArrayBuffer(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return n===void 0&&i===void 0?t=new Uint8Array(t):i===void 0?t=new Uint8Array(t,n):t=new Uint8Array(t,n,i),Buffer.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=Buffer.prototype):e=fromArrayLike(e,t),e}function fromObject(e,t){if(internalIsBuffer(t)){var n=checked(t.length)|0;return e=createBuffer(e,n),e.length===0||t.copy(e,0,0,n),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if(t.type==="Buffer"&&isArray$2(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return e|0}Buffer.isBuffer=isBuffer;function internalIsBuffer(e){return!!(e!=null&&e._isBuffer)}Buffer.compare=function(t,n){if(!internalIsBuffer(t)||!internalIsBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,r=n.length,a=0,s=Math.min(i,r);a<s;++a)if(t[a]!==n[a]){i=t[a],r=n[a];break}return i<r?-1:r<i?1:0};Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer.concat=function(t,n){if(!isArray$2(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Buffer.alloc(0);var i;if(n===void 0)for(n=0,i=0;i<t.length;++i)n+=t[i].length;var r=Buffer.allocUnsafe(n),a=0;for(i=0;i<t.length;++i){var s=t[i];if(!internalIsBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,a),a+=s.length}return r};function byteLength(e,t){if(internalIsBuffer(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var n=e.length;if(n===0)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(i)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),i=!0}}Buffer.byteLength=byteLength;function slowToString(e,t,n){var i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}Buffer.prototype._isBuffer=!0;function swap(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}Buffer.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)swap(this,n,n+1);return this};Buffer.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)swap(this,n,n+3),swap(this,n+1,n+2);return this};Buffer.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)swap(this,n,n+7),swap(this,n+1,n+6),swap(this,n+2,n+5),swap(this,n+3,n+4);return this};Buffer.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?utf8Slice(this,0,t):slowToString.apply(this,arguments)};Buffer.prototype.equals=function(t){if(!internalIsBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Buffer.compare(this,t)===0};Buffer.prototype.inspect=function(){var t="",n=INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"};Buffer.prototype.compare=function(t,n,i,r,a){if(!internalIsBuffer(t))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),i===void 0&&(i=t?t.length:0),r===void 0&&(r=0),a===void 0&&(a=this.length),n<0||i>t.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&n>=i)return 0;if(r>=a)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,r>>>=0,a>>>=0,this===t)return 0;for(var s=a-r,b=i-n,E=Math.min(s,b),l=this.slice(r,a),c=t.slice(n,i),O=0;O<E;++O)if(l[O]!==c[O]){s=l[O],b=c[O];break}return s<b?-1:b<s?1:0};function bidirectionalIndexOf(e,t,n,i,r){if(e.length===0)return-1;if(typeof n=="string"?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0)if(r)n=0;else return-1;if(typeof t=="string"&&(t=Buffer.from(t,i)),internalIsBuffer(t))return t.length===0?-1:arrayIndexOf(e,t,n,i,r);if(typeof t=="number")return t=t&255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,i,r){var a=1,s=e.length,b=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(e.length<2||t.length<2)return-1;a=2,s/=2,b/=2,n/=2}function E(m,_){return a===1?m[_]:m.readUInt16BE(_*a)}var l;if(r){var c=-1;for(l=n;l<s;l++)if(E(e,l)===E(t,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===b)return c*a}else c!==-1&&(l-=l-c),c=-1}else for(n+b>s&&(n=s-b),l=n;l>=0;l--){for(var O=!0,C=0;C<b;C++)if(E(e,l+C)!==E(t,C)){O=!1;break}if(O)return l}return-1}Buffer.prototype.includes=function(t,n,i){return this.indexOf(t,n,i)!==-1};Buffer.prototype.indexOf=function(t,n,i){return bidirectionalIndexOf(this,t,n,i,!0)};Buffer.prototype.lastIndexOf=function(t,n,i){return bidirectionalIndexOf(this,t,n,i,!1)};function hexWrite(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var b=parseInt(t.substr(s*2,2),16);if(isNaN(b))return s;e[n+s]=b}return s}function utf8Write(e,t,n,i){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,i)}function asciiWrite(e,t,n,i){return blitBuffer(asciiToBytes(t),e,n,i)}function latin1Write(e,t,n,i){return asciiWrite(e,t,n,i)}function base64Write(e,t,n,i){return blitBuffer(base64ToBytes(t),e,n,i)}function ucs2Write(e,t,n,i){return blitBuffer(utf16leToBytes(t,e.length-n),e,n,i)}Buffer.prototype.write=function(t,n,i,r){if(n===void 0)r="utf8",i=this.length,n=0;else if(i===void 0&&typeof n=="string")r=n,i=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(i)?(i=i|0,r===void 0&&(r="utf8")):(r=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-n;if((i===void 0||i>a)&&(i=a),t.length>0&&(i<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return hexWrite(this,t,n,i);case"utf8":case"utf-8":return utf8Write(this,t,n,i);case"ascii":return asciiWrite(this,t,n,i);case"latin1":case"binary":return latin1Write(this,t,n,i);case"base64":return base64Write(this,t,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,n,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}};Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(e,t,n){return t===0&&n===e.length?fromByteArray(e):fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a=e[r],s=null,b=a>239?4:a>223?3:a>191?2:1;if(r+b<=n){var E,l,c,O;switch(b){case 1:a<128&&(s=a);break;case 2:E=e[r+1],(E&192)===128&&(O=(a&31)<<6|E&63,O>127&&(s=O));break;case 3:E=e[r+1],l=e[r+2],(E&192)===128&&(l&192)===128&&(O=(a&15)<<12|(E&63)<<6|l&63,O>2047&&(O<55296||O>57343)&&(s=O));break;case 4:E=e[r+1],l=e[r+2],c=e[r+3],(E&192)===128&&(l&192)===128&&(c&192)===128&&(O=(a&15)<<18|(E&63)<<12|(l&63)<<6|c&63,O>65535&&O<1114112&&(s=O))}}s===null?(s=65533,b=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),r+=b}return decodeCodePointsArray(i)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=MAX_ARGUMENTS_LENGTH));return n}function asciiSlice(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]&127);return i}function latin1Slice(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function hexSlice(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",a=t;a<n;++a)r+=toHex(e[a]);return r}function utf16leSlice(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+i[a+1]*256);return r}Buffer.prototype.slice=function(t,n){var i=this.length;t=~~t,n=n===void 0?i:~~n,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),n<0?(n+=i,n<0&&(n=0)):n>i&&(n=i),n<t&&(n=t);var r;if(Buffer.TYPED_ARRAY_SUPPORT)r=this.subarray(t,n),r.__proto__=Buffer.prototype;else{var a=n-t;r=new Buffer(a,void 0);for(var s=0;s<a;++s)r[s]=this[s+t]}return r};function checkOffset(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function(t,n,i){t=t|0,n=n|0,i||checkOffset(t,n,this.length);for(var r=this[t],a=1,s=0;++s<n&&(a*=256);)r+=this[t+s]*a;return r};Buffer.prototype.readUIntBE=function(t,n,i){t=t|0,n=n|0,i||checkOffset(t,n,this.length);for(var r=this[t+--n],a=1;n>0&&(a*=256);)r+=this[t+--n]*a;return r};Buffer.prototype.readUInt8=function(t,n){return n||checkOffset(t,1,this.length),this[t]};Buffer.prototype.readUInt16LE=function(t,n){return n||checkOffset(t,2,this.length),this[t]|this[t+1]<<8};Buffer.prototype.readUInt16BE=function(t,n){return n||checkOffset(t,2,this.length),this[t]<<8|this[t+1]};Buffer.prototype.readUInt32LE=function(t,n){return n||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Buffer.prototype.readUInt32BE=function(t,n){return n||checkOffset(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Buffer.prototype.readIntLE=function(t,n,i){t=t|0,n=n|0,i||checkOffset(t,n,this.length);for(var r=this[t],a=1,s=0;++s<n&&(a*=256);)r+=this[t+s]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*n)),r};Buffer.prototype.readIntBE=function(t,n,i){t=t|0,n=n|0,i||checkOffset(t,n,this.length);for(var r=n,a=1,s=this[t+--r];r>0&&(a*=256);)s+=this[t+--r]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*n)),s};Buffer.prototype.readInt8=function(t,n){return n||checkOffset(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Buffer.prototype.readInt16LE=function(t,n){n||checkOffset(t,2,this.length);var i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};Buffer.prototype.readInt16BE=function(t,n){n||checkOffset(t,2,this.length);var i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};Buffer.prototype.readInt32LE=function(t,n){return n||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Buffer.prototype.readInt32BE=function(t,n){return n||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Buffer.prototype.readFloatLE=function(t,n){return n||checkOffset(t,4,this.length),read(this,t,!0,23,4)};Buffer.prototype.readFloatBE=function(t,n){return n||checkOffset(t,4,this.length),read(this,t,!1,23,4)};Buffer.prototype.readDoubleLE=function(t,n){return n||checkOffset(t,8,this.length),read(this,t,!0,52,8)};Buffer.prototype.readDoubleBE=function(t,n){return n||checkOffset(t,8,this.length),read(this,t,!1,52,8)};function checkInt(e,t,n,i,r,a){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function(t,n,i,r){if(t=+t,n=n|0,i=i|0,!r){var a=Math.pow(2,8*i)-1;checkInt(this,t,n,i,a,0)}var s=1,b=0;for(this[n]=t&255;++b<i&&(s*=256);)this[n+b]=t/s&255;return n+i};Buffer.prototype.writeUIntBE=function(t,n,i,r){if(t=+t,n=n|0,i=i|0,!r){var a=Math.pow(2,8*i)-1;checkInt(this,t,n,i,a,0)}var s=i-1,b=1;for(this[n+s]=t&255;--s>=0&&(b*=256);)this[n+s]=t/b&255;return n+i};Buffer.prototype.writeUInt8=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=t&255,n+1};function objectWriteUInt16(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-n,2);r<a;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>(i?r:1-r)*8}Buffer.prototype.writeUInt16LE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8):objectWriteUInt16(this,t,n,!0),n+2};Buffer.prototype.writeUInt16BE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t&255):objectWriteUInt16(this,t,n,!1),n+2};function objectWriteUInt32(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-n,4);r<a;++r)e[n+r]=t>>>(i?r:3-r)*8&255}Buffer.prototype.writeUInt32LE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255):objectWriteUInt32(this,t,n,!0),n+4};Buffer.prototype.writeUInt32BE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255):objectWriteUInt32(this,t,n,!1),n+4};Buffer.prototype.writeIntLE=function(t,n,i,r){if(t=+t,n=n|0,!r){var a=Math.pow(2,8*i-1);checkInt(this,t,n,i,a-1,-a)}var s=0,b=1,E=0;for(this[n]=t&255;++s<i&&(b*=256);)t<0&&E===0&&this[n+s-1]!==0&&(E=1),this[n+s]=(t/b>>0)-E&255;return n+i};Buffer.prototype.writeIntBE=function(t,n,i,r){if(t=+t,n=n|0,!r){var a=Math.pow(2,8*i-1);checkInt(this,t,n,i,a-1,-a)}var s=i-1,b=1,E=0;for(this[n+s]=t&255;--s>=0&&(b*=256);)t<0&&E===0&&this[n+s+1]!==0&&(E=1),this[n+s]=(t/b>>0)-E&255;return n+i};Buffer.prototype.writeInt8=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=t&255,n+1};Buffer.prototype.writeInt16LE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8):objectWriteUInt16(this,t,n,!0),n+2};Buffer.prototype.writeInt16BE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t&255):objectWriteUInt16(this,t,n,!1),n+2};Buffer.prototype.writeInt32LE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):objectWriteUInt32(this,t,n,!0),n+4};Buffer.prototype.writeInt32BE=function(t,n,i){return t=+t,n=n|0,i||checkInt(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255):objectWriteUInt32(this,t,n,!1),n+4};function checkIEEE754(e,t,n,i,r,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,i,r){return r||checkIEEE754(e,t,n,4),write(e,t,n,i,23,4),n+4}Buffer.prototype.writeFloatLE=function(t,n,i){return writeFloat(this,t,n,!0,i)};Buffer.prototype.writeFloatBE=function(t,n,i){return writeFloat(this,t,n,!1,i)};function writeDouble(e,t,n,i,r){return r||checkIEEE754(e,t,n,8),write(e,t,n,i,52,8),n+8}Buffer.prototype.writeDoubleLE=function(t,n,i){return writeDouble(this,t,n,!0,i)};Buffer.prototype.writeDoubleBE=function(t,n,i){return writeDouble(this,t,n,!1,i)};Buffer.prototype.copy=function(t,n,i,r){if(i||(i=0),!r&&r!==0&&(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&r<i&&(r=i),r===i||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-i&&(r=t.length-n+i);var a=r-i,s;if(this===t&&i<n&&n<r)for(s=a-1;s>=0;--s)t[s+n]=this[s+i];else if(a<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(s=0;s<a;++s)t[s+n]=this[s+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+a),n);return a};Buffer.prototype.fill=function(t,n,i,r){if(typeof t=="string"){if(typeof n=="string"?(r=n,n=0,i=this.length):typeof i=="string"&&(r=i,i=this.length),t.length===1){var a=t.charCodeAt(0);a<256&&(t=a)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t=t&255);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;n=n>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);var s;if(typeof t=="number")for(s=n;s<i;++s)this[s]=t;else{var b=internalIsBuffer(t)?t:utf8ToBytes(new Buffer(t,r).toString()),E=b.length;for(s=0;s<i-n;++s)this[s+n]=b[s%E]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if(e=stringtrim(e).replace(INVALID_BASE64_RE,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){t=t||1/0;for(var n,i=e.length,r=null,a=[],s=0;s<i;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return a}function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function utf16leToBytes(e,t){for(var n,i,r,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,r=n%256,a.push(r),a.push(i);return a}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function isnan(e){return e!==e}function isBuffer(e){return e!=null&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&isFastBuffer(e.slice(0,0))}function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;typeof global$1.setTimeout=="function"&&(cachedSetTimeout=setTimeout);typeof global$1.clearTimeout=="function"&&(cachedClearTimeout=clearTimeout);function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch{try{return cachedSetTimeout.call(null,e,0)}catch{return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch{try{return cachedClearTimeout.call(null,e)}catch{return cachedClearTimeout.call(this,e)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];queue.push(new Item(e,t)),queue.length===1&&!draining&&runTimeout(drainQueue)}function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser=!0,env={},argv=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding$1(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=global$1.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return new Date().getTime()};function hrtime(e){var t=performanceNow.call(performance)*.001,n=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(n=n-e[0],i=i-e[1],i<0&&(n--,i+=1e9)),[n,i]}var startTime=new Date;function uptime(){var e=new Date,t=e-startTime;return t/1e3}var browser$1={nextTick,title,browser,env,argv,version,versions,on,addListener,once,off,removeListener,removeAllListeners,emit,binding:binding$1,cwd,chdir,umask,hrtime,platform,release,config,uptime};function commonjsRequire$1(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$2={exports:{}},_polyfillNode_fs={},_polyfillNode_fs$1=Object.freeze({__proto__:null,default:_polyfillNode_fs}),require$$0=getAugmentedNamespace(_polyfillNode_fs$1),_nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$1=getAugmentedNamespace(_nodeResolve_empty$1),hasFetch=isFunction$1(global$1.fetch)&&isFunction$1(global$1.ReadableStream),_blobConstructor;function blobConstructor(){if(typeof _blobConstructor<"u")return _blobConstructor;try{new global$1.Blob([new ArrayBuffer(1)]),_blobConstructor=!0}catch{_blobConstructor=!1}return _blobConstructor}var xhr;function checkTypeSupport(e){xhr||(xhr=new global$1.XMLHttpRequest,xhr.open("GET",global$1.location.host?"/":"https://example.com"));try{return xhr.responseType=e,xhr.responseType===e}catch{return!1}}var haveArrayBuffer=typeof global$1.ArrayBuffer<"u",haveSlice=haveArrayBuffer&&isFunction$1(global$1.ArrayBuffer.prototype.slice),arraybuffer=haveArrayBuffer&&checkTypeSupport("arraybuffer"),msstream=!hasFetch&&haveSlice&&checkTypeSupport("ms-stream"),mozchunkedarraybuffer=!hasFetch&&haveArrayBuffer&&checkTypeSupport("moz-chunked-arraybuffer"),overrideMimeType=isFunction$1(xhr.overrideMimeType),vbArray=isFunction$1(global$1.VBArray);function isFunction$1(e){return typeof e=="function"}xhr=null;var inherits;typeof Object.create=="function"?inherits=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:inherits=function(t,n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t};var inherits$1=inherits,formatRegExp=/%[sdj%]/g;function format$1(e){if(!isString(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(inspect(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,r=i.length,a=String(e).replace(formatRegExp,function(b){if(b==="%%")return"%";if(n>=r)return b;switch(b){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch{return"[Circular]"}default:return b}}),s=i[n];n<r;s=i[++n])isNull(s)||!isObject(s)?a+=" "+s:a+=" "+inspect(s);return a}function deprecate(e,t){if(isUndefined(global$1.process))return function(){return deprecate(e,t).apply(this,arguments)};if(browser$1.noDeprecation===!0)return e;var n=!1;function i(){if(!n){if(browser$1.throwDeprecation)throw new Error(t);browser$1.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}return i}var debugs={},debugEnviron;function debuglog(e){if(isUndefined(debugEnviron)&&(debugEnviron=browser$1.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var t=0;debugs[e]=function(){var n=format$1.apply(null,arguments);console.error("%s %d: %s",e,t,n)}}else debugs[e]=function(){};return debugs[e]}function inspect(e,t){var n={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),isBoolean(t)?n.showHidden=t:t&&_extend(n,t),isUndefined(n.showHidden)&&(n.showHidden=!1),isUndefined(n.depth)&&(n.depth=2),isUndefined(n.colors)&&(n.colors=!1),isUndefined(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=stylizeWithColor),formatValue(n,e,n.depth)}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(e,t){var n=inspect.styles[t];return n?"\x1B["+inspect.colors[n][0]+"m"+e+"\x1B["+inspect.colors[n][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach(function(n,i){t[n]=!0}),t}function formatValue(e,t,n){if(e.customInspect&&t&&isFunction(t.inspect)&&t.inspect!==inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(n,e);return isString(i)||(i=formatValue(e,i,n)),i}var r=formatPrimitive(e,t);if(r)return r;var a=Object.keys(t),s=arrayToHash(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),isError(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return formatError(t);if(a.length===0){if(isFunction(t)){var b=t.name?": "+t.name:"";return e.stylize("[Function"+b+"]","special")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),"date");if(isError(t))return formatError(t)}var E="",l=!1,c=["{","}"];if(isArray$1(t)&&(l=!0,c=["[","]"]),isFunction(t)){var O=t.name?": "+t.name:"";E=" [Function"+O+"]"}if(isRegExp(t)&&(E=" "+RegExp.prototype.toString.call(t)),isDate(t)&&(E=" "+Date.prototype.toUTCString.call(t)),isError(t)&&(E=" "+formatError(t)),a.length===0&&(!l||t.length==0))return c[0]+E+c[1];if(n<0)return isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var C;return l?C=formatArray(e,t,n,s,a):C=a.map(function(m){return formatProperty(e,t,n,s,m,l)}),e.seen.pop(),reduceToSingleString(C,E,c)}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(isNumber(t))return e.stylize(""+t,"number");if(isBoolean(t))return e.stylize(""+t,"boolean");if(isNull(t))return e.stylize("null","null")}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,n,i,r){for(var a=[],s=0,b=t.length;s<b;++s)hasOwnProperty$1(t,String(s))?a.push(formatProperty(e,t,n,i,String(s),!0)):a.push("");return r.forEach(function(E){E.match(/^\d+$/)||a.push(formatProperty(e,t,n,i,E,!0))}),a}function formatProperty(e,t,n,i,r,a){var s,b,E;if(E=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},E.get?E.set?b=e.stylize("[Getter/Setter]","special"):b=e.stylize("[Getter]","special"):E.set&&(b=e.stylize("[Setter]","special")),hasOwnProperty$1(i,r)||(s="["+r+"]"),b||(e.seen.indexOf(E.value)<0?(isNull(n)?b=formatValue(e,E.value,null):b=formatValue(e,E.value,n-1),b.indexOf(`
`)>-1&&(a?b=b.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):b=`
`+b.split(`
`).map(function(l){return"   "+l}).join(`
`))):b=e.stylize("[Circular]","special")),isUndefined(s)){if(a&&r.match(/^\d+$/))return b;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+b}function reduceToSingleString(e,t,n){var i=e.reduce(function(r,a){return a.indexOf(`
`)>=0,r+a.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function isArray$1(e){return Array.isArray(e)}function isBoolean(e){return typeof e=="boolean"}function isNull(e){return e===null}function isNullOrUndefined(e){return e==null}function isNumber(e){return typeof e=="number"}function isString(e){return typeof e=="string"}function isUndefined(e){return e===void 0}function isRegExp(e){return isObject(e)&&objectToString(e)==="[object RegExp]"}function isObject(e){return typeof e=="object"&&e!==null}function isDate(e){return isObject(e)&&objectToString(e)==="[object Date]"}function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}function isFunction(e){return typeof e=="function"}function objectToString(e){return Object.prototype.toString.call(e)}function _extend(e,t){if(!t||!isObject(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function hasOwnProperty$1(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var domain;function EventHandlers(){}EventHandlers.prototype=Object.create(null);function EventEmitter(){EventEmitter.init.call(this)}EventEmitter.EventEmitter=EventEmitter;EventEmitter.usingDomains=!1;EventEmitter.prototype.domain=void 0;EventEmitter.prototype._events=void 0;EventEmitter.prototype._maxListeners=void 0;EventEmitter.defaultMaxListeners=10;EventEmitter.init=function(){this.domain=null,EventEmitter.usingDomains&&domain.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new EventHandlers,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function $getMaxListeners(e){return e._maxListeners===void 0?EventEmitter.defaultMaxListeners:e._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)};function emitNone(e,t,n){if(t)e.call(n);else for(var i=e.length,r=arrayClone(e,i),a=0;a<i;++a)r[a].call(n)}function emitOne(e,t,n,i){if(t)e.call(n,i);else for(var r=e.length,a=arrayClone(e,r),s=0;s<r;++s)a[s].call(n,i)}function emitTwo(e,t,n,i,r){if(t)e.call(n,i,r);else for(var a=e.length,s=arrayClone(e,a),b=0;b<a;++b)s[b].call(n,i,r)}function emitThree(e,t,n,i,r,a){if(t)e.call(n,i,r,a);else for(var s=e.length,b=arrayClone(e,s),E=0;E<s;++E)b[E].call(n,i,r,a)}function emitMany(e,t,n,i){if(t)e.apply(n,i);else for(var r=e.length,a=arrayClone(e,r),s=0;s<r;++s)a[s].apply(n,i)}EventEmitter.prototype.emit=function(t){var n,i,r,a,s,b,E,l=t==="error";if(b=this._events,b)l=l&&b.error==null;else if(!l)return!1;if(E=this.domain,l){if(n=arguments[1],E)n||(n=new Error('Uncaught, unspecified "error" event')),n.domainEmitter=this,n.domain=E,n.domainThrown=!1,E.emit("error",n);else{if(n instanceof Error)throw n;var c=new Error('Uncaught, unspecified "error" event. ('+n+")");throw c.context=n,c}return!1}if(i=b[t],!i)return!1;var O=typeof i=="function";switch(r=arguments.length,r){case 1:emitNone(i,O,this);break;case 2:emitOne(i,O,this,arguments[1]);break;case 3:emitTwo(i,O,this,arguments[1],arguments[2]);break;case 4:emitThree(i,O,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(r-1),s=1;s<r;s++)a[s-1]=arguments[s];emitMany(i,O,this,a)}return!0};function _addListener(e,t,n,i){var r,a,s;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(a=e._events,a?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]):(a=e._events=new EventHandlers,e._eventsCount=0),!s)s=a[t]=n,++e._eventsCount;else if(typeof s=="function"?s=a[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),!s.warned&&(r=$getMaxListeners(e),r&&r>0&&s.length>r)){s.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=e,b.type=t,b.count=s.length,emitWarning(b)}return e}function emitWarning(e){typeof console.warn=="function"?console.warn(e):console.log(e)}EventEmitter.prototype.addListener=function(t,n){return _addListener(this,t,n,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(t,n){return _addListener(this,t,n,!0)};function _onceWrap(e,t,n){var i=!1;function r(){e.removeListener(t,r),i||(i=!0,n.apply(e,arguments))}return r.listener=n,r}EventEmitter.prototype.once=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,_onceWrap(this,t,n)),this};EventEmitter.prototype.prependOnceListener=function(t,n){if(typeof n!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,_onceWrap(this,t,n)),this};EventEmitter.prototype.removeListener=function(t,n){var i,r,a,s,b;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if(r=this._events,!r)return this;if(i=r[t],!i)return this;if(i===n||i.listener&&i.listener===n)--this._eventsCount===0?this._events=new EventHandlers:(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||n));else if(typeof i!="function"){for(a=-1,s=i.length;s-- >0;)if(i[s]===n||i[s].listener&&i[s].listener===n){b=i[s].listener,a=s;break}if(a<0)return this;if(i.length===1){if(i[0]=void 0,--this._eventsCount===0)return this._events=new EventHandlers,this;delete r[t]}else spliceOne(i,a);r.removeListener&&this.emit("removeListener",t,b||n)}return this};EventEmitter.prototype.off=function(e,t){return this.removeListener(e,t)};EventEmitter.prototype.removeAllListeners=function(t){var n,i;if(i=this._events,!i)return this;if(!i.removeListener)return arguments.length===0?(this._events=new EventHandlers,this._eventsCount=0):i[t]&&(--this._eventsCount===0?this._events=new EventHandlers:delete i[t]),this;if(arguments.length===0){for(var r=Object.keys(i),a=0,s;a<r.length;++a)s=r[a],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=new EventHandlers,this._eventsCount=0,this}if(n=i[t],typeof n=="function")this.removeListener(t,n);else if(n)do this.removeListener(t,n[n.length-1]);while(n[0]);return this};EventEmitter.prototype.listeners=function(t){var n,i,r=this._events;return r?(n=r[t],n?typeof n=="function"?i=[n.listener||n]:i=unwrapListeners(n):i=[]):i=[],i};EventEmitter.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):listenerCount$1.call(e,t)};EventEmitter.prototype.listenerCount=listenerCount$1;function listenerCount$1(e){var t=this._events;if(t){var n=t[e];if(typeof n=="function")return 1;if(n)return n.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function spliceOne(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}function arrayClone(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function unwrapListeners(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function BufferList(){this.head=null,this.tail=null,this.length=0}BufferList.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length};BufferList.prototype.unshift=function(e){var t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length};BufferList.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}};BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0};BufferList.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n};BufferList.prototype.concat=function(e){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;for(var t=Buffer.allocUnsafe(e>>>0),n=this.head,i=0;n;)n.data.copy(t,i),i+=n.data.length,n=n.next;return t};var isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function assertEncoding(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}function StringDecoder(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0}StringDecoder.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(r>=55296&&r<=56319){this.charLength+=this.surrogateSize,t="";continue}if(this.charReceived=this.charLength=0,e.length===0)return t;break}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&r<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,i)}return t};StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(t==1&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t};StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t};function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}Readable.ReadableState=ReadableState;var debug=debuglog("stream");inherits$1(Readable,EventEmitter);function prependListener(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);!e._events||!e._events[t]?e.on(t,n):Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]}function listenerCount(e,t){return e.listeners(t).length}function ReadableState(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),EventEmitter.call(this)}Readable.prototype.push=function(e,t){var n=this._readableState;return!n.objectMode&&typeof e=="string"&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=Buffer.from(e,t),t="")),readableAddChunk(this,n,e,t,!1)};Readable.prototype.unshift=function(e){var t=this._readableState;return readableAddChunk(this,t,e,"",!0)};Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};function readableAddChunk(e,t,n,i,r){var a=chunkInvalid(t,n);if(a)e.emit("error",a);else if(n===null)t.reading=!1,onEofChunk(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&r){var b=new Error("stream.unshift() after end event");e.emit("error",b)}else{var E;t.decoder&&!r&&!i&&(n=t.decoder.write(n),E=!t.objectMode&&n.length===0),r||(t.reading=!1),E||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&emitReadable(e))),maybeReadMore(e,t)}else r||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}Readable.prototype.setEncoding=function(e){return this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?endReadable(this):emitReadable(this),null;if(e=howMuchToRead(e,t),e===0&&t.ended)return t.length===0&&endReadable(this),null;var i=t.needReadable;debug("need readable",i),(t.length===0||t.length-e<t.highWaterMark)&&(i=!0,debug("length less than watermark",i)),t.ended||t.reading?(i=!1,debug("reading or ended",i)):i&&(debug("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(n,t)));var r;return e>0?r=fromList(e,t):r=null,r===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&endReadable(this)),r!==null&&this.emit("data",r),r};function chunkInvalid(e,t){var n=null;return!Buffer.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?nextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}Readable.prototype._read=function(e){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,debug("pipe count=%d opts=%j",i.pipesCount,t);var r=!t||t.end!==!1,a=r?b:c;i.endEmitted?nextTick(a):n.once("end",a),e.on("unpipe",s);function s(T){debug("onunpipe"),T===n&&c()}function b(){debug("onend"),e.end()}var E=pipeOnDrain(n);e.on("drain",E);var l=!1;function c(){debug("cleanup"),e.removeListener("close",_),e.removeListener("finish",S),e.removeListener("drain",E),e.removeListener("error",m),e.removeListener("unpipe",s),n.removeListener("end",b),n.removeListener("end",c),n.removeListener("data",C),l=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&E()}var O=!1;n.on("data",C);function C(T){debug("ondata"),O=!1;var I=e.write(T);I===!1&&!O&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&indexOf(i.pipes,e)!==-1)&&!l&&(debug("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,O=!0),n.pause())}function m(T){debug("onerror",T),d(),e.removeListener("error",m),listenerCount(e,"error")===0&&e.emit("error",T)}prependListener(e,"error",m);function _(){e.removeListener("finish",S),d()}e.once("close",_);function S(){debug("onfinish"),e.removeListener("close",_),d()}e.once("finish",S);function d(){debug("unpipe"),n.unpipe(e)}return e.emit("pipe",n),i.flowing||(debug("pipe resume"),n.resume()),e};function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,flow(e))}}Readable.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var a=indexOf(t.pipes,e);return a===-1?this:(t.pipes.splice(a,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)};Readable.prototype.on=function(e,t){var n=EventEmitter.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&emitReadable(this):nextTick(nReadingNextTick,this))}return n};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,resume(this,e)),this};function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,nextTick(resume_,e,t))}function resume_(e,t){t.reading||(debug("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&e.read()!==null;);}Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(debug("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&i.push(s)}i.push(null)}),e.on("data",function(s){if(debug("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var b=i.push(s);b||(n=!0,e.pause())}});for(var r in e)this[r]===void 0&&typeof e[r]=="function"&&(this[r]=function(s){return function(){return e[s].apply(e,arguments)}}(r));var a=["error","close","destroy","pause","resume"];return forEach(a,function(s){e.on(s,i.emit.bind(i,s))}),i._read=function(s){debug("wrapped _read",s),n&&(n=!1,e.resume())},i};Readable._fromList=fromList;function fromList(e,t){if(t.length===0)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(t.decoder?n=t.buffer.join(""):t.buffer.length===1?n=t.buffer.head.data:n=t.buffer.concat(t.length),t.buffer.clear()):n=fromListPartial(e,t.buffer,t.decoder),n}function fromListPartial(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?i=t.shift():i=n?copyFromBufferString(e,t):copyFromBuffer(e,t),i}function copyFromBufferString(e,t){var n=t.head,i=1,r=n.data;for(e-=r.length;n=n.next;){var a=n.data,s=e>a.length?a.length:e;if(s===a.length?r+=a:r+=a.slice(0,e),e-=s,e===0){s===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(s));break}++i}return t.length-=i,r}function copyFromBuffer(e,t){var n=Buffer.allocUnsafe(e),i=t.head,r=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var a=i.data,s=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,s),e-=s,e===0){s===a.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=a.slice(s));break}++r}return t.length-=r,n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,nextTick(endReadableNT,t,e))}function endReadableNT(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function forEach(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)}function indexOf(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}Writable.WritableState=WritableState;inherits$1(Writable,EventEmitter);function nop(){}function WriteReq(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function WritableState(e,t){Object.defineProperty(this,"buffer",{get:deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof Duplex&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){onwrite(t,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function(){for(var t=this.bufferedRequest,n=[];t;)n.push(t),t=t.next;return n};function Writable(e){if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),EventEmitter.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(e,t){var n=new Error("write after end");e.emit("error",n),nextTick(t,n)}function validChunk(e,t,n,i){var r=!0,a=!1;return n===null?a=new TypeError("May not write null values to stream"):!Buffer.isBuffer(n)&&typeof n!="string"&&n!==void 0&&!t.objectMode&&(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),nextTick(i,a),r=!1),r}Writable.prototype.write=function(e,t,n){var i=this._writableState,r=!1;return typeof t=="function"&&(n=t,t=null),Buffer.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),typeof n!="function"&&(n=nop),i.ended?writeAfterEnd(this,n):validChunk(this,i,e,n)&&(i.pendingcb++,r=writeOrBuffer(this,i,e,t,n)),r};Writable.prototype.cork=function(){var e=this._writableState;e.corked++};Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&clearBuffer(this,e))};Writable.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function decodeChunk(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=Buffer.from(t,n)),t}function writeOrBuffer(e,t,n,i,r){n=decodeChunk(t,n,i),Buffer.isBuffer(n)&&(i="buffer");var a=t.objectMode?1:n.length;t.length+=a;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var b=t.lastBufferedRequest;t.lastBufferedRequest=new WriteReq(n,i,r),b?b.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,a,n,i,r);return s}function doWrite(e,t,n,i,r,a,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function onwriteError(e,t,n,i,r){--t.pendingcb,n?nextTick(r,i):r(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(onwriteStateUpdate(n),t)onwriteError(e,n,i,t,r);else{var a=needFinish(n);!a&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&clearBuffer(e,n),i?nextTick(afterWrite,e,n,a,r):afterWrite(e,n,a,r)}}function afterWrite(e,t,n,i){n||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),a=t.corkedRequestsFree;a.entry=n;for(var s=0;n;)r[s]=n,n=n.next,s+=1;doWrite(e,t,!0,t.length,r,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new CorkedRequest(t)}else{for(;n;){var b=n.chunk,E=n.encoding,l=n.callback,c=t.objectMode?1:b.length;if(doWrite(e,t,!1,c,b,E,l),n=n.next,t.writing)break}n===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}Writable.prototype._write=function(e,t,n){n(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(e,t,n){var i=this._writableState;typeof e=="function"?(n=e,e=null,t=null):typeof t=="function"&&(n=t,t=null),e!=null&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&endWritable(this,i,n)};function needFinish(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function prefinish(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function finishMaybe(e,t){var n=needFinish(t);return n&&(t.pendingcb===0?(prefinish(e,t),t.finished=!0,e.emit("finish")):prefinish(e,t)),n}function endWritable(e,t,n){t.ending=!0,finishMaybe(e,t),n&&(t.finished?nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var i=t.entry;for(t.entry=null;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}inherits$1(Duplex,Readable);var keys=Object.keys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||nextTick(onEndNT,this)}function onEndNT(e){e.end()}inherits$1(Transform,Duplex);function TransformState(e){this.afterTransform=function(t,n){return afterTransform(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,n!=null&&e.push(n),r(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}function Transform(e){if(!(this instanceof Transform))return new Transform(e);Duplex.call(this,e),this._transformState=new TransformState(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(n){done(t,n)}):done(t)})}Transform.prototype.push=function(e,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,e,t)};Transform.prototype._transform=function(e,t,n){throw new Error("Not implemented")};Transform.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}};Transform.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function done(e,t){if(t)return e.emit("error",t);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}inherits$1(PassThrough,Transform);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);Transform.call(this,e)}PassThrough.prototype._transform=function(e,t,n){n(null,e)};inherits$1(Stream,EventEmitter);Stream.Readable=Readable;Stream.Writable=Writable;Stream.Duplex=Duplex;Stream.Transform=Transform;Stream.PassThrough=PassThrough;Stream.Stream=Stream;function Stream(){EventEmitter.call(this)}Stream.prototype.pipe=function(e,t){var n=this;function i(c){e.writable&&e.write(c)===!1&&n.pause&&n.pause()}n.on("data",i);function r(){n.readable&&n.resume&&n.resume()}e.on("drain",r),!e._isStdio&&(!t||t.end!==!1)&&(n.on("end",s),n.on("close",b));var a=!1;function s(){a||(a=!0,e.end())}function b(){a||(a=!0,typeof e.destroy=="function"&&e.destroy())}function E(c){if(l(),EventEmitter.listenerCount(this,"error")===0)throw c}n.on("error",E),e.on("error",E);function l(){n.removeListener("data",i),e.removeListener("drain",r),n.removeListener("end",s),n.removeListener("close",b),n.removeListener("error",E),e.removeListener("error",E),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e};var rStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};function IncomingMessage(e,t,n){var i=this;Readable.call(i),i._mode=n,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",function(){browser$1.nextTick(function(){i.emit("close")})});var r;if(n==="fetch"){i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText;for(var a,s,b=t.headers[Symbol.iterator]();a=(s=b.next()).value,!s.done;)i.headers[a[0].toLowerCase()]=a[1],i.rawHeaders.push(a[0],a[1]);var E=t.body.getReader();r=function(){E.read().then(function(C){if(!i._destroyed){if(C.done){i.push(null);return}i.push(new Buffer(C.value)),r()}})},r()}else{i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText;var l=e.getAllResponseHeaders().split(/\r?\n/);if(l.forEach(function(C){var m=C.match(/^([^:]+):\s*(.*)/);if(m){var _=m[1].toLowerCase();_==="set-cookie"?(i.headers[_]===void 0&&(i.headers[_]=[]),i.headers[_].push(m[2])):i.headers[_]!==void 0?i.headers[_]+=", "+m[2]:i.headers[_]=m[2],i.rawHeaders.push(m[1],m[2])}}),i._charset="x-user-defined",!overrideMimeType){var c=i.rawHeaders["mime-type"];if(c){var O=c.match(/;\s*charset=([^;])(;|$)/);O&&(i._charset=O[1].toLowerCase())}i._charset||(i._charset="utf-8")}}}inherits$1(IncomingMessage,Readable);IncomingMessage.prototype._read=function(){};IncomingMessage.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==rStates.DONE)break;try{n=new global$1.VBArray(t.responseBody).toArray()}catch{}if(n!==null){e.push(new Buffer(n));break}case"text":try{n=t.responseText}catch{e._mode="text:vbarray";break}if(n.length>e._pos){var i=n.substr(e._pos);if(e._charset==="x-user-defined"){for(var r=new Buffer(i.length),a=0;a<i.length;a++)r[a]=i.charCodeAt(a)&255;e.push(r)}else e.push(i,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==rStates.DONE||!t.response)break;n=t.response,e.push(new Buffer(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==rStates.LOADING||!n)break;e.push(new Buffer(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==rStates.LOADING)break;var s=new global$1.MSStreamReader;s.onprogress=function(){s.result.byteLength>e._pos&&(e.push(new Buffer(new Uint8Array(s.result.slice(e._pos)))),e._pos=s.result.byteLength)},s.onload=function(){e.push(null)},s.readAsArrayBuffer(n);break}e._xhr.readyState===rStates.DONE&&e._mode!=="ms-stream"&&e.push(null)};function toArrayBuffer(e){if(e instanceof Uint8Array){if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength)return e.buffer;if(typeof e.buffer.slice=="function")return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,i=0;i<n;i++)t[i]=e[i];return t.buffer}else throw new Error("Argument must be a Buffer")}function decideMode(e,t){return hasFetch&&t?"fetch":mozchunkedarraybuffer?"moz-chunked-arraybuffer":msstream?"ms-stream":arraybuffer&&e?"arraybuffer":vbArray&&e?"text:vbarray":"text"}function ClientRequest(e){var t=this;Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new Buffer(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(r){t.setHeader(r,e.headers[r])});var n,i=!0;if(e.mode==="disable-fetch")i=!1,n=!0;else if(e.mode==="prefer-streaming")n=!1;else if(e.mode==="allow-wrong-content-type")n=!overrideMimeType;else if(!e.mode||e.mode==="default"||e.mode==="prefer-fast")n=!0;else throw new Error("Invalid value for opts.mode");t._mode=decideMode(n,i),t.on("finish",function(){t._onFinish()})}inherits$1(ClientRequest,Writable);var unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];ClientRequest.prototype.setHeader=function(e,t){var n=this,i=e.toLowerCase();unsafeHeaders.indexOf(i)===-1&&(n._headers[i]={name:e,value:t})};ClientRequest.prototype.getHeader=function(e){var t=this;return t._headers[e.toLowerCase()].value};ClientRequest.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]};ClientRequest.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,n=e._headers,i;if((t.method==="POST"||t.method==="PUT"||t.method==="PATCH")&&(blobConstructor()?i=new global$1.Blob(e._body.map(function(s){return toArrayBuffer(s)}),{type:(n["content-type"]||{}).value||""}):i=Buffer.concat(e._body).toString()),e._mode==="fetch"){var r=Object.keys(n).map(function(s){return[n[s].name,n[s].value]});global$1.fetch(e._opts.url,{method:e._opts.method,headers:r,body:i,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(s){e._fetchResponse=s,e._connect()},function(s){e.emit("error",s)})}else{var a=e._xhr=new global$1.XMLHttpRequest;try{a.open(e._opts.method,e._opts.url,!0)}catch(s){browser$1.nextTick(function(){e.emit("error",s)});return}"responseType"in a&&(a.responseType=e._mode.split(":")[0]),"withCredentials"in a&&(a.withCredentials=!!t.withCredentials),e._mode==="text"&&"overrideMimeType"in a&&a.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(n).forEach(function(s){a.setRequestHeader(n[s].name,n[s].value)}),e._response=null,a.onreadystatechange=function(){switch(a.readyState){case rStates.LOADING:case rStates.DONE:e._onXHRProgress();break}},e._mode==="moz-chunked-arraybuffer"&&(a.onprogress=function(){e._onXHRProgress()}),a.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{a.send(i)}catch(s){browser$1.nextTick(function(){e.emit("error",s)});return}}}};function statusValid(e){try{var t=e.status;return t!==null&&t!==0}catch{return!1}}ClientRequest.prototype._onXHRProgress=function(){var e=this;!statusValid(e._xhr)||e._destroyed||(e._response||e._connect(),e._response._onXHRProgress())};ClientRequest.prototype._connect=function(){var e=this;e._destroyed||(e._response=new IncomingMessage(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))};ClientRequest.prototype._write=function(e,t,n){var i=this;i._body.push(e),n()};ClientRequest.prototype.abort=ClientRequest.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()};ClientRequest.prototype.end=function(e,t,n){var i=this;typeof e=="function"&&(n=e,e=void 0),Writable.prototype.end.call(i,e,t,n)};ClientRequest.prototype.flushHeaders=function(){};ClientRequest.prototype.setTimeout=function(){};ClientRequest.prototype.setNoDelay=function(){};ClientRequest.prototype.setSocketKeepAlive=function(){};/*! https://mths.be/punycode v1.4.1 by @mathias */var maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(e){throw new RangeError(errors[e])}function map$1(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function mapDomain(e,t){var n=e.split("@"),i="";n.length>1&&(i=n[0]+"@",e=n[1]),e=e.replace(regexSeparators,".");var r=e.split("."),a=map$1(r,t).join(".");return i+a}function ucs2decode(e){for(var t=[],n=0,i=e.length,r,a;n<i;)r=e.charCodeAt(n++),r>=55296&&r<=56319&&n<i?(a=e.charCodeAt(n++),(a&64512)==56320?t.push(((r&1023)<<10)+(a&1023)+65536):(t.push(r),n--)):t.push(r);return t}function digitToBasic(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function adapt(e,t,n){var i=0;for(e=n?floor(e/damp):e>>1,e+=floor(e/t);e>baseMinusTMin*tMax>>1;i+=base)e=floor(e/baseMinusTMin);return floor(i+(baseMinusTMin+1)*e/(e+skew))}function encode(e){var t,n,i,r,a,s,b,E,l,c,O,C=[],m,_,S,d;for(e=ucs2decode(e),m=e.length,t=initialN,n=0,a=initialBias,s=0;s<m;++s)O=e[s],O<128&&C.push(stringFromCharCode(O));for(i=r=C.length,r&&C.push(delimiter);i<m;){for(b=maxInt,s=0;s<m;++s)O=e[s],O>=t&&O<b&&(b=O);for(_=i+1,b-t>floor((maxInt-n)/_)&&error("overflow"),n+=(b-t)*_,t=b,s=0;s<m;++s)if(O=e[s],O<t&&++n>maxInt&&error("overflow"),O==t){for(E=n,l=base;c=l<=a?tMin:l>=a+tMax?tMax:l-a,!(E<c);l+=base)d=E-c,S=base-c,C.push(stringFromCharCode(digitToBasic(c+d%S,0))),E=floor(d/S);C.push(stringFromCharCode(digitToBasic(E,0))),a=adapt(n,_,i==r),n=0,++i}++n,++t}return C.join("")}function toASCII(e){return mapDomain(e,function(t){return regexNonASCII.test(t)?"xn--"+encode(t):t})}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function stringifyPrimitive(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function stringify(e,t,n,i){return t=t||"&",n=n||"=",e===null&&(e=void 0),typeof e=="object"?map(objectKeys(e),function(r){var a=encodeURIComponent(stringifyPrimitive(r))+n;return isArray(e[r])?map(e[r],function(s){return a+encodeURIComponent(stringifyPrimitive(s))}).join(t):a+encodeURIComponent(stringifyPrimitive(e[r]))}).join(t):i?encodeURIComponent(stringifyPrimitive(i))+n+encodeURIComponent(stringifyPrimitive(e)):""}function map(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var objectKeys=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};function parse$1(e,t,n,i){t=t||"&",n=n||"=";var r={};if(typeof e!="string"||e.length===0)return r;var a=/\+/g;e=e.split(t);var s=1e3;i&&typeof i.maxKeys=="number"&&(s=i.maxKeys);var b=e.length;s>0&&b>s&&(b=s);for(var E=0;E<b;++E){var l=e[E].replace(a,"%20"),c=l.indexOf(n),O,C,m,_;c>=0?(O=l.substr(0,c),C=l.substr(c+1)):(O=l,C=""),m=decodeURIComponent(O),_=decodeURIComponent(C),hasOwnProperty(r,m)?isArray(r[m])?r[m].push(_):r[m]=[r[m],_]:r[m]=_}return r}const URL$1=global$1.URL,URLSearchParams=global$1.URLSearchParams;var _polyfillNode_url={parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject,fileURLToPath:urlFileURLToPath,format:urlFormat,Url,URL:URL$1,URLSearchParams};function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(e,t,n){if(e&&isObject(e)&&e instanceof Url)return e;var i=new Url;return i.parse(e,t,n),i}Url.prototype.parse=function(e,t,n){return parse(this,e,t,n)};function parse(e,t,n,i){if(!isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),a=r!==-1&&r<t.indexOf("#")?"?":"#",s=t.split(a),b=/\\/g;s[0]=s[0].replace(b,"/"),t=s.join(a);var E=t;if(E=E.trim(),!i&&t.split("#").length===1){var l=simplePathPattern.exec(E);if(l)return e.path=E,e.href=E,e.pathname=l[1],l[2]?(e.search=l[2],n?e.query=parse$1(e.search.substr(1)):e.query=e.search.substr(1)):n&&(e.search="",e.query={}),e}var c=protocolPattern.exec(E);if(c){c=c[0];var O=c.toLowerCase();e.protocol=O,E=E.substr(c.length)}if(i||c||E.match(/^\/\/[^@\/]+@[^@\/]+/)){var C=E.substr(0,2)==="//";C&&!(c&&hostlessProtocol[c])&&(E=E.substr(2),e.slashes=!0)}var m,_,S,d;if(!hostlessProtocol[c]&&(C||c&&!slashedProtocol[c])){var T=-1;for(m=0;m<hostEndingChars.length;m++)_=E.indexOf(hostEndingChars[m]),_!==-1&&(T===-1||_<T)&&(T=_);var I,P;for(T===-1?P=E.lastIndexOf("@"):P=E.lastIndexOf("@",T),P!==-1&&(I=E.slice(0,P),E=E.slice(P+1),e.auth=decodeURIComponent(I)),T=-1,m=0;m<nonHostChars.length;m++)_=E.indexOf(nonHostChars[m]),_!==-1&&(T===-1||_<T)&&(T=_);T===-1&&(T=E.length),e.host=E.slice(0,T),E=E.slice(T),parseHost(e),e.hostname=e.hostname||"";var y=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!y){var o=e.hostname.split(/\./);for(m=0,S=o.length;m<S;m++){var p=o[m];if(p&&!p.match(hostnamePartPattern)){for(var f="",h=0,w=p.length;h<w;h++)p.charCodeAt(h)>127?f+="x":f+=p[h];if(!f.match(hostnamePartPattern)){var D=o.slice(0,m),g=o.slice(m+1),H=p.match(hostnamePartStart);H&&(D.push(H[1]),g.unshift(H[2])),g.length&&(E="/"+g.join(".")+E),e.hostname=D.join(".");break}}}}e.hostname.length>hostnameMaxLen?e.hostname="":e.hostname=e.hostname.toLowerCase(),y||(e.hostname=toASCII(e.hostname)),d=e.port?":"+e.port:"";var X=e.hostname||"";e.host=X+d,e.href+=e.host,y&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),E[0]!=="/"&&(E="/"+E))}if(!unsafeProtocol[O])for(m=0,S=autoEscape.length;m<S;m++){var J=autoEscape[m];if(E.indexOf(J)!==-1){var ee=encodeURIComponent(J);ee===J&&(ee=escape(J)),E=E.split(J).join(ee)}}var ie=E.indexOf("#");ie!==-1&&(e.hash=E.substr(ie),E=E.slice(0,ie));var he=E.indexOf("?");if(he!==-1?(e.search=E.substr(he),e.query=E.substr(he+1),n&&(e.query=parse$1(e.query)),E=E.slice(0,he)):n&&(e.search="",e.query={}),E&&(e.pathname=E),slashedProtocol[O]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){d=e.pathname||"";var le=e.search||"";e.path=d+le}return e.href=format(e),e}function urlFileURLToPath(e){if(typeof e=="string")e=new Url().parse(e);else if(!(e instanceof Url))throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof e+String(e));if(e.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return getPathFromURLPosix(e)}function getPathFromURLPosix(e){const t=e.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){const i=t.codePointAt(n+2)|32;if(t[n+1]==="2"&&i===102)throw new TypeError("must not include encoded / characters")}return decodeURIComponent(t)}function urlFormat(e){return isString(e)&&(e=parse({},e)),format(e)}function format(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var n=e.protocol||"",i=e.pathname||"",r=e.hash||"",a=!1,s="";e.host?a=t+e.host:e.hostname&&(a=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(a+=":"+e.port)),e.query&&isObject(e.query)&&Object.keys(e.query).length&&(s=stringify(e.query));var b=e.search||s&&"?"+s||"";return n&&n.substr(-1)!==":"&&(n+=":"),e.slashes||(!n||slashedProtocol[n])&&a!==!1?(a="//"+(a||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):a||(a=""),r&&r.charAt(0)!=="#"&&(r="#"+r),b&&b.charAt(0)!=="?"&&(b="?"+b),i=i.replace(/[?#]/g,function(E){return encodeURIComponent(E)}),b=b.replace("#","%23"),n+a+i+b+r}Url.prototype.format=function(){return format(this)};function urlResolve(e,t){return urlParse(e,!1,!0).resolve(t)}Url.prototype.resolve=function(e){return this.resolveObject(urlParse(e,!1,!0)).format()};function urlResolveObject(e,t){return e?urlParse(e,!1,!0).resolveObject(t):t}Url.prototype.resolveObject=function(e){if(isString(e)){var t=new Url;t.parse(e,!1,!0),e=t}for(var n=new Url,i=Object.keys(this),r=0;r<i.length;r++){var a=i[r];n[a]=this[a]}if(n.hash=e.hash,e.href==="")return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),b=0;b<s.length;b++){var E=s[b];E!=="protocol"&&(n[E]=e[E])}return slashedProtocol[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}var l;if(e.protocol&&e.protocol!==n.protocol){if(!slashedProtocol[e.protocol]){for(var c=Object.keys(e),O=0;O<c.length;O++){var C=c[O];n[C]=e[C]}return n.href=n.format(),n}if(n.protocol=e.protocol,!e.host&&!hostlessProtocol[e.protocol]){for(l=(e.pathname||"").split("/");l.length&&!(e.host=l.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),l[0]!==""&&l.unshift(""),l.length<2&&l.unshift(""),n.pathname=l.join("/")}else n.pathname=e.pathname;if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",_=n.search||"";n.path=m+_}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var S=n.pathname&&n.pathname.charAt(0)==="/",d=e.host||e.pathname&&e.pathname.charAt(0)==="/",T=d||S||n.host&&e.pathname,I=T,P=n.pathname&&n.pathname.split("/")||[],y=n.protocol&&!slashedProtocol[n.protocol];l=e.pathname&&e.pathname.split("/")||[],y&&(n.hostname="",n.port=null,n.host&&(P[0]===""?P[0]=n.host:P.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(l[0]===""?l[0]=e.host:l.unshift(e.host)),e.host=null),T=T&&(l[0]===""||P[0]===""));var o;if(d)n.host=e.host||e.host===""?e.host:n.host,n.hostname=e.hostname||e.hostname===""?e.hostname:n.hostname,n.search=e.search,n.query=e.query,P=l;else if(l.length)P||(P=[]),P.pop(),P=P.concat(l),n.search=e.search,n.query=e.query;else if(!isNullOrUndefined(e.search))return y&&(n.hostname=n.host=P.shift(),o=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1,o&&(n.auth=o.shift(),n.host=n.hostname=o.shift())),n.search=e.search,n.query=e.query,(!isNull(n.pathname)||!isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!P.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var p=P.slice(-1)[0],f=(n.host||e.host||P.length>1)&&(p==="."||p==="..")||p==="",h=0,w=P.length;w>=0;w--)p=P[w],p==="."?P.splice(w,1):p===".."?(P.splice(w,1),h++):h&&(P.splice(w,1),h--);if(!T&&!I)for(;h--;h)P.unshift("..");T&&P[0]!==""&&(!P[0]||P[0].charAt(0)!=="/")&&P.unshift(""),f&&P.join("/").substr(-1)!=="/"&&P.push("");var D=P[0]===""||P[0]&&P[0].charAt(0)==="/";return y&&(n.hostname=n.host=D?"":P.length?P.shift():"",o=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1,o&&(n.auth=o.shift(),n.host=n.hostname=o.shift())),T=T||n.host&&P.length,T&&!D&&P.unshift(""),P.length?n.pathname=P.join("/"):(n.pathname=null,n.path=null),(!isNull(n.pathname)||!isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n};Url.prototype.parseHost=function(){return parseHost(this)};function parseHost(e){var t=e.host,n=portPattern.exec(t);n&&(n=n[0],n!==":"&&(e.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(e.hostname=t)}var _polyfillNode_url$1=Object.freeze({__proto__:null,URL:URL$1,URLSearchParams,Url,default:_polyfillNode_url,fileURLToPath:urlFileURLToPath,format:urlFormat,parse:urlParse,resolve:urlResolve,resolveObject:urlResolveObject});function request$1(e,t){typeof e=="string"&&(e=urlParse(e));var n=global$1.location.protocol.search(/^https?:$/)===-1?"http:":"",i=e.protocol||n,r=e.hostname||e.host,a=e.port,s=e.path||"/";r&&r.indexOf(":")!==-1&&(r="["+r+"]"),e.url=(r?i+"//"+r:"")+(a?":"+a:"")+s,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var b=new ClientRequest(e);return t&&b.on("response",t),b}function get$1(e,t){var n=request$1(e,t);return n.end(),n}function Agent$1(){}Agent$1.defaultMaxSockets=4;var METHODS$1=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES$1={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_polyfillNode_http={request:request$1,get:get$1,Agent:Agent$1,METHODS:METHODS$1,STATUS_CODES:STATUS_CODES$1},_polyfillNode_http$1=Object.freeze({__proto__:null,Agent:Agent$1,METHODS:METHODS$1,STATUS_CODES:STATUS_CODES$1,default:_polyfillNode_http,get:get$1,request:request$1}),require$$2=getAugmentedNamespace(_polyfillNode_http$1);function request(e,t){typeof e=="string"&&(e=urlParse(e));var n=global$1.location.protocol.search(/^https?:$/)===-1?"http:":"",i=e.protocol||n,r=e.hostname||e.host,a=e.port,s=e.path||"/";r&&r.indexOf(":")!==-1&&(r="["+r+"]"),e.url=(r?i+"//"+r:"")+(a?":"+a:"")+s,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var b=new ClientRequest(e);return t&&b.on("response",t),b}function get(e,t){var n=request(e,t);return n.end(),n}function Agent(){}Agent.defaultMaxSockets=4;var METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},_polyfillNode_https={request,get,Agent,METHODS,STATUS_CODES},_polyfillNode_https$1=Object.freeze({__proto__:null,Agent,METHODS,STATUS_CODES,default:_polyfillNode_https,get,request}),require$$3=getAugmentedNamespace(_polyfillNode_https$1),require$$4=getAugmentedNamespace(_polyfillNode_url$1),msg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function arraySet(e,t,n,i,r){if(t.subarray&&e.subarray){e.set(t.subarray(n,n+i),r);return}for(var a=0;a<i;a++)e[r+a]=t[n+a]}var Buf8=Uint8Array,Buf16=Uint16Array,Buf32=Int32Array,Z_FIXED$2=4,Z_BINARY$1=0,Z_TEXT$1=1,Z_UNKNOWN$2=2;function zero$1(e){for(var t=e.length;--t>=0;)e[t]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);var static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES$1);zero$1(base_length);var base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}var static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function d_code(e){return e<256?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function send_bits(e,t,n){e.bi_valid>Buf_size-n?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=n-Buf_size):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function send_code(e,t,n){send_bits(e,n[t*2],n[t*2+1])}function bi_reverse(e,t){var n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1}function bi_flush(e){e.bi_valid===16?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,t){var n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,b=t.stat_desc.extra_base,E=t.stat_desc.max_length,l,c,O,C,m,_,S=0;for(C=0;C<=MAX_BITS$1;C++)e.bl_count[C]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<HEAP_SIZE$1;l++)c=e.heap[l],C=n[n[c*2+1]*2+1]+1,C>E&&(C=E,S++),n[c*2+1]=C,!(c>i)&&(e.bl_count[C]++,m=0,c>=b&&(m=s[c-b]),_=n[c*2],e.opt_len+=_*(C+m),a&&(e.static_len+=_*(r[c*2+1]+m)));if(S!==0){do{for(C=E-1;e.bl_count[C]===0;)C--;e.bl_count[C]--,e.bl_count[C+1]+=2,e.bl_count[E]--,S-=2}while(S>0);for(C=E;C!==0;C--)for(c=e.bl_count[C];c!==0;)O=e.heap[--l],!(O>i)&&(n[O*2+1]!==C&&(e.opt_len+=(C-n[O*2+1])*n[O*2],n[O*2+1]=C),c--)}}function gen_codes(e,t,n){var i=new Array(MAX_BITS$1+1),r=0,a,s;for(a=1;a<=MAX_BITS$1;a++)i[a]=r=r+n[a-1]<<1;for(s=0;s<=t;s++){var b=e[s*2+1];b!==0&&(e[s*2]=bi_reverse(i[b]++,b))}}function tr_static_init(){var e,t,n,i,r,a=new Array(MAX_BITS$1+1);for(n=0,i=0;i<LENGTH_CODES$1-1;i++)for(base_length[i]=n,e=0;e<1<<extra_lbits[i];e++)_length_code[n++]=i;for(_length_code[n-1]=i,r=0,i=0;i<16;i++)for(base_dist[i]=r,e=0;e<1<<extra_dbits[i];e++)_dist_code[r++]=i;for(r>>=7;i<D_CODES$1;i++)for(base_dist[i]=r<<7,e=0;e<1<<extra_dbits[i]-7;e++)_dist_code[256+r++]=i;for(t=0;t<=MAX_BITS$1;t++)a[t]=0;for(e=0;e<=143;)static_ltree[e*2+1]=8,e++,a[8]++;for(;e<=255;)static_ltree[e*2+1]=9,e++,a[9]++;for(;e<=279;)static_ltree[e*2+1]=7,e++,a[7]++;for(;e<=287;)static_ltree[e*2+1]=8,e++,a[8]++;for(gen_codes(static_ltree,L_CODES$1+1,a),e=0;e<D_CODES$1;e++)static_dtree[e*2+1]=5,static_dtree[e*2]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)}function init_block(e){var t;for(t=0;t<L_CODES$1;t++)e.dyn_ltree[t*2]=0;for(t=0;t<D_CODES$1;t++)e.dyn_dtree[t*2]=0;for(t=0;t<BL_CODES$1;t++)e.bl_tree[t*2]=0;e.dyn_ltree[END_BLOCK*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,t,n,i){bi_windup(e),i&&(put_short(e,n),put_short(e,~n)),arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function smaller(e,t,n,i){var r=t*2,a=n*2;return e[r]<e[a]||e[r]===e[a]&&i[t]<=i[n]}function pqdownheap(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&smaller(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!smaller(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function compress_block(e,t,n){var i,r,a=0,s,b;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+a*2]<<8|e.pending_buf[e.d_buf+a*2+1],r=e.pending_buf[e.l_buf+a],a++,i===0?send_code(e,r,t):(s=_length_code[r],send_code(e,s+LITERALS$1+1,t),b=extra_lbits[s],b!==0&&(r-=base_length[s],send_bits(e,r,b)),i--,s=d_code(i),send_code(e,s,n),b=extra_dbits[s],b!==0&&(i-=base_dist[s],send_bits(e,i,b)));while(a<e.last_lit);send_code(e,END_BLOCK,t)}function build_tree(e,t){var n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,a=t.stat_desc.elems,s,b,E=-1,l;for(e.heap_len=0,e.heap_max=HEAP_SIZE$1,s=0;s<a;s++)n[s*2]!==0?(e.heap[++e.heap_len]=E=s,e.depth[s]=0):n[s*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=E<2?++E:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=i[l*2+1]);for(t.max_code=E,s=e.heap_len>>1;s>=1;s--)pqdownheap(e,n,s);l=a;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,n,1),b=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=b,n[l*2]=n[s*2]+n[b*2],e.depth[l]=(e.depth[s]>=e.depth[b]?e.depth[s]:e.depth[b])+1,n[s*2+1]=n[b*2+1]=l,e.heap[1]=l++,pqdownheap(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(n,E,e.bl_count)}function scan_tree(e,t,n){var i,r=-1,a,s=t[0*2+1],b=0,E=7,l=4;for(s===0&&(E=138,l=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)a=s,s=t[(i+1)*2+1],!(++b<E&&a===s)&&(b<l?e.bl_tree[a*2]+=b:a!==0?(a!==r&&e.bl_tree[a*2]++,e.bl_tree[REP_3_6*2]++):b<=10?e.bl_tree[REPZ_3_10*2]++:e.bl_tree[REPZ_11_138*2]++,b=0,r=a,s===0?(E=138,l=3):a===s?(E=6,l=3):(E=7,l=4))}function send_tree(e,t,n){var i,r=-1,a,s=t[0*2+1],b=0,E=7,l=4;for(s===0&&(E=138,l=3),i=0;i<=n;i++)if(a=s,s=t[(i+1)*2+1],!(++b<E&&a===s)){if(b<l)do send_code(e,a,e.bl_tree);while(--b!==0);else a!==0?(a!==r&&(send_code(e,a,e.bl_tree),b--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,b-3,2)):b<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,b-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,b-11,7));b=0,r=a,s===0?(E=138,l=3):a===s?(E=6,l=3):(E=7,l=4)}}function build_bl_tree(e){var t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES$1-1;t>=3&&e.bl_tree[bl_order[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function send_all_trees(e,t,n,i){var r;for(send_bits(e,t-257,5),send_bits(e,n-1,5),send_bits(e,i-4,4),r=0;r<i;r++)send_bits(e,e.bl_tree[bl_order[r]*2+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,n-1)}function detect_data_type(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Z_BINARY$1;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Z_TEXT$1;for(n=32;n<LITERALS$1;n++)if(e.dyn_ltree[n*2]!==0)return Z_TEXT$1;return Z_BINARY$1}var static_init_done=!1;function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,t,n,i){send_bits(e,(STORED_BLOCK<<1)+(i?1:0),3),copy_block(e,t,n,!0)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,t,n,i){var r,a,s=0;e.level>0?(e.strm.data_type===Z_UNKNOWN$2&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),s=build_bl_tree(e),r=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=r&&(r=a)):r=a=n+5,n+4<=r&&t!==-1?_tr_stored_block(e,t,n,i):e.strategy===Z_FIXED$2||a===r?(send_bits(e,(STATIC_TREES<<1)+(i?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(i?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),i&&bi_windup(e)}function _tr_tally(e,t,n){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(_length_code[n]+LITERALS$1+1)*2]++,e.dyn_dtree[d_code(t)*2]++),e.last_lit===e.lit_bufsize-1}function adler32(e,t,n,i){for(var r=e&65535|0,a=e>>>16&65535|0,s=0;n!==0;){s=n>2e3?2e3:n,n-=s;do r=r+t[i++]|0,a=a+r|0;while(--s);r%=65521,a%=65521}return r|a<<16|0}function makeTable(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}var crcTable=makeTable();function crc32(e,t,n,i){var r=crcTable,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^r[(e^t[s])&255];return e^-1}var Z_NO_FLUSH$1=0,Z_PARTIAL_FLUSH$1=1,Z_FULL_FLUSH$1=3,Z_FINISH$2=4,Z_BLOCK$2=5,Z_OK$2=0,Z_STREAM_END$2=1,Z_STREAM_ERROR$2=-2,Z_DATA_ERROR$2=-3,Z_BUF_ERROR$2=-5,Z_DEFAULT_COMPRESSION$1=-1,Z_FILTERED$1=1,Z_HUFFMAN_ONLY$1=2,Z_RLE$1=3,Z_FIXED$1=4,Z_UNKNOWN$1=2,Z_DEFLATED$2=8,MAX_MEM_LEVEL=9,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;function err(e,t){return e.msg=msg[t],t}function rank(e){return(e<<1)-(e>4?9:0)}function zero(e){for(var t=e.length;--t>=0;)e[t]=0}function flush_pending(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))}function flush_block_only(e,t){_tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)}function put_byte(e,t){e.pending_buf[e.pending++]=t}function putShortMSB(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function read_buf(e,t,n,i){var r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,arraySet(t,e.input,e.next_in,r,n),e.state.wrap===1?e.adler=adler32(e.adler,t,r,n):e.state.wrap===2&&(e.adler=crc32(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)}function longest_match(e,t){var n=e.max_chain_length,i=e.strstart,r,a,s=e.prev_length,b=e.nice_match,E=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,l=e.window,c=e.w_mask,O=e.prev,C=e.strstart+MAX_MATCH,m=l[i+s-1],_=l[i+s];e.prev_length>=e.good_match&&(n>>=2),b>e.lookahead&&(b=e.lookahead);do if(r=t,!(l[r+s]!==_||l[r+s-1]!==m||l[r]!==l[i]||l[++r]!==l[i+1])){i+=2,r++;do;while(l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&i<C);if(a=MAX_MATCH-(C-i),i=C-MAX_MATCH,a>s){if(e.match_start=t,s=a,a>=b)break;m=l[i+s-1],_=l[i+s]}}while((t=O[t&c])>E&&--n!==0);return s<=e.lookahead?s:e.lookahead}function fill_window(e){var t=e.w_size,n,i,r,a,s;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-MIN_LOOKAHEAD)){arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);i=t,n=i;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);a+=t}if(e.strm.avail_in===0)break;if(i=read_buf(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=i,e.lookahead+e.insert>=MIN_MATCH)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+MIN_MATCH-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH)););}while(e.lookahead<MIN_LOOKAHEAD&&e.strm.avail_in!==0)}function deflate_stored(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(fill_window(e),e.lookahead===0&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,flush_block_only(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-MIN_LOOKAHEAD&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):(e.strstart>e.block_start&&(flush_block_only(e,!1),e.strm.avail_out===0),BS_NEED_MORE)}function deflate_fast(e,t){for(var n,i;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(n=0,e.lookahead>=MIN_MATCH&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,n)),e.match_length>=MIN_MATCH)if(i=_tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(e,t){for(var n,i,r;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(n=0,e.lookahead>=MIN_MATCH&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,n),e.match_length<=5&&(e.strategy===Z_FILTERED$1||e.match_length===MIN_MATCH&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH-1)),e.prev_length>=MIN_MATCH&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-MIN_MATCH,i=_tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+MIN_MATCH-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=MIN_MATCH-1,e.strstart++,i&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}else if(e.match_available){if(i=_tr_tally(e,0,e.window[e.strstart-1]),i&&flush_block_only(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=_tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(e,t){for(var n,i,r,a,s=e.window;;){if(e.lookahead<=MAX_MATCH){if(fill_window(e),e.lookahead<=MAX_MATCH&&t===Z_NO_FLUSH$1)return BS_NEED_MORE;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=MIN_MATCH&&e.strstart>0&&(r=e.strstart-1,i=s[r],i===s[++r]&&i===s[++r]&&i===s[++r])){a=e.strstart+MAX_MATCH;do;while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<a);e.match_length=MAX_MATCH-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH?(n=_tr_tally(e,1,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(e,t){for(var n;;){if(e.lookahead===0&&(fill_window(e),e.lookahead===0)){if(t===Z_NO_FLUSH$1)return BS_NEED_MORE;break}if(e.match_length=0,n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(flush_block_only(e,!1),e.strm.avail_out===0))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$2?(flush_block_only(e,!0),e.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):e.last_lit&&(flush_block_only(e,!1),e.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(e){e.window_size=2*e.w_size,zero(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH-1,e.match_available=0,e.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Buf16(HEAP_SIZE*2),this.dyn_dtree=new Buf16((2*D_CODES+1)*2),this.bl_tree=new Buf16((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Buf16(MAX_BITS+1),this.heap=new Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(e){var t;return!e||!e.state?err(e,Z_STREAM_ERROR$2):(e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN$1,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?INIT_STATE:BUSY_STATE,e.adler=t.wrap===2?0:1,t.last_flush=Z_NO_FLUSH$1,_tr_init(t),Z_OK$2)}function deflateReset(e){var t=deflateResetKeep(e);return t===Z_OK$2&&lm_init(e.state),t}function deflateInit2(e,t,n,i,r,a){if(!e)return Z_STREAM_ERROR$2;var s=1;if(t===Z_DEFAULT_COMPRESSION$1&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>MAX_MEM_LEVEL||n!==Z_DEFLATED$2||i<8||i>15||t<0||t>9||a<0||a>Z_FIXED$1)return err(e,Z_STREAM_ERROR$2);i===8&&(i=9);var b=new DeflateState;return e.state=b,b.strm=e,b.wrap=s,b.gzhead=null,b.w_bits=i,b.w_size=1<<b.w_bits,b.w_mask=b.w_size-1,b.hash_bits=r+7,b.hash_size=1<<b.hash_bits,b.hash_mask=b.hash_size-1,b.hash_shift=~~((b.hash_bits+MIN_MATCH-1)/MIN_MATCH),b.window=new Buf8(b.w_size*2),b.head=new Buf16(b.hash_size),b.prev=new Buf16(b.w_size),b.lit_bufsize=1<<r+6,b.pending_buf_size=b.lit_bufsize*4,b.pending_buf=new Buf8(b.pending_buf_size),b.d_buf=1*b.lit_bufsize,b.l_buf=(1+2)*b.lit_bufsize,b.level=t,b.strategy=a,b.method=n,deflateReset(e)}function deflate$1(e,t){var n,i,r,a;if(!e||!e.state||t>Z_BLOCK$2||t<0)return e?err(e,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;if(i=e.state,!e.output||!e.input&&e.avail_in!==0||i.status===FINISH_STATE&&t!==Z_FINISH$2)return err(e,e.avail_out===0?Z_BUF_ERROR$2:Z_STREAM_ERROR$2);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===INIT_STATE)if(i.wrap===2)e.adler=0,put_byte(i,31),put_byte(i,139),put_byte(i,8),i.gzhead?(put_byte(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),put_byte(i,i.gzhead.time&255),put_byte(i,i.gzhead.time>>8&255),put_byte(i,i.gzhead.time>>16&255),put_byte(i,i.gzhead.time>>24&255),put_byte(i,i.level===9?2:i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?4:0),put_byte(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(put_byte(i,i.gzhead.extra.length&255),put_byte(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=crc32(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=EXTRA_STATE):(put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,0),put_byte(i,i.level===9?2:i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?4:0),put_byte(i,OS_CODE),i.status=BUSY_STATE);else{var s=Z_DEFLATED$2+(i.w_bits-8<<4)<<8,b=-1;i.strategy>=Z_HUFFMAN_ONLY$1||i.level<2?b=0:i.level<6?b=1:i.level===6?b=2:b=3,s|=b<<6,i.strstart!==0&&(s|=PRESET_DICT),s+=31-s%31,i.status=BUSY_STATE,putShortMSB(i,s),i.strstart!==0&&(putShortMSB(i,e.adler>>>16),putShortMSB(i,e.adler&65535)),e.adler=1}if(i.status===EXTRA_STATE)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),flush_pending(e),r=i.pending,i.pending===i.pending_buf_size));)put_byte(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=NAME_STATE)}else i.status=NAME_STATE;if(i.status===NAME_STATE)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),flush_pending(e),r=i.pending,i.pending===i.pending_buf_size)){a=1;break}i.gzindex<i.gzhead.name.length?a=i.gzhead.name.charCodeAt(i.gzindex++)&255:a=0,put_byte(i,a)}while(a!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),a===0&&(i.gzindex=0,i.status=COMMENT_STATE)}else i.status=COMMENT_STATE;if(i.status===COMMENT_STATE)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),flush_pending(e),r=i.pending,i.pending===i.pending_buf_size)){a=1;break}i.gzindex<i.gzhead.comment.length?a=i.gzhead.comment.charCodeAt(i.gzindex++)&255:a=0,put_byte(i,a)}while(a!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=crc32(e.adler,i.pending_buf,i.pending-r,r)),a===0&&(i.status=HCRC_STATE)}else i.status=HCRC_STATE;if(i.status===HCRC_STATE&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&flush_pending(e),i.pending+2<=i.pending_buf_size&&(put_byte(i,e.adler&255),put_byte(i,e.adler>>8&255),e.adler=0,i.status=BUSY_STATE)):i.status=BUSY_STATE),i.pending!==0){if(flush_pending(e),e.avail_out===0)return i.last_flush=-1,Z_OK$2}else if(e.avail_in===0&&rank(t)<=rank(n)&&t!==Z_FINISH$2)return err(e,Z_BUF_ERROR$2);if(i.status===FINISH_STATE&&e.avail_in!==0)return err(e,Z_BUF_ERROR$2);if(e.avail_in!==0||i.lookahead!==0||t!==Z_NO_FLUSH$1&&i.status!==FINISH_STATE){var E=i.strategy===Z_HUFFMAN_ONLY$1?deflate_huff(i,t):i.strategy===Z_RLE$1?deflate_rle(i,t):configuration_table[i.level].func(i,t);if((E===BS_FINISH_STARTED||E===BS_FINISH_DONE)&&(i.status=FINISH_STATE),E===BS_NEED_MORE||E===BS_FINISH_STARTED)return e.avail_out===0&&(i.last_flush=-1),Z_OK$2;if(E===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH$1?_tr_align(i):t!==Z_BLOCK$2&&(_tr_stored_block(i,0,0,!1),t===Z_FULL_FLUSH$1&&(zero(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),flush_pending(e),e.avail_out===0))return i.last_flush=-1,Z_OK$2}return t!==Z_FINISH$2?Z_OK$2:i.wrap<=0?Z_STREAM_END$2:(i.wrap===2?(put_byte(i,e.adler&255),put_byte(i,e.adler>>8&255),put_byte(i,e.adler>>16&255),put_byte(i,e.adler>>24&255),put_byte(i,e.total_in&255),put_byte(i,e.total_in>>8&255),put_byte(i,e.total_in>>16&255),put_byte(i,e.total_in>>24&255)):(putShortMSB(i,e.adler>>>16),putShortMSB(i,e.adler&65535)),flush_pending(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Z_OK$2:Z_STREAM_END$2)}function deflateEnd(e){var t;return!e||!e.state?Z_STREAM_ERROR$2:(t=e.state.status,t!==INIT_STATE&&t!==EXTRA_STATE&&t!==NAME_STATE&&t!==COMMENT_STATE&&t!==HCRC_STATE&&t!==BUSY_STATE&&t!==FINISH_STATE?err(e,Z_STREAM_ERROR$2):(e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR$2):Z_OK$2))}var BAD$1=30,TYPE$1=12;function inflate_fast(e,t){var n,i,r,a,s,b,E,l,c,O,C,m,_,S,d,T,I,P,y,o,p,f,h,w,D;n=e.state,i=e.next_in,w=e.input,r=i+(e.avail_in-5),a=e.next_out,D=e.output,s=a-(t-e.avail_out),b=a+(e.avail_out-257),E=n.dmax,l=n.wsize,c=n.whave,O=n.wnext,C=n.window,m=n.hold,_=n.bits,S=n.lencode,d=n.distcode,T=(1<<n.lenbits)-1,I=(1<<n.distbits)-1;e:do{_<15&&(m+=w[i++]<<_,_+=8,m+=w[i++]<<_,_+=8),P=S[m&T];t:for(;;){if(y=P>>>24,m>>>=y,_-=y,y=P>>>16&255,y===0)D[a++]=P&65535;else if(y&16){o=P&65535,y&=15,y&&(_<y&&(m+=w[i++]<<_,_+=8),o+=m&(1<<y)-1,m>>>=y,_-=y),_<15&&(m+=w[i++]<<_,_+=8,m+=w[i++]<<_,_+=8),P=d[m&I];n:for(;;){if(y=P>>>24,m>>>=y,_-=y,y=P>>>16&255,y&16){if(p=P&65535,y&=15,_<y&&(m+=w[i++]<<_,_+=8,_<y&&(m+=w[i++]<<_,_+=8)),p+=m&(1<<y)-1,p>E){e.msg="invalid distance too far back",n.mode=BAD$1;break e}if(m>>>=y,_-=y,y=a-s,p>y){if(y=p-y,y>c&&n.sane){e.msg="invalid distance too far back",n.mode=BAD$1;break e}if(f=0,h=C,O===0){if(f+=l-y,y<o){o-=y;do D[a++]=C[f++];while(--y);f=a-p,h=D}}else if(O<y){if(f+=l+O-y,y-=O,y<o){o-=y;do D[a++]=C[f++];while(--y);if(f=0,O<o){y=O,o-=y;do D[a++]=C[f++];while(--y);f=a-p,h=D}}}else if(f+=O-y,y<o){o-=y;do D[a++]=C[f++];while(--y);f=a-p,h=D}for(;o>2;)D[a++]=h[f++],D[a++]=h[f++],D[a++]=h[f++],o-=3;o&&(D[a++]=h[f++],o>1&&(D[a++]=h[f++]))}else{f=a-p;do D[a++]=D[f++],D[a++]=D[f++],D[a++]=D[f++],o-=3;while(o>2);o&&(D[a++]=D[f++],o>1&&(D[a++]=D[f++]))}}else if(y&64){e.msg="invalid distance code",n.mode=BAD$1;break e}else{P=d[(P&65535)+(m&(1<<y)-1)];continue n}break}}else if(y&64)if(y&32){n.mode=TYPE$1;break e}else{e.msg="invalid literal/length code",n.mode=BAD$1;break e}else{P=S[(P&65535)+(m&(1<<y)-1)];continue t}break}}while(i<r&&a<b);o=_>>3,i-=o,_-=o<<3,m&=(1<<_)-1,e.next_in=i,e.next_out=a,e.avail_in=i<r?5+(r-i):5-(i-r),e.avail_out=a<b?257+(b-a):257-(a-b),n.hold=m,n.bits=_}var MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function inflate_table(e,t,n,i,r,a,s,b){var E=b.bits,l=0,c=0,O=0,C=0,m=0,_=0,S=0,d=0,T=0,I=0,P,y,o,p,f,h=null,w=0,D,g=new Buf16(MAXBITS+1),H=new Buf16(MAXBITS+1),X=null,J=0,ee,ie,he;for(l=0;l<=MAXBITS;l++)g[l]=0;for(c=0;c<i;c++)g[t[n+c]]++;for(m=E,C=MAXBITS;C>=1&&g[C]===0;C--);if(m>C&&(m=C),C===0)return r[a++]=1<<24|64<<16|0,r[a++]=1<<24|64<<16|0,b.bits=1,0;for(O=1;O<C&&g[O]===0;O++);for(m<O&&(m=O),d=1,l=1;l<=MAXBITS;l++)if(d<<=1,d-=g[l],d<0)return-1;if(d>0&&(e===CODES$1||C!==1))return-1;for(H[1]=0,l=1;l<MAXBITS;l++)H[l+1]=H[l]+g[l];for(c=0;c<i;c++)t[n+c]!==0&&(s[H[t[n+c]]++]=c);if(e===CODES$1?(h=X=s,D=19):e===LENS$1?(h=lbase,w-=257,X=lext,J-=257,D=256):(h=dbase,X=dext,D=-1),I=0,c=0,l=O,f=a,_=m,S=0,o=-1,T=1<<m,p=T-1,e===LENS$1&&T>ENOUGH_LENS$1||e===DISTS$1&&T>ENOUGH_DISTS$1)return 1;for(;;){ee=l-S,s[c]<D?(ie=0,he=s[c]):s[c]>D?(ie=X[J+s[c]],he=h[w+s[c]]):(ie=32+64,he=0),P=1<<l-S,y=1<<_,O=y;do y-=P,r[f+(I>>S)+y]=ee<<24|ie<<16|he|0;while(y!==0);for(P=1<<l-1;I&P;)P>>=1;if(P!==0?(I&=P-1,I+=P):I=0,c++,--g[l]===0){if(l===C)break;l=t[n+s[c]]}if(l>m&&(I&p)!==o){for(S===0&&(S=m),f+=O,_=l-S,d=1<<_;_+S<C&&(d-=g[_+S],!(d<=0));)_++,d<<=1;if(T+=1<<_,e===LENS$1&&T>ENOUGH_LENS$1||e===DISTS$1&&T>ENOUGH_DISTS$1)return 1;o=I&p,r[o]=m<<24|_<<16|f-a|0}}return I!==0&&(r[f+I]=l-S<<24|64<<16|0),b.bits=m,0}var CODES=0,LENS=1,DISTS=2,Z_FINISH$1=4,Z_BLOCK$1=5,Z_TREES$1=6,Z_OK$1=0,Z_STREAM_END$1=1,Z_NEED_DICT$1=2,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR$1=-5,Z_DEFLATED$1=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592;function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Buf16(320),this.work=new Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return!e||!e.state?Z_STREAM_ERROR$1:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1)}function inflateReset(e){var t;return!e||!e.state?Z_STREAM_ERROR$1:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e))}function inflateReset2(e,t){var n,i;return!e||!e.state||(i=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Z_STREAM_ERROR$1:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,inflateReset(e))}function inflateInit2(e,t){var n,i;return e?(i=new InflateState,e.state=i,i.window=null,n=inflateReset2(e,t),n!==Z_OK$1&&(e.state=null),n):Z_STREAM_ERROR$1}var virgin=!0,lenfix,distfix;function fixedtables(e){if(virgin){var t;for(lenfix=new Buf32(512),distfix=new Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,n,i){var r,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Buf8(a.wsize)),i>=a.wsize?(arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),arraySet(a.window,t,n-i,r,a.wnext),i-=r,i?(arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0}function inflate$1(e,t){var n,i,r,a,s,b,E,l,c,O,C,m,_,S,d=0,T,I,P,y,o,p,f,h,w=new Buf8(4),D,g,H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Z_STREAM_ERROR$1;n=e.state,n.mode===TYPE&&(n.mode=TYPEDO),s=e.next_out,r=e.output,E=e.avail_out,a=e.next_in,i=e.input,b=e.avail_in,l=n.hold,c=n.bits,O=b,C=E,h=Z_OK$1;e:for(;;)switch(n.mode){case HEAD:if(n.wrap===0){n.mode=TYPEDO;break}for(;c<16;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}if(n.wrap&2&&l===35615){n.check=0,w[0]=l&255,w[1]=l>>>8&255,n.check=crc32(n.check,w,2,0),l=0,c=0,n.mode=FLAGS;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=BAD;break}if((l&15)!==Z_DEFLATED$1){e.msg="unknown compression method",n.mode=BAD;break}if(l>>>=4,c-=4,f=(l&15)+8,n.wbits===0)n.wbits=f;else if(f>n.wbits){e.msg="invalid window size",n.mode=BAD;break}n.dmax=1<<f,e.adler=n.check=1,n.mode=l&512?DICTID:TYPE,l=0,c=0;break;case FLAGS:for(;c<16;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}if(n.flags=l,(n.flags&255)!==Z_DEFLATED$1){e.msg="unknown compression method",n.mode=BAD;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=BAD;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,n.check=crc32(n.check,w,2,0)),l=0,c=0,n.mode=TIME;case TIME:for(;c<32;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}n.head&&(n.head.time=l),n.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,w[2]=l>>>16&255,w[3]=l>>>24&255,n.check=crc32(n.check,w,4,0)),l=0,c=0,n.mode=OS;case OS:for(;c<16;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,n.check=crc32(n.check,w,2,0)),l=0,c=0,n.mode=EXLEN;case EXLEN:if(n.flags&1024){for(;c<16;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,n.check=crc32(n.check,w,2,0)),l=0,c=0}else n.head&&(n.head.extra=null);n.mode=EXTRA;case EXTRA:if(n.flags&1024&&(m=n.length,m>b&&(m=b),m&&(n.head&&(f=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),arraySet(n.head.extra,i,a,m,f)),n.flags&512&&(n.check=crc32(n.check,i,m,a)),b-=m,a+=m,n.length-=m),n.length))break e;n.length=0,n.mode=NAME;case NAME:if(n.flags&2048){if(b===0)break e;m=0;do f=i[a+m++],n.head&&f&&n.length<65536&&(n.head.name+=String.fromCharCode(f));while(f&&m<b);if(n.flags&512&&(n.check=crc32(n.check,i,m,a)),b-=m,a+=m,f)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=COMMENT;case COMMENT:if(n.flags&4096){if(b===0)break e;m=0;do f=i[a+m++],n.head&&f&&n.length<65536&&(n.head.comment+=String.fromCharCode(f));while(f&&m<b);if(n.flags&512&&(n.check=crc32(n.check,i,m,a)),b-=m,a+=m,f)break e}else n.head&&(n.head.comment=null);n.mode=HCRC;case HCRC:if(n.flags&512){for(;c<16;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}if(l!==(n.check&65535)){e.msg="header crc mismatch",n.mode=BAD;break}l=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=TYPE;break;case DICTID:for(;c<32;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}e.adler=n.check=zswap32(l),l=0,c=0,n.mode=DICT;case DICT:if(n.havedict===0)return e.next_out=s,e.avail_out=E,e.next_in=a,e.avail_in=b,n.hold=l,n.bits=c,Z_NEED_DICT$1;e.adler=n.check=1,n.mode=TYPE;case TYPE:if(t===Z_BLOCK$1||t===Z_TREES$1)break e;case TYPEDO:if(n.last){l>>>=c&7,c-=c&7,n.mode=CHECK;break}for(;c<3;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}switch(n.last=l&1,l>>>=1,c-=1,l&3){case 0:n.mode=STORED;break;case 1:if(fixedtables(n),n.mode=LEN_,t===Z_TREES$1){l>>>=2,c-=2;break e}break;case 2:n.mode=TABLE;break;case 3:e.msg="invalid block type",n.mode=BAD}l>>>=2,c-=2;break;case STORED:for(l>>>=c&7,c-=c&7;c<32;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=BAD;break}if(n.length=l&65535,l=0,c=0,n.mode=COPY_,t===Z_TREES$1)break e;case COPY_:n.mode=COPY;case COPY:if(m=n.length,m){if(m>b&&(m=b),m>E&&(m=E),m===0)break e;arraySet(r,i,a,m,s),b-=m,a+=m,E-=m,s+=m,n.length-=m;break}n.mode=TYPE;break;case TABLE:for(;c<14;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}if(n.nlen=(l&31)+257,l>>>=5,c-=5,n.ndist=(l&31)+1,l>>>=5,c-=5,n.ncode=(l&15)+4,l>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=BAD;break}n.have=0,n.mode=LENLENS;case LENLENS:for(;n.have<n.ncode;){for(;c<3;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}n.lens[H[n.have++]]=l&7,l>>>=3,c-=3}for(;n.have<19;)n.lens[H[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},h=inflate_table(CODES,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,h){e.msg="invalid code lengths set",n.mode=BAD;break}n.have=0,n.mode=CODELENS;case CODELENS:for(;n.have<n.nlen+n.ndist;){for(;d=n.lencode[l&(1<<n.lenbits)-1],T=d>>>24,I=d>>>16&255,P=d&65535,!(T<=c);){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}if(P<16)l>>>=T,c-=T,n.lens[n.have++]=P;else{if(P===16){for(g=T+2;c<g;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}if(l>>>=T,c-=T,n.have===0){e.msg="invalid bit length repeat",n.mode=BAD;break}f=n.lens[n.have-1],m=3+(l&3),l>>>=2,c-=2}else if(P===17){for(g=T+3;c<g;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}l>>>=T,c-=T,f=0,m=3+(l&7),l>>>=3,c-=3}else{for(g=T+7;c<g;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}l>>>=T,c-=T,f=0,m=11+(l&127),l>>>=7,c-=7}if(n.have+m>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=BAD;break}for(;m--;)n.lens[n.have++]=f}}if(n.mode===BAD)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=BAD;break}if(n.lenbits=9,D={bits:n.lenbits},h=inflate_table(LENS,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,h){e.msg="invalid literal/lengths set",n.mode=BAD;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},h=inflate_table(DISTS,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,h){e.msg="invalid distances set",n.mode=BAD;break}if(n.mode=LEN_,t===Z_TREES$1)break e;case LEN_:n.mode=LEN;case LEN:if(b>=6&&E>=258){e.next_out=s,e.avail_out=E,e.next_in=a,e.avail_in=b,n.hold=l,n.bits=c,inflate_fast(e,C),s=e.next_out,r=e.output,E=e.avail_out,a=e.next_in,i=e.input,b=e.avail_in,l=n.hold,c=n.bits,n.mode===TYPE&&(n.back=-1);break}for(n.back=0;d=n.lencode[l&(1<<n.lenbits)-1],T=d>>>24,I=d>>>16&255,P=d&65535,!(T<=c);){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}if(I&&!(I&240)){for(y=T,o=I,p=P;d=n.lencode[p+((l&(1<<y+o)-1)>>y)],T=d>>>24,I=d>>>16&255,P=d&65535,!(y+T<=c);){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}l>>>=y,c-=y,n.back+=y}if(l>>>=T,c-=T,n.back+=T,n.length=P,I===0){n.mode=LIT;break}if(I&32){n.back=-1,n.mode=TYPE;break}if(I&64){e.msg="invalid literal/length code",n.mode=BAD;break}n.extra=I&15,n.mode=LENEXT;case LENEXT:if(n.extra){for(g=n.extra;c<g;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=DIST;case DIST:for(;d=n.distcode[l&(1<<n.distbits)-1],T=d>>>24,I=d>>>16&255,P=d&65535,!(T<=c);){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}if(!(I&240)){for(y=T,o=I,p=P;d=n.distcode[p+((l&(1<<y+o)-1)>>y)],T=d>>>24,I=d>>>16&255,P=d&65535,!(y+T<=c);){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}l>>>=y,c-=y,n.back+=y}if(l>>>=T,c-=T,n.back+=T,I&64){e.msg="invalid distance code",n.mode=BAD;break}n.offset=P,n.extra=I&15,n.mode=DISTEXT;case DISTEXT:if(n.extra){for(g=n.extra;c<g;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=BAD;break}n.mode=MATCH;case MATCH:if(E===0)break e;if(m=C-E,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=BAD;break}m>n.wnext?(m-=n.wnext,_=n.wsize-m):_=n.wnext-m,m>n.length&&(m=n.length),S=n.window}else S=r,_=s-n.offset,m=n.length;m>E&&(m=E),E-=m,n.length-=m;do r[s++]=S[_++];while(--m);n.length===0&&(n.mode=LEN);break;case LIT:if(E===0)break e;r[s++]=n.length,E--,n.mode=LEN;break;case CHECK:if(n.wrap){for(;c<32;){if(b===0)break e;b--,l|=i[a++]<<c,c+=8}if(C-=E,e.total_out+=C,n.total+=C,C&&(e.adler=n.check=n.flags?crc32(n.check,r,C,s-C):adler32(n.check,r,C,s-C)),C=E,(n.flags?l:zswap32(l))!==n.check){e.msg="incorrect data check",n.mode=BAD;break}l=0,c=0}n.mode=LENGTH;case LENGTH:if(n.wrap&&n.flags){for(;c<32;){if(b===0)break e;b--,l+=i[a++]<<c,c+=8}if(l!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=BAD;break}l=0,c=0}n.mode=DONE;case DONE:h=Z_STREAM_END$1;break e;case BAD:h=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=s,e.avail_out=E,e.next_in=a,e.avail_in=b,n.hold=l,n.bits=c,(n.wsize||C!==e.avail_out&&n.mode<BAD&&(n.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,C-e.avail_out),O-=e.avail_in,C-=e.avail_out,e.total_in+=O,e.total_out+=C,n.total+=C,n.wrap&&C&&(e.adler=n.check=n.flags?crc32(n.check,r,C,e.next_out-C):adler32(n.check,r,C,e.next_out-C)),e.data_type=n.bits+(n.last?64:0)+(n.mode===TYPE?128:0)+(n.mode===LEN_||n.mode===COPY_?256:0),(O===0&&C===0||t===Z_FINISH$1)&&h===Z_OK$1&&(h=Z_BUF_ERROR$1),h}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1}var NONE=0,DEFLATE=1,INFLATE=2,GZIP=3,GUNZIP=4,DEFLATERAW=5,INFLATERAW=6,UNZIP=7,Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_SYNC_FLUSH=2,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_ERRNO=-1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_NO_COMPRESSION=0,Z_BEST_SPEED=1,Z_BEST_COMPRESSION=9,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2,Z_DEFLATED=8;function Zlib$1(e){if(e<DEFLATE||e>UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}Zlib$1.prototype.init=function(e,t,n,i,r){this.windowBits=e,this.level=t,this.memLevel=n,this.strategy=i,(this.mode===GZIP||this.mode===GUNZIP)&&(this.windowBits+=16),this.mode===UNZIP&&(this.windowBits+=32),(this.mode===DEFLATERAW||this.mode===INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new ZStream;var a;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:a=deflateInit2(this.strm,this.level,Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case INFLATE:case GUNZIP:case INFLATERAW:case UNZIP:a=inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(a!==Z_OK){this._error(a);return}this.write_in_progress=!1,this.init_done=!0};Zlib$1.prototype.params=function(){throw new Error("deflateParams Not supported")};Zlib$1.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};Zlib$1.prototype.write=function(e,t,n,i,r,a,s){this._writeCheck(),this.write_in_progress=!0;var b=this;return browser$1.nextTick(function(){b.write_in_progress=!1;var E=b._write(e,t,n,i,r,a,s);b.callback(E[0],E[1]),b.pending_close&&b.close()}),this};function bufferSet(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}Zlib$1.prototype.writeSync=function(e,t,n,i,r,a,s){return this._writeCheck(),this._write(e,t,n,i,r,a,s)};Zlib$1.prototype._write=function(e,t,n,i,r,a,s){if(this.write_in_progress=!0,e!==Z_NO_FLUSH&&e!==Z_PARTIAL_FLUSH&&e!==Z_SYNC_FLUSH&&e!==Z_FULL_FLUSH&&e!==Z_FINISH&&e!==Z_BLOCK)throw new Error("Invalid flush value");t==null&&(t=new Buffer(0),i=0,n=0),r._set?r.set=r._set:r.set=bufferSet;var b=this.strm;b.avail_in=i,b.input=t,b.next_in=n,b.avail_out=s,b.output=r,b.next_out=a;var E;switch(this.mode){case DEFLATE:case GZIP:case DEFLATERAW:E=deflate$1(b,e);break;case UNZIP:case INFLATE:case GUNZIP:case INFLATERAW:E=inflate$1(b,e);break;default:throw new Error("Unknown mode "+this.mode)}return E!==Z_STREAM_END&&E!==Z_OK&&this._error(E),this.write_in_progress=!1,[b.avail_in,b.avail_out]};Zlib$1.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===DEFLATE||this.mode===GZIP||this.mode===DEFLATERAW?deflateEnd(this.strm):inflateEnd(this.strm),this.mode=NONE};var status;Zlib$1.prototype.reset=function(){switch(this.mode){case DEFLATE:case DEFLATERAW:status=deflateReset(this.strm);break;case INFLATE:case INFLATERAW:status=inflateReset(this.strm);break}status!==Z_OK&&this._error(status)};Zlib$1.prototype._error=function(e){this.onerror(msg[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var _binding=Object.freeze({__proto__:null,DEFLATE,DEFLATERAW,GUNZIP,GZIP,INFLATE,INFLATERAW,NONE,UNZIP,Z_BEST_COMPRESSION,Z_BEST_SPEED,Z_BINARY,Z_BLOCK,Z_BUF_ERROR,Z_DATA_ERROR,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED,Z_ERRNO,Z_FILTERED,Z_FINISH,Z_FIXED,Z_FULL_FLUSH,Z_HUFFMAN_ONLY,Z_NEED_DICT,Z_NO_COMPRESSION,Z_NO_FLUSH,Z_OK,Z_PARTIAL_FLUSH,Z_RLE,Z_STREAM_END,Z_STREAM_ERROR,Z_SYNC_FLUSH,Z_TEXT,Z_TREES,Z_UNKNOWN,Zlib:Zlib$1});function assert(e,t){if(!e)throw new Error(t)}var binding={};Object.keys(_binding).forEach(function(e){binding[e]=_binding[e]});binding.Z_MIN_WINDOWBITS=8;binding.Z_MAX_WINDOWBITS=15;binding.Z_DEFAULT_WINDOWBITS=15;binding.Z_MIN_CHUNK=64;binding.Z_MAX_CHUNK=1/0;binding.Z_DEFAULT_CHUNK=16*1024;binding.Z_MIN_MEMLEVEL=1;binding.Z_MAX_MEMLEVEL=9;binding.Z_DEFAULT_MEMLEVEL=8;binding.Z_MIN_LEVEL=-1;binding.Z_MAX_LEVEL=9;binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION;var codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR};Object.keys(codes).forEach(function(e){codes[codes[e]]=e});function createDeflate(e){return new Deflate(e)}function createInflate(e){return new Inflate(e)}function createDeflateRaw(e){return new DeflateRaw(e)}function createInflateRaw(e){return new InflateRaw(e)}function createGzip(e){return new Gzip(e)}function createGunzip(e){return new Gunzip(e)}function createUnzip(e){return new Unzip(e)}function deflate(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Deflate(t),e,n)}function deflateSync(e,t){return zlibBufferSync(new Deflate(t),e)}function gzip(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Gzip(t),e,n)}function gzipSync(e,t){return zlibBufferSync(new Gzip(t),e)}function deflateRaw(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new DeflateRaw(t),e,n)}function deflateRawSync(e,t){return zlibBufferSync(new DeflateRaw(t),e)}function unzip(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Unzip(t),e,n)}function unzipSync(e,t){return zlibBufferSync(new Unzip(t),e)}function inflate(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Inflate(t),e,n)}function inflateSync(e,t){return zlibBufferSync(new Inflate(t),e)}function gunzip(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new Gunzip(t),e,n)}function gunzipSync(e,t){return zlibBufferSync(new Gunzip(t),e)}function inflateRaw(e,t,n){return typeof t=="function"&&(n=t,t={}),zlibBuffer(new InflateRaw(t),e,n)}function inflateRawSync(e,t){return zlibBufferSync(new InflateRaw(t),e)}function zlibBuffer(e,t,n){var i=[],r=0;e.on("error",s),e.on("end",b),e.end(t),a();function a(){for(var E;(E=e.read())!==null;)i.push(E),r+=E.length;e.once("readable",a)}function s(E){e.removeListener("end",b),e.removeListener("readable",a),n(E)}function b(){var E=Buffer.concat(i,r);i=[],n(null,E),e.close()}}function zlibBufferSync(e,t){if(typeof t=="string"&&(t=new Buffer(t)),!Buffer.isBuffer(t))throw new TypeError("Not a string or buffer");var n=binding.Z_FINISH;return e._processChunk(t,n)}function Deflate(e){if(!(this instanceof Deflate))return new Deflate(e);Zlib.call(this,e,binding.DEFLATE)}function Inflate(e){if(!(this instanceof Inflate))return new Inflate(e);Zlib.call(this,e,binding.INFLATE)}function Gzip(e){if(!(this instanceof Gzip))return new Gzip(e);Zlib.call(this,e,binding.GZIP)}function Gunzip(e){if(!(this instanceof Gunzip))return new Gunzip(e);Zlib.call(this,e,binding.GUNZIP)}function DeflateRaw(e){if(!(this instanceof DeflateRaw))return new DeflateRaw(e);Zlib.call(this,e,binding.DEFLATERAW)}function InflateRaw(e){if(!(this instanceof InflateRaw))return new InflateRaw(e);Zlib.call(this,e,binding.INFLATERAW)}function Unzip(e){if(!(this instanceof Unzip))return new Unzip(e);Zlib.call(this,e,binding.UNZIP)}function Zlib(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||binding.Z_DEFAULT_CHUNK,Transform.call(this,e),e.flush&&e.flush!==binding.Z_NO_FLUSH&&e.flush!==binding.Z_PARTIAL_FLUSH&&e.flush!==binding.Z_SYNC_FLUSH&&e.flush!==binding.Z_FULL_FLUSH&&e.flush!==binding.Z_FINISH&&e.flush!==binding.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||binding.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<binding.Z_MIN_CHUNK||e.chunkSize>binding.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<binding.Z_MIN_WINDOWBITS||e.windowBits>binding.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<binding.Z_MIN_LEVEL||e.level>binding.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<binding.Z_MIN_MEMLEVEL||e.memLevel>binding.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=binding.Z_FILTERED&&e.strategy!=binding.Z_HUFFMAN_ONLY&&e.strategy!=binding.Z_RLE&&e.strategy!=binding.Z_FIXED&&e.strategy!=binding.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Buffer.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new binding.Zlib(t);var n=this;this._hadError=!1,this._binding.onerror=function(a,s){n._binding=null,n._hadError=!0;var b=new Error(a);b.errno=s,b.code=binding.codes[s],n.emit("error",b)};var i=binding.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(i=e.level);var r=binding.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(r=e.strategy),this._binding.init(e.windowBits||binding.Z_DEFAULT_WINDOWBITS,i,e.memLevel||binding.Z_DEFAULT_MEMLEVEL,r,e.dictionary),this._buffer=new Buffer(this._chunkSize),this._offset=0,this._closed=!1,this._level=i,this._strategy=r,this.once("end",this.close)}inherits$1(Zlib,Transform);Zlib.prototype.params=function(e,t,n){if(e<binding.Z_MIN_LEVEL||e>binding.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=binding.Z_FILTERED&&t!=binding.Z_HUFFMAN_ONLY&&t!=binding.Z_RLE&&t!=binding.Z_FIXED&&t!=binding.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var i=this;this.flush(binding.Z_SYNC_FLUSH,function(){i._binding.params(e,t),i._hadError||(i._level=e,i._strategy=t,n&&n())})}else browser$1.nextTick(n)};Zlib.prototype.reset=function(){return this._binding.reset()};Zlib.prototype._flush=function(e){this._transform(new Buffer(0),"",e)};Zlib.prototype.flush=function(e,t){var n=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=binding.Z_FULL_FLUSH),n.ended)t&&browser$1.nextTick(t);else if(n.ending)t&&this.once("end",t);else if(n.needDrain){var i=this;this.once("drain",function(){i.flush(t)})}else this._flushFlag=e,this.write(new Buffer(0),"",t)};Zlib.prototype.close=function(e){if(e&&browser$1.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;browser$1.nextTick(function(){t.emit("close")})}};Zlib.prototype._transform=function(e,t,n){var i,r=this._writableState,a=r.ending||r.ended,s=a&&(!e||r.length===e.length);if(!e===null&&!Buffer.isBuffer(e))return n(new Error("invalid input"));s?i=binding.Z_FINISH:(i=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH)),this._processChunk(e,i,n)};Zlib.prototype._processChunk=function(e,t,n){var i=e&&e.length,r=this._chunkSize-this._offset,a=0,s=this,b=typeof n=="function";if(!b){var E=[],l=0,c;this.on("error",function(S){c=S});do var O=this._binding.writeSync(t,e,a,i,this._buffer,this._offset,r);while(!this._hadError&&_(O[0],O[1]));if(this._hadError)throw c;var C=Buffer.concat(E,l);return this.close(),C}var m=this._binding.write(t,e,a,i,this._buffer,this._offset,r);m.buffer=e,m.callback=_;function _(S,d){if(!s._hadError){var T=r-d;if(assert(T>=0,"have should not go down"),T>0){var I=s._buffer.slice(s._offset,s._offset+T);s._offset+=T,b?s.push(I):(E.push(I),l+=I.length)}if((d===0||s._offset>=s._chunkSize)&&(r=s._chunkSize,s._offset=0,s._buffer=new Buffer(s._chunkSize)),d===0){if(a+=i-S,i=S,!b)return!0;var P=s._binding.write(t,e,a,i,s._buffer,s._offset,s._chunkSize);P.callback=_,P.buffer=e;return}if(!b)return!1;n()}}};inherits$1(Deflate,Zlib);inherits$1(Inflate,Zlib);inherits$1(Gzip,Zlib);inherits$1(Gunzip,Zlib);inherits$1(DeflateRaw,Zlib);inherits$1(InflateRaw,Zlib);inherits$1(Unzip,Zlib);var _polyfillNode_zlib={codes,createDeflate,createInflate,createDeflateRaw,createInflateRaw,createGzip,createGunzip,createUnzip,deflate,deflateSync,gzip,gzipSync,deflateRaw,deflateRawSync,unzip,unzipSync,inflate,inflateSync,gunzip,gunzipSync,inflateRaw,inflateRawSync,Deflate,Inflate,Gzip,Gunzip,DeflateRaw,InflateRaw,Unzip,Zlib},_polyfillNode_zlib$1=Object.freeze({__proto__:null,Deflate,DeflateRaw,Gunzip,Gzip,Inflate,InflateRaw,Unzip,Zlib,codes,createDeflate,createDeflateRaw,createGunzip,createGzip,createInflate,createInflateRaw,createUnzip,default:_polyfillNode_zlib,deflate,deflateRaw,deflateRawSync,deflateSync,gunzip,gunzipSync,gzip,gzipSync,inflate,inflateRaw,inflateRawSync,inflateSync,unzip,unzipSync}),require$$5=getAugmentedNamespace(_polyfillNode_zlib$1);(function(module,exports){(function(t,n){module.exports=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var Fe;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=Ee,t.bytesToString=j,t.createValidAbsoluteUrl=Ae,t.getModificationDate=_e,t.getVerbosityLevel=he,t.info=le,t.isArrayBuffer=pe,t.isArrayEqual=Se,t.normalizeUnicode=ye,t.objectFromMap=L,t.objectSize=F,t.setVerbosityLevel=ie,t.shadow=G,t.string32=A,t.stringToBytes=u,t.stringToPDFString=re,t.stringToUTF8String=se,t.unreachable=ve,t.utf8StringToString=fe,t.warn=de;const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=i;const r=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=r;const a=1.35;t.LINE_FACTOR=a;const s=.35;t.LINE_DESCENT_FACTOR=s;const b=s/a;t.BASELINE_FACTOR=b;const E={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=E;const l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=l;const c="pdfjs_internal_editor_";t.AnnotationEditorPrefix=c;const O={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=O;const C={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=C;const m={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=m;const _={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=_;const S={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=S;const d={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=d;const T={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=T;const I={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=I;const P={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=P;const y={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=y;const o={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=o;const p={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=p;const f={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=f;const h={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=h;const w={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=w;const D={O:"PageOpen",C:"PageClose"};t.PageActionEventType=D;const g={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=g;const H={NONE:0,BINARY:1};t.CMapCompressionType=H;const X={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=X;const J={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=J;let ee=g.WARNINGS;function ie(ue){Number.isInteger(ue)&&(ee=ue)}function he(){return ee}function le(ue){ee>=g.INFOS&&console.log(`Info: ${ue}`)}function de(ue){ee>=g.WARNINGS&&console.log(`Warning: ${ue}`)}function ve(ue){throw new Error(ue)}function Ee(ue,B){ue||ve(B)}function Te(ue){switch(ue==null?void 0:ue.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ae(ue,B=null,$=null){if(!ue)return null;try{if($&&typeof ue=="string"){if($.addDefaultProtocol&&ue.startsWith("www.")){const me=ue.match(/\./g);(me==null?void 0:me.length)>=2&&(ue=`http://${ue}`)}if($.tryConvertEncoding)try{ue=se(ue)}catch{}}const ce=B?new URL(ue,B):new URL(ue);if(Te(ce))return ce}catch{}return null}function G(ue,B,$,ce=!1){return Object.defineProperty(ue,B,{value:$,enumerable:!ce,configurable:!0,writable:!1}),$}const x=function(){function B($,ce){this.constructor===B&&ve("Cannot initialize BaseException."),this.message=$,this.name=ce}return B.prototype=new Error,B.constructor=B,B}();t.BaseException=x;class R extends x{constructor(B,$){super(B,"PasswordException"),this.code=$}}t.PasswordException=R;class N extends x{constructor(B,$){super(B,"UnknownErrorException"),this.details=$}}t.UnknownErrorException=N;class Z extends x{constructor(B){super(B,"InvalidPDFException")}}t.InvalidPDFException=Z;class q extends x{constructor(B){super(B,"MissingPDFException")}}t.MissingPDFException=q;class Y extends x{constructor(B,$){super(B,"UnexpectedResponseException"),this.status=$}}t.UnexpectedResponseException=Y;class W extends x{constructor(B){super(B,"FormatError")}}t.FormatError=W;class z extends x{constructor(B){super(B,"AbortException")}}t.AbortException=z;function j(ue){(typeof ue!="object"||(ue==null?void 0:ue.length)===void 0)&&ve("Invalid argument for bytesToString");const B=ue.length,$=8192;if(B<$)return String.fromCharCode.apply(null,ue);const ce=[];for(let me=0;me<B;me+=$){const xe=Math.min(me+$,B),Re=ue.subarray(me,xe);ce.push(String.fromCharCode.apply(null,Re))}return ce.join("")}function u(ue){typeof ue!="string"&&ve("Invalid argument for stringToBytes");const B=ue.length,$=new Uint8Array(B);for(let ce=0;ce<B;++ce)$[ce]=ue.charCodeAt(ce)&255;return $}function A(ue){return String.fromCharCode(ue>>24&255,ue>>16&255,ue>>8&255,ue&255)}function F(ue){return Object.keys(ue).length}function L(ue){const B=Object.create(null);for(const[$,ce]of ue)B[$]=ce;return B}function k(){const ue=new Uint8Array(4);return ue[0]=1,new Uint32Array(ue.buffer,0,1)[0]===1}function U(){try{return new Function(""),!0}catch{return!1}}class Q{static get isLittleEndian(){return G(this,"isLittleEndian",k())}static get isEvalSupported(){return G(this,"isEvalSupported",U())}static get isOffscreenCanvasSupported(){return G(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?G(this,"platform",{isWin:!1,isMac:!1}):G(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}t.FeatureTest=Q;const V=[...Array(256).keys()].map(ue=>ue.toString(16).padStart(2,"0"));class te{static makeHexColor(B,$,ce){return`#${V[B]}${V[$]}${V[ce]}`}static scaleMinMax(B,$){let ce;B[0]?(B[0]<0&&(ce=$[0],$[0]=$[1],$[1]=ce),$[0]*=B[0],$[1]*=B[0],B[3]<0&&(ce=$[2],$[2]=$[3],$[3]=ce),$[2]*=B[3],$[3]*=B[3]):(ce=$[0],$[0]=$[2],$[2]=ce,ce=$[1],$[1]=$[3],$[3]=ce,B[1]<0&&(ce=$[2],$[2]=$[3],$[3]=ce),$[2]*=B[1],$[3]*=B[1],B[2]<0&&(ce=$[0],$[0]=$[1],$[1]=ce),$[0]*=B[2],$[1]*=B[2]),$[0]+=B[4],$[1]+=B[4],$[2]+=B[5],$[3]+=B[5]}static transform(B,$){return[B[0]*$[0]+B[2]*$[1],B[1]*$[0]+B[3]*$[1],B[0]*$[2]+B[2]*$[3],B[1]*$[2]+B[3]*$[3],B[0]*$[4]+B[2]*$[5]+B[4],B[1]*$[4]+B[3]*$[5]+B[5]]}static applyTransform(B,$){const ce=B[0]*$[0]+B[1]*$[2]+$[4],me=B[0]*$[1]+B[1]*$[3]+$[5];return[ce,me]}static applyInverseTransform(B,$){const ce=$[0]*$[3]-$[1]*$[2],me=(B[0]*$[3]-B[1]*$[2]+$[2]*$[5]-$[4]*$[3])/ce,xe=(-B[0]*$[1]+B[1]*$[0]+$[4]*$[1]-$[5]*$[0])/ce;return[me,xe]}static getAxialAlignedBoundingBox(B,$){const ce=te.applyTransform(B,$),me=te.applyTransform(B.slice(2,4),$),xe=te.applyTransform([B[0],B[3]],$),Re=te.applyTransform([B[2],B[1]],$);return[Math.min(ce[0],me[0],xe[0],Re[0]),Math.min(ce[1],me[1],xe[1],Re[1]),Math.max(ce[0],me[0],xe[0],Re[0]),Math.max(ce[1],me[1],xe[1],Re[1])]}static inverseTransform(B){const $=B[0]*B[3]-B[1]*B[2];return[B[3]/$,-B[1]/$,-B[2]/$,B[0]/$,(B[2]*B[5]-B[4]*B[3])/$,(B[4]*B[1]-B[5]*B[0])/$]}static singularValueDecompose2dScale(B){const $=[B[0],B[2],B[1],B[3]],ce=B[0]*$[0]+B[1]*$[2],me=B[0]*$[1]+B[1]*$[3],xe=B[2]*$[0]+B[3]*$[2],Re=B[2]*$[1]+B[3]*$[3],Me=(ce+Re)/2,ke=Math.sqrt((ce+Re)**2-4*(ce*Re-xe*me))/2,Ie=Me+ke||1,Ce=Me-ke||1;return[Math.sqrt(Ie),Math.sqrt(Ce)]}static normalizeRect(B){const $=B.slice(0);return B[0]>B[2]&&($[0]=B[2],$[2]=B[0]),B[1]>B[3]&&($[1]=B[3],$[3]=B[1]),$}static intersect(B,$){const ce=Math.max(Math.min(B[0],B[2]),Math.min($[0],$[2])),me=Math.min(Math.max(B[0],B[2]),Math.max($[0],$[2]));if(ce>me)return null;const xe=Math.max(Math.min(B[1],B[3]),Math.min($[1],$[3])),Re=Math.min(Math.max(B[1],B[3]),Math.max($[1],$[3]));return xe>Re?null:[ce,xe,me,Re]}static bezierBoundingBox(B,$,ce,me,xe,Re,Me,ke){const Ie=[],Ce=[[],[]];let Ne,Oe,Le,Pe,$e,He,ze,qe;for(let Xe=0;Xe<2;++Xe){if(Xe===0?(Oe=6*B-12*ce+6*xe,Ne=-3*B+9*ce-9*xe+3*Me,Le=3*ce-3*B):(Oe=6*$-12*me+6*Re,Ne=-3*$+9*me-9*Re+3*ke,Le=3*me-3*$),Math.abs(Ne)<1e-12){if(Math.abs(Oe)<1e-12)continue;Pe=-Le/Oe,0<Pe&&Pe<1&&Ie.push(Pe);continue}ze=Oe*Oe-4*Le*Ne,qe=Math.sqrt(ze),!(ze<0)&&($e=(-Oe+qe)/(2*Ne),0<$e&&$e<1&&Ie.push($e),He=(-Oe-qe)/(2*Ne),0<He&&He<1&&Ie.push(He))}let Be=Ie.length,Ue;const We=Be;for(;Be--;)Pe=Ie[Be],Ue=1-Pe,Ce[0][Be]=Ue*Ue*Ue*B+3*Ue*Ue*Pe*ce+3*Ue*Pe*Pe*xe+Pe*Pe*Pe*Me,Ce[1][Be]=Ue*Ue*Ue*$+3*Ue*Ue*Pe*me+3*Ue*Pe*Pe*Re+Pe*Pe*Pe*ke;return Ce[0][We]=B,Ce[1][We]=$,Ce[0][We+1]=Me,Ce[1][We+1]=ke,Ce[0].length=Ce[1].length=We+2,[Math.min(...Ce[0]),Math.min(...Ce[1]),Math.max(...Ce[0]),Math.max(...Ce[1])]}}t.Util=te;const ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function re(ue){if(ue[0]>=""){let $;if(ue[0]===""&&ue[1]===""?$="utf-16be":ue[0]===""&&ue[1]===""?$="utf-16le":ue[0]===""&&ue[1]===""&&ue[2]===""&&($="utf-8"),$)try{const ce=new TextDecoder($,{fatal:!0}),me=u(ue);return ce.decode(me)}catch(ce){de(`stringToPDFString: "${ce}".`)}}const B=[];for(let $=0,ce=ue.length;$<ce;$++){const me=ae[ue.charCodeAt($)];B.push(me?String.fromCharCode(me):ue.charAt($))}return B.join("")}function se(ue){return decodeURIComponent(escape(ue))}function fe(ue){return unescape(encodeURIComponent(ue))}function pe(ue){return typeof ue=="object"&&(ue==null?void 0:ue.byteLength)!==void 0}function Se(ue,B){if(ue.length!==B.length)return!1;for(let $=0,ce=ue.length;$<ce;$++)if(ue[$]!==B[$])return!1;return!0}function _e(ue=new Date){return[ue.getUTCFullYear().toString(),(ue.getUTCMonth()+1).toString().padStart(2,"0"),ue.getUTCDate().toString().padStart(2,"0"),ue.getUTCHours().toString().padStart(2,"0"),ue.getUTCMinutes().toString().padStart(2,"0"),ue.getUTCSeconds().toString().padStart(2,"0")].join("")}class we{constructor(){ne(this,Fe,!1);this.promise=new Promise((B,$)=>{this.resolve=ce=>{ge(this,Fe,!0),B(ce)},this.reject=ce=>{ge(this,Fe,!0),$(ce)}})}get settled(){return M(this,Fe)}}Fe=new WeakMap,t.PromiseCapability=we;let K=null,be=null;function ye(ue){return K||(K=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,be=new Map([["","t"]])),ue.replaceAll(K,(B,$,ce)=>$?$.normalize("NFKC"):be.get(ce))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,n,i,r,Ke,s,st,E,l,c,O,C,m,_,S,ft,T,I,pt,y,o;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:f,NodeCMapReaderFactory:h,NodeFilterFactory:w,NodeStandardFontDataFactory:D}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=f,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=h,exports.DefaultFilterFactory=DefaultFilterFactory=w,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=D}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:f}=__w_pdfjs_require__(21);createPDFNetworkStream=h=>new f(h)}else{const{PDFNetworkStream:f}=__w_pdfjs_require__(24),{PDFFetchStream:h}=__w_pdfjs_require__(25);createPDFNetworkStream=w=>(0,_display_utils.isValidFetchUrl)(w.url)?new h(w):new f(w)}function getDocument(f){if(typeof f=="string"||f instanceof URL?f={url:f}:(0,_util.isArrayBuffer)(f)&&(f={data:f}),typeof f!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!f.url&&!f.data&&!f.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const h=new PDFDocumentLoadingTask,{docId:w}=h,D=f.url?getUrlProp(f.url):null,g=f.data?getDataProp(f.data):null,H=f.httpHeaders||null,X=f.withCredentials===!0,J=f.password??null,ee=f.range instanceof PDFDataRangeTransport?f.range:null,ie=Number.isInteger(f.rangeChunkSize)&&f.rangeChunkSize>0?f.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let he=f.worker instanceof PDFWorker?f.worker:null;const le=f.verbosity,de=typeof f.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(f.docBaseUrl)?f.docBaseUrl:null,ve=typeof f.cMapUrl=="string"?f.cMapUrl:null,Ee=f.cMapPacked!==!1,Te=f.CMapReaderFactory||DefaultCMapReaderFactory,Ae=typeof f.standardFontDataUrl=="string"?f.standardFontDataUrl:null,G=f.StandardFontDataFactory||DefaultStandardFontDataFactory,x=f.stopAtErrors!==!0,R=Number.isInteger(f.maxImageSize)&&f.maxImageSize>-1?f.maxImageSize:-1,N=f.isEvalSupported!==!1,Z=typeof f.isOffscreenCanvasSupported=="boolean"?f.isOffscreenCanvasSupported:!_is_node.isNodeJS,q=Number.isInteger(f.canvasMaxAreaInBytes)?f.canvasMaxAreaInBytes:-1,Y=typeof f.disableFontFace=="boolean"?f.disableFontFace:_is_node.isNodeJS,W=f.fontExtraProperties===!0,z=f.enableXfa===!0,j=f.ownerDocument||globalThis.document,u=f.disableRange===!0,A=f.disableStream===!0,F=f.disableAutoFetch===!0,L=f.pdfBug===!0,k=ee?ee.length:f.length??NaN,U=typeof f.useSystemFonts=="boolean"?f.useSystemFonts:!_is_node.isNodeJS&&!Y,Q=typeof f.useWorkerFetch=="boolean"?f.useWorkerFetch:Te===_display_utils.DOMCMapReaderFactory&&G===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(ve,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Ae,document.baseURI),V=f.canvasFactory||new DefaultCanvasFactory({ownerDocument:j}),te=f.filterFactory||new DefaultFilterFactory({docId:w,ownerDocument:j}),ae=null;(0,_util.setVerbosityLevel)(le);const re={canvasFactory:V,filterFactory:te};if(Q||(re.cMapReaderFactory=new Te({baseUrl:ve,isCompressed:Ee}),re.standardFontDataFactory=new G({baseUrl:Ae})),!he){const pe={verbosity:le,port:_worker_options.GlobalWorkerOptions.workerPort};he=pe.port?PDFWorker.fromPort(pe):new PDFWorker(pe),h._worker=he}const se={docId:w,apiVersion:"3.6.172",data:g,password:J,disableAutoFetch:F,rangeChunkSize:ie,length:k,docBaseUrl:de,enableXfa:z,evaluatorOptions:{maxImageSize:R,disableFontFace:Y,ignoreErrors:x,isEvalSupported:N,isOffscreenCanvasSupported:Z,canvasMaxAreaInBytes:q,fontExtraProperties:W,useSystemFonts:U,cMapUrl:Q?ve:null,standardFontDataUrl:Q?Ae:null}},fe={ignoreErrors:x,isEvalSupported:N,disableFontFace:Y,fontExtraProperties:W,enableXfa:z,ownerDocument:j,disableAutoFetch:F,pdfBug:L,styleElement:ae};return he.promise.then(function(){if(h.destroyed)throw new Error("Loading aborted");const pe=_fetchDocument(he,se),Se=new Promise(function(_e){let we;ee?we=new _transport_stream.PDFDataTransportStream({length:k,initialData:ee.initialData,progressiveDone:ee.progressiveDone,contentDispositionFilename:ee.contentDispositionFilename,disableRange:u,disableStream:A},ee):g||(we=createPDFNetworkStream({url:D,length:k,httpHeaders:H,withCredentials:X,rangeChunkSize:ie,disableRange:u,disableStream:A})),_e(we)});return Promise.all([pe,Se]).then(function([_e,we]){if(h.destroyed)throw new Error("Loading aborted");const K=new _message_handler.MessageHandler(w,_e,he.port),be=new WorkerTransport(K,h,we,fe,re);h._transport=be,K.send("Ready",null)})}).catch(h._capability.reject),h}async function _fetchDocument(f,h){if(f.destroyed)throw new Error("Worker was destroyed");const w=await f.messageHandler.sendWithPromise("GetDocRequest",h,h.data?[h.data.buffer]:null);if(f.destroyed)throw new Error("Worker was destroyed");return w}function getUrlProp(f){if(f instanceof URL)return f.href;try{return new URL(f,window.location).href}catch{if(_is_node.isNodeJS&&typeof f=="string")return f}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(f){if(_is_node.isNodeJS&&typeof Buffer<"u"&&f instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(f);if(f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength)return f;if(typeof f=="string")return(0,_util.stringToBytes)(f);if(typeof f=="object"&&!isNaN(f==null?void 0:f.length)||(0,_util.isArrayBuffer)(f))return new Uint8Array(f);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${at(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var h;this.destroyed=!0,await((h=this._transport)==null?void 0:h.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,ne(t,e,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(h,w,D=!1,g=null){this.length=h,this.initialData=w,this.progressiveDone=D,this.contentDispositionFilename=g,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(h){this._rangeListeners.push(h)}addProgressListener(h){this._progressListeners.push(h)}addProgressiveReadListener(h){this._progressiveReadListeners.push(h)}addProgressiveDoneListener(h){this._progressiveDoneListeners.push(h)}onDataRange(h,w){for(const D of this._rangeListeners)D(h,w)}onDataProgress(h,w){this._readyCapability.promise.then(()=>{for(const D of this._progressListeners)D(h,w)})}onDataProgressiveRead(h){this._readyCapability.promise.then(()=>{for(const w of this._progressiveReadListeners)w(h)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const h of this._progressiveDoneListeners)h()})}transportReady(){this._readyCapability.resolve()}requestDataRange(h,w){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(h,w){this._pdfInfo=h,this._transport=w}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(h){return this._transport.getPage(h)}getPageIndex(h){return this._transport.getPageIndex(h)}getDestinations(){return this._transport.getDestinations()}getDestination(h){return this._transport.getDestination(h)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(h=!1){return this._transport.startCleanup(h||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(h,w,D,g=!1){ne(this,r);ne(this,s);ne(this,n,null);ne(this,i,!1);this._pageIndex=h,this._pageInfo=w,this._transport=D,this._stats=g?new _display_utils.StatTimer:null,this._pdfBug=g,this.commonObjs=D.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:h,rotation:w=this.rotate,offsetX:D=0,offsetY:g=0,dontFlip:H=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:h,rotation:w,offsetX:D,offsetY:g,dontFlip:H})}getAnnotations({intent:h="display"}={}){const w=this._transport.getRenderingIntent(h);return this._transport.getAnnotations(this._pageIndex,w.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var h;return((h=this._transport._htmlForXfa)==null?void 0:h.children[this._pageIndex])||null}render({canvasContext:h,viewport:w,intent:D="display",annotationMode:g=_util.AnnotationMode.ENABLE,transform:H=null,background:X=null,optionalContentConfigPromise:J=null,annotationCanvasMap:ee=null,pageColors:ie=null,printAnnotationStorage:he=null}){var G,x,R;if((G=arguments[0])!=null&&G.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(x=this._stats)==null||x.time("Overall");const le=this._transport.getRenderingIntent(D,g,he);ge(this,i,!1),oe(this,s,st).call(this),J||(J=this._transport.getOptionalContentConfig());let de=this._intentStates.get(le.cacheKey);de||(de=Object.create(null),this._intentStates.set(le.cacheKey,de)),de.streamReaderCancelTimeout&&(clearTimeout(de.streamReaderCancelTimeout),de.streamReaderCancelTimeout=null);const ve=!!(le.renderingIntent&_util.RenderingIntentFlag.PRINT);de.displayReadyCapability||(de.displayReadyCapability=new _util.PromiseCapability,de.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(le));const Ee=N=>{var Z,q;de.renderTasks.delete(Te),(this._maybeCleanupAfterRender||ve)&&ge(this,i,!0),oe(this,r,Ke).call(this,!ve),N?(Te.capability.reject(N),this._abortOperatorList({intentState:de,reason:N instanceof Error?N:new Error(N)})):Te.capability.resolve(),(Z=this._stats)==null||Z.timeEnd("Rendering"),(q=this._stats)==null||q.timeEnd("Overall")},Te=new InternalRenderTask({callback:Ee,params:{canvasContext:h,viewport:w,transform:H,background:X},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ee,operatorList:de.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ve,pdfBug:this._pdfBug,pageColors:ie});(de.renderTasks||(de.renderTasks=new Set)).add(Te);const Ae=Te.task;return Promise.all([de.displayReadyCapability.promise,J]).then(([N,Z])=>{var q;if(M(this,i)){Ee();return}(q=this._stats)==null||q.time("Rendering"),Te.initializeGraphics({transparency:N,optionalContentConfig:Z}),Te.operatorListChanged()}).catch(Ee),Ae}getOperatorList({intent:h="display",annotationMode:w=_util.AnnotationMode.ENABLE,printAnnotationStorage:D=null}={}){var ee;function g(){X.operatorList.lastChunk&&(X.opListReadCapability.resolve(X.operatorList),X.renderTasks.delete(J))}const H=this._transport.getRenderingIntent(h,w,D,!0);let X=this._intentStates.get(H.cacheKey);X||(X=Object.create(null),this._intentStates.set(H.cacheKey,X));let J;return X.opListReadCapability||(J=Object.create(null),J.operatorListChanged=g,X.opListReadCapability=new _util.PromiseCapability,(X.renderTasks||(X.renderTasks=new Set)).add(J),X.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ee=this._stats)==null||ee.time("Page Request"),this._pumpOperatorList(H)),X.opListReadCapability.promise}streamTextContent({includeMarkedContent:h=!1,disableNormalization:w=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:h===!0,disableNormalization:w===!0},{highWaterMark:100,size(g){return g.items.length}})}getTextContent(h={}){if(this._transport._htmlForXfa)return this.getXfa().then(D=>_xfa_text.XfaText.textContent(D));const w=this.streamTextContent(h);return new Promise(function(D,g){function H(){X.read().then(function({value:ee,done:ie}){if(ie){D(J);return}Object.assign(J.styles,ee.styles),J.items.push(...ee.items),H()},g)}const X=w.getReader(),J={items:[],styles:Object.create(null)};H()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const h=[];for(const w of this._intentStates.values())if(this._abortOperatorList({intentState:w,reason:new Error("Page was destroyed."),force:!0}),!w.opListReadCapability)for(const D of w.renderTasks)h.push(D.completed),D.cancel();return this.objs.clear(),ge(this,i,!1),oe(this,s,st).call(this),Promise.all(h)}cleanup(h=!1){ge(this,i,!0);const w=oe(this,r,Ke).call(this,!1);return h&&w&&this._stats&&(this._stats=new _display_utils.StatTimer),w}_startRenderPage(h,w){var g,H;const D=this._intentStates.get(w);D&&((g=this._stats)==null||g.timeEnd("Page Request"),(H=D.displayReadyCapability)==null||H.resolve(h))}_renderPageChunk(h,w){for(let D=0,g=h.length;D<g;D++)w.operatorList.fnArray.push(h.fnArray[D]),w.operatorList.argsArray.push(h.argsArray[D]);w.operatorList.lastChunk=h.lastChunk,w.operatorList.separateAnnots=h.separateAnnots;for(const D of w.renderTasks)D.operatorListChanged();h.lastChunk&&oe(this,r,Ke).call(this,!0)}_pumpOperatorList({renderingIntent:h,cacheKey:w,annotationStorageMap:D}){const H=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:h,cacheKey:w,annotationStorage:D}).getReader(),X=this._intentStates.get(w);X.streamReader=H;const J=()=>{H.read().then(({value:ee,done:ie})=>{if(ie){X.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(ee,X),J())},ee=>{if(X.streamReader=null,!this._transport.destroyed){if(X.operatorList){X.operatorList.lastChunk=!0;for(const ie of X.renderTasks)ie.operatorListChanged();oe(this,r,Ke).call(this,!0)}if(X.displayReadyCapability)X.displayReadyCapability.reject(ee);else if(X.opListReadCapability)X.opListReadCapability.reject(ee);else throw ee}})};J()}_abortOperatorList({intentState:h,reason:w,force:D=!1}){if(h.streamReader){if(h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null),!D){if(h.renderTasks.size>0)return;if(w instanceof _display_utils.RenderingCancelledException){let g=RENDERING_CANCELLED_TIMEOUT;w.extraDelay>0&&w.extraDelay<1e3&&(g+=w.extraDelay),h.streamReaderCancelTimeout=setTimeout(()=>{h.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:h,reason:w,force:!0})},g);return}}if(h.streamReader.cancel(new _util.AbortException(w.message)).catch(()=>{}),h.streamReader=null,!this._transport.destroyed){for(const[g,H]of this._intentStates)if(H===h){this._intentStates.delete(g);break}this.cleanup()}}}get stats(){return this._stats}}n=new WeakMap,i=new WeakMap,r=new WeakSet,Ke=function(h=!1){if(oe(this,s,st).call(this),!M(this,i))return!1;if(h)return ge(this,n,setTimeout(()=>{ge(this,n,null),oe(this,r,Ke).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:w,operatorList:D}of this._intentStates.values())if(w.size>0||!D.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ge(this,i,!1),!0},s=new WeakSet,st=function(){M(this,n)&&(clearTimeout(M(this,n)),ge(this,n,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){ne(this,E,new Set);ne(this,l,Promise.resolve())}postMessage(h,w){const D={data:structuredClone(h,w?{transfer:w}:null)};M(this,l).then(()=>{for(const g of M(this,E))g.call(this,D)})}addEventListener(h,w){M(this,E).add(w)}removeEventListener(h,w){M(this,E).delete(w)}terminate(){M(this,E).clear()}}E=new WeakMap,l=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire$1=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const f=(c=document==null?void 0:document.currentScript)==null?void 0:c.src;f&&(PDFWorkerUtil.fallbackWorkerSrc=f.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(f,h){let w;try{if(w=new URL(f),!w.origin||w.origin==="null")return!1}catch{return!1}const D=new URL(h,w);return w.origin===D.origin},PDFWorkerUtil.createCDNWrapper=function(f){const h=`importScripts("${f}");`;return URL.createObjectURL(new Blob([h]))}}const _PDFWorker=class _PDFWorker{constructor({name:f=null,port:h=null,verbosity:w=(0,_util.getVerbosityLevel)()}={}){if(h&&M(_PDFWorker,O).has(h))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=f,this.destroyed=!1,this.verbosity=w,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,h){M(_PDFWorker,O).set(h,this),this._initializeFromPort(h);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(f){this._port=f,this._messageHandler=new _message_handler.MessageHandler("main","worker",f),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:f}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,f)||(f=PDFWorkerUtil.createCDNWrapper(new URL(f,window.location).href));const h=new Worker(f),w=new _message_handler.MessageHandler("main","worker",h),D=()=>{h.removeEventListener("error",g),w.destroy(),h.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},g=()=>{this._webWorker||D()};h.addEventListener("error",g),w.on("test",X=>{if(h.removeEventListener("error",g),this.destroyed){D();return}X?(this._messageHandler=w,this._port=h,this._webWorker=h,this._readyCapability.resolve(),w.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),w.destroy(),h.terminate())}),w.on("ready",X=>{if(h.removeEventListener("error",g),this.destroyed){D();return}try{H()}catch{this._setupFakeWorker()}});const H=()=>{const X=new Uint8Array;w.send("test",X,[X.buffer])};H();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(f=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const h=new LoopbackPort;this._port=h;const w=`fake${PDFWorkerUtil.fakeWorkerId++}`,D=new _message_handler.MessageHandler(w+"_worker",w,h);f.setup(D,h);const g=new _message_handler.MessageHandler(w,w+"_worker",h);this._messageHandler=g,this._readyCapability.resolve(),g.send("configure",{verbosity:this.verbosity})}).catch(f=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${f.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),M(_PDFWorker,O).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(f){if(!(f!=null&&f.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return M(this,O).has(f.port)?M(this,O).get(f.port):new _PDFWorker(f)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var f;try{return((f=globalThis.pdfjsWorker)==null?void 0:f.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire$1=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};O=new WeakMap,ne(_PDFWorker,O,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(h,w,D,g,H){ne(this,S);ne(this,C,new Map);ne(this,m,new Map);ne(this,_,new Map);this.messageHandler=h,this.loadingTask=w,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:g.ownerDocument,styleElement:g.styleElement}),this._params=g,this.canvasFactory=H.canvasFactory,this.filterFactory=H.filterFactory,this.cMapReaderFactory=H.cMapReaderFactory,this.standardFontDataFactory=H.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=D,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(h,w=_util.AnnotationMode.ENABLE,D=null,g=!1){let H=_util.RenderingIntentFlag.DISPLAY,X=null;switch(h){case"any":H=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":H=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${h}`)}switch(w){case _util.AnnotationMode.DISABLE:H+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:H+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:H+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,X=(H&_util.RenderingIntentFlag.PRINT&&D instanceof _annotation_storage.PrintAnnotationStorage?D:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${w}`)}return g&&(H+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:H,cacheKey:`${H}_${_annotation_storage.AnnotationStorage.getHash(X)}`,annotationStorageMap:X}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const h=[];for(const D of M(this,m).values())h.push(D._destroy());M(this,m).clear(),M(this,_).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const w=this.messageHandler.sendWithPromise("Terminate",null);return h.push(w),Promise.all(h).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),M(this,C).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:h,loadingTask:w}=this;h.on("GetReader",(D,g)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=H=>{this._lastProgress={loaded:H.loaded,total:H.total}},g.onPull=()=>{this._fullReader.read().then(function({value:H,done:X}){if(X){g.close();return}(0,_util.assert)(H instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),g.enqueue(new Uint8Array(H),1,[H])}).catch(H=>{g.error(H)})},g.onCancel=H=>{this._fullReader.cancel(H),g.ready.catch(X=>{if(!this.destroyed)throw X})}}),h.on("ReaderHeadersReady",D=>{const g=new _util.PromiseCapability,H=this._fullReader;return H.headersReady.then(()=>{var X;(!H.isStreamingSupported||!H.isRangeSupported)&&(this._lastProgress&&((X=w.onProgress)==null||X.call(w,this._lastProgress)),H.onProgress=J=>{var ee;(ee=w.onProgress)==null||ee.call(w,{loaded:J.loaded,total:J.total})}),g.resolve({isStreamingSupported:H.isStreamingSupported,isRangeSupported:H.isRangeSupported,contentLength:H.contentLength})},g.reject),g.promise}),h.on("GetRangeReader",(D,g)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const H=this._networkStream.getRangeReader(D.begin,D.end);if(!H){g.close();return}g.onPull=()=>{H.read().then(function({value:X,done:J}){if(J){g.close();return}(0,_util.assert)(X instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),g.enqueue(new Uint8Array(X),1,[X])}).catch(X=>{g.error(X)})},g.onCancel=X=>{H.cancel(X),g.ready.catch(J=>{if(!this.destroyed)throw J})}}),h.on("GetDoc",({pdfInfo:D})=>{this._numPages=D.numPages,this._htmlForXfa=D.htmlForXfa,delete D.htmlForXfa,w._capability.resolve(new PDFDocumentProxy(D,this))}),h.on("DocException",function(D){let g;switch(D.name){case"PasswordException":g=new _util.PasswordException(D.message,D.code);break;case"InvalidPDFException":g=new _util.InvalidPDFException(D.message);break;case"MissingPDFException":g=new _util.MissingPDFException(D.message);break;case"UnexpectedResponseException":g=new _util.UnexpectedResponseException(D.message,D.status);break;case"UnknownErrorException":g=new _util.UnknownErrorException(D.message,D.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}w._capability.reject(g)}),h.on("PasswordRequest",D=>{if(this._passwordCapability=new _util.PromiseCapability,w.onPassword){const g=H=>{H instanceof Error?this._passwordCapability.reject(H):this._passwordCapability.resolve({password:H})};try{w.onPassword(g,D.code)}catch(H){this._passwordCapability.reject(H)}}else this._passwordCapability.reject(new _util.PasswordException(D.message,D.code));return this._passwordCapability.promise}),h.on("DataLoaded",D=>{var g;(g=w.onProgress)==null||g.call(w,{loaded:D.length,total:D.length}),this.downloadInfoCapability.resolve(D)}),h.on("StartRenderPage",D=>{if(this.destroyed)return;M(this,m).get(D.pageIndex)._startRenderPage(D.transparency,D.cacheKey)}),h.on("commonobj",([D,g,H])=>{var X;if(!this.destroyed&&!this.commonObjs.has(D))switch(g){case"Font":const J=this._params;if("error"in H){const he=H.error;(0,_util.warn)(`Error during font loading: ${he}`),this.commonObjs.resolve(D,he);break}const ee=J.pdfBug&&((X=globalThis.FontInspector)!=null&&X.enabled)?(he,le)=>globalThis.FontInspector.fontAdded(he,le):null,ie=new _font_loader.FontFaceObject(H,{isEvalSupported:J.isEvalSupported,disableFontFace:J.disableFontFace,ignoreErrors:J.ignoreErrors,inspectFont:ee});this.fontLoader.bind(ie).catch(he=>h.sendWithPromise("FontFallback",{id:D})).finally(()=>{!J.fontExtraProperties&&ie.data&&(ie.data=null),this.commonObjs.resolve(D,ie)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(D,H);break;default:throw new Error(`Got unknown common object type ${g}`)}}),h.on("obj",([D,g,H,X])=>{var ee;if(this.destroyed)return;const J=M(this,m).get(g);if(!J.objs.has(D))switch(H){case"Image":if(J.objs.resolve(D,X),X){let ie;if(X.bitmap){const{width:he,height:le}=X;ie=he*le*4}else ie=((ee=X.data)==null?void 0:ee.length)||0;ie>_util.MAX_IMAGE_SIZE_TO_CACHE&&(J._maybeCleanupAfterRender=!0)}break;case"Pattern":J.objs.resolve(D,X);break;default:throw new Error(`Got unknown object type ${H}`)}}),h.on("DocProgress",D=>{var g;this.destroyed||(g=w.onProgress)==null||g.call(w,{loaded:D.loaded,total:D.total})}),h.on("FetchBuiltInCMap",D=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(D):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),h.on("FetchStandardFontData",D=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(D):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var h;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((h=this._fullReader)==null?void 0:h.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(h){if(!Number.isInteger(h)||h<=0||h>this._numPages)return Promise.reject(new Error("Invalid page request."));const w=h-1,D=M(this,_).get(w);if(D)return D;const g=this.messageHandler.sendWithPromise("GetPage",{pageIndex:w}).then(H=>{if(this.destroyed)throw new Error("Transport destroyed");const X=new PDFPageProxy(w,H,this,this._params.pdfBug);return M(this,m).set(w,X),X});return M(this,_).set(w,g),g}getPageIndex(h){return typeof h!="object"||h===null||!Number.isInteger(h.num)||h.num<0||!Number.isInteger(h.gen)||h.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:h.num,gen:h.gen})}getAnnotations(h,w){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:h,intent:w})}getFieldObjects(){return oe(this,S,ft).call(this,"GetFieldObjects")}hasJSActions(){return oe(this,S,ft).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(h){return typeof h!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:h})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(h){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:h})}getStructTree(h){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:h})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(h=>new _optional_content_config.OptionalContentConfig(h))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const h="GetMetadata",w=M(this,C).get(h);if(w)return w;const D=this.messageHandler.sendWithPromise(h,null).then(g=>{var H,X;return{info:g[0],metadata:g[1]?new _metadata.Metadata(g[1]):null,contentDispositionFilename:((H=this._fullReader)==null?void 0:H.filename)??null,contentLength:((X=this._fullReader)==null?void 0:X.contentLength)??null}});return M(this,C).set(h,D),D}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(h=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const w of M(this,m).values())if(!w.cleanup())throw new Error(`startCleanup: Page ${w.pageNumber} is currently rendering.`);this.commonObjs.clear(),h||this.fontLoader.clear(),M(this,C).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:h,enableXfa:w}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:h,enableXfa:w})}}C=new WeakMap,m=new WeakMap,_=new WeakMap,S=new WeakSet,ft=function(h,w=null){const D=M(this,C).get(h);if(D)return D;const g=this.messageHandler.sendWithPromise(h,w);return M(this,C).set(h,g),g};class PDFObjects{constructor(){ne(this,I);ne(this,T,Object.create(null))}get(h,w=null){if(w){const g=oe(this,I,pt).call(this,h);return g.capability.promise.then(()=>w(g.data)),null}const D=M(this,T)[h];if(!(D!=null&&D.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${h}.`);return D.data}has(h){const w=M(this,T)[h];return(w==null?void 0:w.capability.settled)||!1}resolve(h,w=null){const D=oe(this,I,pt).call(this,h);D.data=w,D.capability.resolve()}clear(){var h;for(const w in M(this,T)){const{data:D}=M(this,T)[w];(h=D==null?void 0:D.bitmap)==null||h.close()}ge(this,T,Object.create(null))}}T=new WeakMap,I=new WeakSet,pt=function(h){const w=M(this,T)[h];return w||(M(this,T)[h]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(h){ne(this,y,null);ge(this,y,h),this.onContinue=null}get promise(){return M(this,y).capability.promise}cancel(h=0){M(this,y).cancel(null,h)}get separateAnnots(){const{separateAnnots:h}=M(this,y).operatorList;if(!h)return!1;const{annotationCanvasMap:w}=M(this,y);return h.form||h.canvas&&(w==null?void 0:w.size)>0}}y=new WeakMap,exports.RenderTask=RenderTask;const p=class p{constructor({callback:h,params:w,objs:D,commonObjs:g,annotationCanvasMap:H,operatorList:X,pageIndex:J,canvasFactory:ee,filterFactory:ie,useRequestAnimationFrame:he=!1,pdfBug:le=!1,pageColors:de=null}){this.callback=h,this.params=w,this.objs=D,this.commonObjs=g,this.annotationCanvasMap=H,this.operatorListIdx=null,this.operatorList=X,this._pageIndex=J,this.canvasFactory=ee,this.filterFactory=ie,this._pdfBug=le,this.pageColors=de,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=he===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=w.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:h=!1,optionalContentConfig:w}){var J,ee;if(this.cancelled)return;if(this._canvas){if(M(p,o).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");M(p,o).add(this._canvas)}this._pdfBug&&((J=globalThis.StepperManager)!=null&&J.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:D,viewport:g,transform:H,background:X}=this.params;this.gfx=new _canvas.CanvasGraphics(D,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:w},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:H,viewport:g,transparency:h,background:X}),this.operatorListIdx=0,this.graphicsReady=!0,(ee=this.graphicsReadyCallback)==null||ee.call(this)}cancel(h=null,w=0){var D;this.running=!1,this.cancelled=!0,(D=this.gfx)==null||D.endDrawing(),this._canvas&&M(p,o).delete(this._canvas),this.callback(h||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",w))}operatorListChanged(){var h;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(h=this.stepper)==null||h.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&M(p,o).delete(this._canvas),this.callback())))}};o=new WeakMap,ne(p,o,new WeakSet);let InternalRenderTask=p;const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(e,t,n)=>{var E,l,c,Dt,C;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var i=n(1),r=n(4),a=n(8);class s{constructor(){ne(this,c);ne(this,E,!1);ne(this,l,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(_,S){const d=M(this,l).get(_);return d===void 0?S:Object.assign(S,d)}getRawValue(_){return M(this,l).get(_)}remove(_){if(M(this,l).delete(_),M(this,l).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const S of M(this,l).values())if(S instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(_,S){const d=M(this,l).get(_);let T=!1;if(d!==void 0)for(const[I,P]of Object.entries(S))d[I]!==P&&(T=!0,d[I]=P);else T=!0,M(this,l).set(_,S);T&&oe(this,c,Dt).call(this),S instanceof r.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(S.constructor._type)}has(_){return M(this,l).has(_)}getAll(){return M(this,l).size>0?(0,i.objectFromMap)(M(this,l)):null}setAll(_){for(const[S,d]of Object.entries(_))this.setValue(S,d)}get size(){return M(this,l).size}resetModified(){M(this,E)&&(ge(this,E,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new b(this)}get serializable(){if(M(this,l).size===0)return null;const _=new Map;for(const[S,d]of M(this,l)){const T=d instanceof r.AnnotationEditor?d.serialize():d;T&&_.set(S,T)}return _}static getHash(_){if(!_)return"";const S=new a.MurmurHash3_64;for(const[d,T]of _)S.update(`${d}:${JSON.stringify(T)}`);return S.hexdigest()}}E=new WeakMap,l=new WeakMap,c=new WeakSet,Dt=function(){M(this,E)||(ge(this,E,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=s;class b extends s{constructor(S){super();ne(this,C,null);ge(this,C,structuredClone(S.serializable))}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return M(this,C)}}C=new WeakMap,t.PrintAnnotationStorage=b},(e,t,n)=>{var s,b,E,l,c,O;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var i=n(5),r=n(1);const C=class C{constructor(_){ne(this,s,this.focusin.bind(this));ne(this,b,this.focusout.bind(this));ne(this,E,!1);ne(this,l,!1);ne(this,c,!1);De(this,"_uiManager",null);ne(this,O,C._zIndex++);this.constructor===C&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=_.parent,this.id=_.id,this.width=this.height=null,this.pageIndex=_.parent.pageIndex,this.name=_.name,this.div=null,this._uiManager=_.uiManager;const{rotation:S,rawDims:{pageWidth:d,pageHeight:T,pageX:I,pageY:P}}=this.parent.viewport;this.rotation=S,this.pageRotation=(360+S-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[d,T],this.pageTranslation=[I,P];const[y,o]=this.parentDimensions;this.x=_.x/y,this.y=_.y/o,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(_){this._uiManager.addCommands(_)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=M(this,O)}setParent(_){_!==null&&(this.pageIndex=_.pageIndex,this.pageDimensions=_.pageDimensions),this.parent=_}focusin(_){M(this,E)?ge(this,E,!1):this.parent.setSelected(this)}focusout(_){var d;if(!this.isAttachedToDOM)return;const S=_.relatedTarget;S!=null&&S.closest(`#${this.id}`)||(_.preventDefault(),(d=this.parent)!=null&&d.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(_){const S=this.parent.div.getBoundingClientRect();this.startX=_.clientX-S.x,this.startY=_.clientY-S.y,_.dataTransfer.setData("text/plain",this.id),_.dataTransfer.effectAllowed="move"}setAt(_,S,d,T){const[I,P]=this.parentDimensions;[d,T]=this.screenToPageTranslation(d,T),this.x=(_+d)/I,this.y=(S+T)/P,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(_,S){const[d,T]=this.parentDimensions;[_,S]=this.screenToPageTranslation(_,S),this.x+=_/d,this.y+=S/T,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(_,S){switch(this.parentRotation){case 90:return[S,-_];case 180:return[-_,-S];case 270:return[-S,_];default:return[_,S]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:_}=this._uiManager.viewParameters,[S,d]=this.pageDimensions;return[S*_,d*_]}setDims(_,S){const[d,T]=this.parentDimensions;this.div.style.width=`${100*_/d}%`,this.div.style.height=`${100*S/T}%`}fixDims(){const{style:_}=this.div,{height:S,width:d}=_,T=d.endsWith("%"),I=S.endsWith("%");if(T&&I)return;const[P,y]=this.parentDimensions;T||(_.width=`${100*parseFloat(d)/P}%`),I||(_.height=`${100*parseFloat(S)/y}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",M(this,s)),this.div.addEventListener("focusout",M(this,b));const[_,S]=this.getInitialTranslation();return this.translate(_,S),(0,i.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(_){const{isMac:S}=r.FeatureTest.platform;if(_.button!==0||_.ctrlKey&&S){_.preventDefault();return}_.ctrlKey&&!S||_.shiftKey||_.metaKey&&S?this.parent.toggleSelected(this):this.parent.setSelected(this),ge(this,E,!0)}getRect(_,S){const d=this.parentScale,[T,I]=this.pageDimensions,[P,y]=this.pageTranslation,o=_/d,p=S/d,f=this.x*T,h=this.y*I,w=this.width*T,D=this.height*I;switch(this.rotation){case 0:return[f+o+P,I-h-p-D+y,f+o+w+P,I-h-p+y];case 90:return[f+p+P,I-h+o+y,f+p+D+P,I-h+o+w+y];case 180:return[f-o-w+P,I-h+p+y,f-o+P,I-h+p+D+y];case 270:return[f-p-D+P,I-h-o-w+y,f-p+P,I-h-o+y];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(_,S){const[d,T,I,P]=_,y=I-d,o=P-T;switch(this.rotation){case 0:return[d,S-P,y,o];case 90:return[d,S-T,o,y];case 180:return[I,S-T,y,o];case 270:return[I,S-P,o,y];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ge(this,c,!0)}disableEditMode(){ge(this,c,!1)}isInEditMode(){return M(this,c)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var _;(_=this.div)==null||_.addEventListener("focusin",M(this,s))}serialize(){(0,r.unreachable)("An editor must be serializable")}static deserialize(_,S,d){const T=new this.prototype.constructor({parent:S,id:S.getNextId(),uiManager:d});T.rotation=_.rotation;const[I,P]=T.pageDimensions,[y,o,p,f]=T.getRectInCurrentCoords(_.rect,P);return T.x=y/I,T.y=o/P,T.width=p/I,T.height=f/P,T}remove(){this.div.removeEventListener("focusin",M(this,s)),this.div.removeEventListener("focusout",M(this,b)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var _;(_=this.div)==null||_.classList.add("selectedEditor")}unselect(){var _;(_=this.div)==null||_.classList.remove("selectedEditor")}updateParams(_,S){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return M(this,l)}set isEditing(_){ge(this,l,_),_?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};s=new WeakMap,b=new WeakMap,E=new WeakMap,l=new WeakMap,c=new WeakMap,O=new WeakMap,De(C,"_colorManager",new i.ColorManager),De(C,"_zIndex",1);let a=C;t.AnnotationEditor=a},(e,t,n)=>{var C,m,_,S,d,T,Lt,y,o,p,f,h,w,D,g,H,X,J,ee,ie,he,le,de,ve,Ee,Te,Ae,G,x,R,N,Nt,q,gt,W,Bt,j,Ut,A,je,L,tt,U,$t,V,Ht,ae,_t,se,nt,pe,mt;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=a,t.opacityToHex=s;var i=n(1),r=n(6);function a(we,K,be){for(const ye of be)K.addEventListener(ye,we[ye].bind(we))}function s(we){return Math.round(Math.min(255,Math.max(1,255*we))).toString(16).padStart(2,"0")}class b{constructor(){ne(this,C,0)}getId(){return`${i.AnnotationEditorPrefix}${at(this,C)._++}`}}C=new WeakMap;class E{constructor(K=128){ne(this,m,[]);ne(this,_,!1);ne(this,S,void 0);ne(this,d,-1);ge(this,S,K)}add({cmd:K,undo:be,mustExec:ye,type:Fe=NaN,overwriteIfSameType:ue=!1,keepUndo:B=!1}){if(ye&&K(),M(this,_))return;const $={cmd:K,undo:be,type:Fe};if(M(this,d)===-1){M(this,m).length>0&&(M(this,m).length=0),ge(this,d,0),M(this,m).push($);return}if(ue&&M(this,m)[M(this,d)].type===Fe){B&&($.undo=M(this,m)[M(this,d)].undo),M(this,m)[M(this,d)]=$;return}const ce=M(this,d)+1;ce===M(this,S)?M(this,m).splice(0,1):(ge(this,d,ce),ce<M(this,m).length&&M(this,m).splice(ce)),M(this,m).push($)}undo(){M(this,d)!==-1&&(ge(this,_,!0),M(this,m)[M(this,d)].undo(),ge(this,_,!1),ge(this,d,M(this,d)-1))}redo(){M(this,d)<M(this,m).length-1&&(ge(this,d,M(this,d)+1),ge(this,_,!0),M(this,m)[M(this,d)].cmd(),ge(this,_,!1))}hasSomethingToUndo(){return M(this,d)!==-1}hasSomethingToRedo(){return M(this,d)<M(this,m).length-1}destroy(){ge(this,m,null)}}m=new WeakMap,_=new WeakMap,S=new WeakMap,d=new WeakMap,t.CommandManager=E;class l{constructor(K){ne(this,T);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:be}=i.FeatureTest.platform;for(const[ye,Fe]of K)for(const ue of ye){const B=ue.startsWith("mac+");be&&B?(this.callbacks.set(ue.slice(4),Fe),this.allKeys.add(ue.split("+").at(-1))):!be&&!B&&(this.callbacks.set(ue,Fe),this.allKeys.add(ue.split("+").at(-1)))}}exec(K,be){if(!this.allKeys.has(be.key))return;const ye=this.callbacks.get(oe(this,T,Lt).call(this,be));ye&&(ye.bind(K)(),be.stopPropagation(),be.preventDefault())}}T=new WeakSet,Lt=function(K){K.altKey&&this.buffer.push("alt"),K.ctrlKey&&this.buffer.push("ctrl"),K.metaKey&&this.buffer.push("meta"),K.shiftKey&&this.buffer.push("shift"),this.buffer.push(K.key);const be=this.buffer.join("+");return this.buffer.length=0,be},t.KeyboardManager=l;const P=class P{get _colors(){const K=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(K),(0,i.shadow)(this,"_colors",K)}convert(K){const be=(0,r.getRGB)(K);if(!window.matchMedia("(forced-colors: active)").matches)return be;for(const[ye,Fe]of this._colors)if(Fe.every((ue,B)=>ue===be[B]))return P._colorsMapping.get(ye);return be}getHexCode(K){const be=this._colors.get(K);return be?i.Util.makeHexColor(...be):K}};De(P,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let c=P;t.ColorManager=c;const _e=class _e{constructor(K,be,ye){ne(this,N);ne(this,q);ne(this,W);ne(this,j);ne(this,A);ne(this,L);ne(this,U);ne(this,V);ne(this,ae);ne(this,se);ne(this,pe);ne(this,y,null);ne(this,o,new Map);ne(this,p,new Map);ne(this,f,null);ne(this,h,new E);ne(this,w,0);ne(this,D,null);ne(this,g,new Set);ne(this,H,null);ne(this,X,new b);ne(this,J,!1);ne(this,ee,i.AnnotationEditorType.NONE);ne(this,ie,new Set);ne(this,he,this.copy.bind(this));ne(this,le,this.cut.bind(this));ne(this,de,this.paste.bind(this));ne(this,ve,this.keydown.bind(this));ne(this,Ee,this.onEditingAction.bind(this));ne(this,Te,this.onPageChanging.bind(this));ne(this,Ae,this.onScaleChanging.bind(this));ne(this,G,this.onRotationChanging.bind(this));ne(this,x,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ne(this,R,null);ge(this,R,K),ge(this,H,be),M(this,H)._on("editingaction",M(this,Ee)),M(this,H)._on("pagechanging",M(this,Te)),M(this,H)._on("scalechanging",M(this,Ae)),M(this,H)._on("rotationchanging",M(this,G)),ge(this,f,ye),this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){oe(this,q,gt).call(this),M(this,H)._off("editingaction",M(this,Ee)),M(this,H)._off("pagechanging",M(this,Te)),M(this,H)._off("scalechanging",M(this,Ae)),M(this,H)._off("rotationchanging",M(this,G));for(const K of M(this,p).values())K.destroy();M(this,p).clear(),M(this,o).clear(),M(this,g).clear(),ge(this,y,null),M(this,ie).clear(),M(this,h).destroy()}onPageChanging({pageNumber:K}){ge(this,w,K-1)}focusMainContainer(){M(this,R).focus()}addShouldRescale(K){M(this,g).add(K)}removeShouldRescale(K){M(this,g).delete(K)}onScaleChanging({scale:K}){this.commitOrRemove(),this.viewParameters.realScale=K*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const be of M(this,g))be.onScaleChanging()}onRotationChanging({pagesRotation:K}){this.commitOrRemove(),this.viewParameters.rotation=K}addToAnnotationStorage(K){!K.isEmpty()&&M(this,f)&&!M(this,f).has(K.id)&&M(this,f).setValue(K.id,K)}copy(K){if(K.preventDefault(),M(this,y)&&M(this,y).commitOrRemove(),!this.hasSelection)return;const be=[];for(const ye of M(this,ie))ye.isEmpty()||be.push(ye.serialize());be.length!==0&&K.clipboardData.setData("application/pdfjs",JSON.stringify(be))}cut(K){this.copy(K),this.delete()}paste(K){K.preventDefault();let be=K.clipboardData.getData("application/pdfjs");if(!be)return;try{be=JSON.parse(be)}catch(Fe){(0,i.warn)(`paste: "${Fe.message}".`);return}if(!Array.isArray(be))return;this.unselectAll();const ye=M(this,p).get(M(this,w));try{const Fe=[];for(const $ of be){const ce=ye.deserialize($);if(!ce)return;Fe.push(ce)}const ue=()=>{for(const $ of Fe)oe(this,ae,_t).call(this,$);oe(this,pe,mt).call(this,Fe)},B=()=>{for(const $ of Fe)$.remove()};this.addCommands({cmd:ue,undo:B,mustExec:!0})}catch(Fe){(0,i.warn)(`paste: "${Fe.message}".`)}}keydown(K){var be;(be=this.getActive())!=null&&be.shouldGetKeyboardEvents()||_e._keyboardManager.exec(this,K)}onEditingAction(K){["undo","redo","delete","selectAll"].includes(K.name)&&this[K.name]()}setEditingState(K){K?(oe(this,N,Nt).call(this),oe(this,W,Bt).call(this),oe(this,A,je).call(this,{isEditing:M(this,ee)!==i.AnnotationEditorType.NONE,isEmpty:oe(this,se,nt).call(this),hasSomethingToUndo:M(this,h).hasSomethingToUndo(),hasSomethingToRedo:M(this,h).hasSomethingToRedo(),hasSelectedEditor:!1})):(oe(this,q,gt).call(this),oe(this,j,Ut).call(this),oe(this,A,je).call(this,{isEditing:!1}))}registerEditorTypes(K){if(!M(this,D)){ge(this,D,K);for(const be of M(this,D))oe(this,L,tt).call(this,be.defaultPropertiesToUpdate)}}getId(){return M(this,X).getId()}get currentLayer(){return M(this,p).get(M(this,w))}get currentPageIndex(){return M(this,w)}addLayer(K){M(this,p).set(K.pageIndex,K),M(this,J)?K.enable():K.disable()}removeLayer(K){M(this,p).delete(K.pageIndex)}updateMode(K){if(ge(this,ee,K),K===i.AnnotationEditorType.NONE)this.setEditingState(!1),oe(this,V,Ht).call(this);else{this.setEditingState(!0),oe(this,U,$t).call(this);for(const be of M(this,p).values())be.updateMode(K)}}updateToolbar(K){K!==M(this,ee)&&M(this,H).dispatch("switchannotationeditormode",{source:this,mode:K})}updateParams(K,be){if(M(this,D)){for(const ye of M(this,ie))ye.updateParams(K,be);for(const ye of M(this,D))ye.updateDefaultParams(K,be)}}getEditors(K){const be=[];for(const ye of M(this,o).values())ye.pageIndex===K&&be.push(ye);return be}getEditor(K){return M(this,o).get(K)}addEditor(K){M(this,o).set(K.id,K)}removeEditor(K){var be;M(this,o).delete(K.id),this.unselect(K),(be=M(this,f))==null||be.remove(K.id)}setActiveEditor(K){M(this,y)!==K&&(ge(this,y,K),K&&oe(this,L,tt).call(this,K.propertiesToUpdate))}toggleSelected(K){if(M(this,ie).has(K)){M(this,ie).delete(K),K.unselect(),oe(this,A,je).call(this,{hasSelectedEditor:this.hasSelection});return}M(this,ie).add(K),K.select(),oe(this,L,tt).call(this,K.propertiesToUpdate),oe(this,A,je).call(this,{hasSelectedEditor:!0})}setSelected(K){for(const be of M(this,ie))be!==K&&be.unselect();M(this,ie).clear(),M(this,ie).add(K),K.select(),oe(this,L,tt).call(this,K.propertiesToUpdate),oe(this,A,je).call(this,{hasSelectedEditor:!0})}isSelected(K){return M(this,ie).has(K)}unselect(K){K.unselect(),M(this,ie).delete(K),oe(this,A,je).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return M(this,ie).size!==0}undo(){M(this,h).undo(),oe(this,A,je).call(this,{hasSomethingToUndo:M(this,h).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:oe(this,se,nt).call(this)})}redo(){M(this,h).redo(),oe(this,A,je).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:M(this,h).hasSomethingToRedo(),isEmpty:oe(this,se,nt).call(this)})}addCommands(K){M(this,h).add(K),oe(this,A,je).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:oe(this,se,nt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const K=[...M(this,ie)],be=()=>{for(const Fe of K)Fe.remove()},ye=()=>{for(const Fe of K)oe(this,ae,_t).call(this,Fe)};this.addCommands({cmd:be,undo:ye,mustExec:!0})}commitOrRemove(){var K;(K=M(this,y))==null||K.commitOrRemove()}selectAll(){for(const K of M(this,ie))K.commit();oe(this,pe,mt).call(this,M(this,o).values())}unselectAll(){if(M(this,y)){M(this,y).commitOrRemove();return}if(M(this,ie).size!==0){for(const K of M(this,ie))K.unselect();M(this,ie).clear(),oe(this,A,je).call(this,{hasSelectedEditor:!1})}}isActive(K){return M(this,y)===K}getActive(){return M(this,y)}getMode(){return M(this,ee)}};y=new WeakMap,o=new WeakMap,p=new WeakMap,f=new WeakMap,h=new WeakMap,w=new WeakMap,D=new WeakMap,g=new WeakMap,H=new WeakMap,X=new WeakMap,J=new WeakMap,ee=new WeakMap,ie=new WeakMap,he=new WeakMap,le=new WeakMap,de=new WeakMap,ve=new WeakMap,Ee=new WeakMap,Te=new WeakMap,Ae=new WeakMap,G=new WeakMap,x=new WeakMap,R=new WeakMap,N=new WeakSet,Nt=function(){M(this,R).addEventListener("keydown",M(this,ve))},q=new WeakSet,gt=function(){M(this,R).removeEventListener("keydown",M(this,ve))},W=new WeakSet,Bt=function(){document.addEventListener("copy",M(this,he)),document.addEventListener("cut",M(this,le)),document.addEventListener("paste",M(this,de))},j=new WeakSet,Ut=function(){document.removeEventListener("copy",M(this,he)),document.removeEventListener("cut",M(this,le)),document.removeEventListener("paste",M(this,de))},A=new WeakSet,je=function(K){Object.entries(K).some(([ye,Fe])=>M(this,x)[ye]!==Fe)&&M(this,H).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(M(this,x),K)})},L=new WeakSet,tt=function(K){M(this,H).dispatch("annotationeditorparamschanged",{source:this,details:K})},U=new WeakSet,$t=function(){if(!M(this,J)){ge(this,J,!0);for(const K of M(this,p).values())K.enable()}},V=new WeakSet,Ht=function(){if(this.unselectAll(),M(this,J)){ge(this,J,!1);for(const K of M(this,p).values())K.disable()}},ae=new WeakSet,_t=function(K){const be=M(this,p).get(K.pageIndex);be?be.addOrRebuild(K):this.addEditor(K)},se=new WeakSet,nt=function(){if(M(this,o).size===0)return!0;if(M(this,o).size===1)for(const K of M(this,o).values())return K.isEmpty();return!1},pe=new WeakSet,mt=function(K){M(this,ie).clear();for(const be of K)be.isEmpty()||(M(this,ie).add(be),be.select());oe(this,A,je).call(this,{hasSelectedEditor:!0})},De(_e,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],_e.prototype.selectAll],[["ctrl+z","mac+meta+z"],_e.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],_e.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],_e.prototype.delete],[["Escape","mac+Escape"],_e.prototype.unselectAll]]));let O=_e;t.AnnotationEditorUIManager=O},(e,t,n)=>{var he,le,de,ve,Ee,Te,Ae,G,x,Je,N,Ve,q,Ze;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=f,t.getColorValues=H,t.getCurrentTransform=X,t.getCurrentTransformInverse=J,t.getFilenameFromUrl=I,t.getPdfFilenameFromUrl=P,t.getRGB=g,t.getXfaPageViewport=D,t.isDataScheme=d,t.isPdfFile=T,t.isValidFetchUrl=o,t.loadScript=p,t.setLayerDimensions=ee;var i=n(7),r=n(1);const a="http://www.w3.org/2000/svg",s="pdfjs_internal_id_";t.AnnotationPrefix=s;const ie=class ie{};De(ie,"CSS",96),De(ie,"PDF",72),De(ie,"PDF_TO_CSS_UNITS",ie.CSS/ie.PDF);let b=ie;t.PixelsPerInch=b;class E extends i.BaseFilterFactory{constructor({docId:j,ownerDocument:u=globalThis.document}={}){super();ne(this,x);ne(this,N);ne(this,q);ne(this,he,void 0);ne(this,le,void 0);ne(this,de,void 0);ne(this,ve,void 0);ne(this,Ee,void 0);ne(this,Te,void 0);ne(this,Ae,void 0);ne(this,G,0);ge(this,de,j),ge(this,ve,u)}addFilter(j){if(!j)return"none";let u=M(this,x,Je).get(j);if(u)return u;let A,F,L,k;if(j.length===1){const ae=j[0],re=new Array(256);for(let se=0;se<256;se++)re[se]=ae[se]/255;k=A=F=L=re.join(",")}else{const[ae,re,se]=j,fe=new Array(256),pe=new Array(256),Se=new Array(256);for(let _e=0;_e<256;_e++)fe[_e]=ae[_e]/255,pe[_e]=re[_e]/255,Se[_e]=se[_e]/255;A=fe.join(","),F=pe.join(","),L=Se.join(","),k=`${A}${F}${L}`}if(u=M(this,x,Je).get(k),u)return M(this,x,Je).set(j,u),u;const U=`g_${M(this,de)}_transfer_map_${at(this,G)._++}`,Q=`url(#${U})`;M(this,x,Je).set(j,Q),M(this,x,Je).set(k,Q);const V=M(this,ve).createElementNS(a,"filter",a);V.setAttribute("id",U),V.setAttribute("color-interpolation-filters","sRGB");const te=M(this,ve).createElementNS(a,"feComponentTransfer");return V.append(te),oe(this,q,Ze).call(this,te,"feFuncR",A),oe(this,q,Ze).call(this,te,"feFuncG",F),oe(this,q,Ze).call(this,te,"feFuncB",L),M(this,N,Ve).append(V),Q}addHCMFilter(j,u){var se;const A=`${j}-${u}`;if(M(this,Te)===A)return M(this,Ae);if(ge(this,Te,A),ge(this,Ae,"none"),(se=M(this,Ee))==null||se.remove(),!j||!u)return M(this,Ae);M(this,N,Ve).style.color=j,j=getComputedStyle(M(this,N,Ve)).getPropertyValue("color");const F=g(j);j=r.Util.makeHexColor(...F),M(this,N,Ve).style.color=u,u=getComputedStyle(M(this,N,Ve)).getPropertyValue("color");const L=g(u);if(u=r.Util.makeHexColor(...L),M(this,N,Ve).style.color="",j==="#000000"&&u==="#ffffff"||j===u)return M(this,Ae);const k=new Array(256);for(let fe=0;fe<=255;fe++){const pe=fe/255;k[fe]=pe<=.03928?pe/12.92:((pe+.055)/1.055)**2.4}const U=k.join(","),Q=`g_${M(this,de)}_hcm_filter`,V=ge(this,Ee,M(this,ve).createElementNS(a,"filter",a));V.setAttribute("id",Q),V.setAttribute("color-interpolation-filters","sRGB");let te=M(this,ve).createElementNS(a,"feComponentTransfer");V.append(te),oe(this,q,Ze).call(this,te,"feFuncR",U),oe(this,q,Ze).call(this,te,"feFuncG",U),oe(this,q,Ze).call(this,te,"feFuncB",U);const ae=M(this,ve).createElementNS(a,"feColorMatrix");ae.setAttribute("type","matrix"),ae.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),V.append(ae),te=M(this,ve).createElementNS(a,"feComponentTransfer"),V.append(te);const re=(fe,pe)=>{const Se=F[fe]/255,_e=L[fe]/255,we=new Array(pe+1);for(let K=0;K<=pe;K++)we[K]=Se+K/pe*(_e-Se);return we.join(",")};return oe(this,q,Ze).call(this,te,"feFuncR",re(0,5)),oe(this,q,Ze).call(this,te,"feFuncG",re(1,5)),oe(this,q,Ze).call(this,te,"feFuncB",re(2,5)),M(this,N,Ve).append(V),ge(this,Ae,`url(#${Q})`),M(this,Ae)}destroy(j=!1){j&&M(this,Ae)||(M(this,le)&&(M(this,le).parentNode.parentNode.remove(),ge(this,le,null)),M(this,he)&&(M(this,he).clear(),ge(this,he,null)),ge(this,G,0))}}he=new WeakMap,le=new WeakMap,de=new WeakMap,ve=new WeakMap,Ee=new WeakMap,Te=new WeakMap,Ae=new WeakMap,G=new WeakMap,x=new WeakSet,Je=function(){return M(this,he)||ge(this,he,new Map)},N=new WeakSet,Ve=function(){if(!M(this,le)){const j=M(this,ve).createElement("div"),{style:u}=j;u.visibility="hidden",u.contain="strict",u.width=u.height=0,u.position="absolute",u.top=u.left=0,u.zIndex=-1;const A=M(this,ve).createElementNS(a,"svg");A.setAttribute("width",0),A.setAttribute("height",0),ge(this,le,M(this,ve).createElementNS(a,"defs")),j.append(A),A.append(M(this,le)),M(this,ve).body.append(j)}return M(this,le)},q=new WeakSet,Ze=function(j,u,A){const F=M(this,ve).createElementNS(a,u);F.setAttribute("type","discrete"),F.setAttribute("tableValues",A),j.append(F)},t.DOMFilterFactory=E;class l extends i.BaseCanvasFactory{constructor({ownerDocument:z=globalThis.document}={}){super(),this._document=z}_createCanvas(z,j){const u=this._document.createElement("canvas");return u.width=z,u.height=j,u}}t.DOMCanvasFactory=l;async function c(W,z=!1){if(o(W,document.baseURI)){const j=await fetch(W);if(!j.ok)throw new Error(j.statusText);return z?new Uint8Array(await j.arrayBuffer()):(0,r.stringToBytes)(await j.text())}return new Promise((j,u)=>{const A=new XMLHttpRequest;A.open("GET",W,!0),z&&(A.responseType="arraybuffer"),A.onreadystatechange=()=>{if(A.readyState===XMLHttpRequest.DONE){if(A.status===200||A.status===0){let F;if(z&&A.response?F=new Uint8Array(A.response):!z&&A.responseText&&(F=(0,r.stringToBytes)(A.responseText)),F){j(F);return}}u(new Error(A.statusText))}},A.send(null)})}class O extends i.BaseCMapReaderFactory{_fetchData(z,j){return c(z,this.isCompressed).then(u=>({cMapData:u,compressionType:j}))}}t.DOMCMapReaderFactory=O;class C extends i.BaseStandardFontDataFactory{_fetchData(z){return c(z,!0)}}t.DOMStandardFontDataFactory=C;class m extends i.BaseSVGFactory{_createSVG(z){return document.createElementNS(a,z)}}t.DOMSVGFactory=m;class _{constructor({viewBox:z,scale:j,rotation:u,offsetX:A=0,offsetY:F=0,dontFlip:L=!1}){this.viewBox=z,this.scale=j,this.rotation=u,this.offsetX=A,this.offsetY=F;const k=(z[2]+z[0])/2,U=(z[3]+z[1])/2;let Q,V,te,ae;switch(u%=360,u<0&&(u+=360),u){case 180:Q=-1,V=0,te=0,ae=1;break;case 90:Q=0,V=1,te=1,ae=0;break;case 270:Q=0,V=-1,te=-1,ae=0;break;case 0:Q=1,V=0,te=0,ae=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}L&&(te=-te,ae=-ae);let re,se,fe,pe;Q===0?(re=Math.abs(U-z[1])*j+A,se=Math.abs(k-z[0])*j+F,fe=(z[3]-z[1])*j,pe=(z[2]-z[0])*j):(re=Math.abs(k-z[0])*j+A,se=Math.abs(U-z[1])*j+F,fe=(z[2]-z[0])*j,pe=(z[3]-z[1])*j),this.transform=[Q*j,V*j,te*j,ae*j,re-Q*j*k-te*j*U,se-V*j*k-ae*j*U],this.width=fe,this.height=pe}get rawDims(){const{viewBox:z}=this;return(0,r.shadow)(this,"rawDims",{pageWidth:z[2]-z[0],pageHeight:z[3]-z[1],pageX:z[0],pageY:z[1]})}clone({scale:z=this.scale,rotation:j=this.rotation,offsetX:u=this.offsetX,offsetY:A=this.offsetY,dontFlip:F=!1}={}){return new _({viewBox:this.viewBox.slice(),scale:z,rotation:j,offsetX:u,offsetY:A,dontFlip:F})}convertToViewportPoint(z,j){return r.Util.applyTransform([z,j],this.transform)}convertToViewportRectangle(z){const j=r.Util.applyTransform([z[0],z[1]],this.transform),u=r.Util.applyTransform([z[2],z[3]],this.transform);return[j[0],j[1],u[0],u[1]]}convertToPdfPoint(z,j){return r.Util.applyInverseTransform([z,j],this.transform)}}t.PageViewport=_;class S extends r.BaseException{constructor(z,j,u=0){super(z,"RenderingCancelledException"),this.type=j,this.extraDelay=u}}t.RenderingCancelledException=S;function d(W){const z=W.length;let j=0;for(;j<z&&W[j].trim()==="";)j++;return W.substring(j,j+5).toLowerCase()==="data:"}function T(W){return typeof W=="string"&&/\.pdf$/i.test(W)}function I(W,z=!1){return z||([W]=W.split(/[#?]/,1)),W.substring(W.lastIndexOf("/")+1)}function P(W,z="document.pdf"){if(typeof W!="string")return z;if(d(W))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),z;const j=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,A=j.exec(W);let F=u.exec(A[1])||u.exec(A[2])||u.exec(A[3]);if(F&&(F=F[0],F.includes("%")))try{F=u.exec(decodeURIComponent(F))[0]}catch{}return F||z}class y{constructor(){De(this,"started",Object.create(null));De(this,"times",[])}time(z){z in this.started&&(0,r.warn)(`Timer is already running for ${z}`),this.started[z]=Date.now()}timeEnd(z){z in this.started||(0,r.warn)(`Timer has not been started for ${z}`),this.times.push({name:z,start:this.started[z],end:Date.now()}),delete this.started[z]}toString(){const z=[];let j=0;for(const{name:u}of this.times)j=Math.max(u.length,j);for(const{name:u,start:A,end:F}of this.times)z.push(`${u.padEnd(j)} ${F-A}ms
`);return z.join("")}}t.StatTimer=y;function o(W,z){try{const{protocol:j}=z?new URL(W,z):new URL(W);return j==="http:"||j==="https:"}catch{return!1}}function p(W,z=!1){return new Promise((j,u)=>{const A=document.createElement("script");A.src=W,A.onload=function(F){z&&A.remove(),j(F)},A.onerror=function(){u(new Error(`Cannot load script at: ${A.src}`))},(document.head||document.documentElement).append(A)})}function f(W){console.log("Deprecated API usage: "+W)}let h;class w{static toDateObject(z){if(!z||typeof z!="string")return null;h||(h=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const j=h.exec(z);if(!j)return null;const u=parseInt(j[1],10);let A=parseInt(j[2],10);A=A>=1&&A<=12?A-1:0;let F=parseInt(j[3],10);F=F>=1&&F<=31?F:1;let L=parseInt(j[4],10);L=L>=0&&L<=23?L:0;let k=parseInt(j[5],10);k=k>=0&&k<=59?k:0;let U=parseInt(j[6],10);U=U>=0&&U<=59?U:0;const Q=j[7]||"Z";let V=parseInt(j[8],10);V=V>=0&&V<=23?V:0;let te=parseInt(j[9],10)||0;return te=te>=0&&te<=59?te:0,Q==="-"?(L+=V,k+=te):Q==="+"&&(L-=V,k-=te),new Date(Date.UTC(u,A,F,L,k,U))}}t.PDFDateString=w;function D(W,{scale:z=1,rotation:j=0}){const{width:u,height:A}=W.attributes.style,F=[0,0,parseInt(u),parseInt(A)];return new _({viewBox:F,scale:z,rotation:j})}function g(W){if(W.startsWith("#")){const z=parseInt(W.slice(1),16);return[(z&16711680)>>16,(z&65280)>>8,z&255]}return W.startsWith("rgb(")?W.slice(4,-1).split(",").map(z=>parseInt(z)):W.startsWith("rgba(")?W.slice(5,-1).split(",").map(z=>parseInt(z)).slice(0,3):((0,r.warn)(`Not a valid color format: "${W}"`),[0,0,0])}function H(W){const z=document.createElement("span");z.style.visibility="hidden",document.body.append(z);for(const j of W.keys()){z.style.color=j;const u=window.getComputedStyle(z).color;W.set(j,g(u))}z.remove()}function X(W){const{a:z,b:j,c:u,d:A,e:F,f:L}=W.getTransform();return[z,j,u,A,F,L]}function J(W){const{a:z,b:j,c:u,d:A,e:F,f:L}=W.getTransform().invertSelf();return[z,j,u,A,F,L]}function ee(W,z,j=!1,u=!0){if(z instanceof _){const{pageWidth:A,pageHeight:F}=z.rawDims,{style:L}=W,k=`calc(var(--scale-factor) * ${A}px)`,U=`calc(var(--scale-factor) * ${F}px)`;!j||z.rotation%180===0?(L.width=k,L.height=U):(L.width=U,L.height=k)}u&&W.setAttribute("data-main-rotation",z.rotation)}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var i=n(1);class r{constructor(){this.constructor===r&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(c){return"none"}addHCMFilter(c,O){return"none"}destroy(c=!1){}}t.BaseFilterFactory=r;class a{constructor(){this.constructor===a&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(c,O){if(c<=0||O<=0)throw new Error("Invalid canvas size");const C=this._createCanvas(c,O);return{canvas:C,context:C.getContext("2d")}}reset(c,O,C){if(!c.canvas)throw new Error("Canvas is not specified");if(O<=0||C<=0)throw new Error("Invalid canvas size");c.canvas.width=O,c.canvas.height=C}destroy(c){if(!c.canvas)throw new Error("Canvas is not specified");c.canvas.width=0,c.canvas.height=0,c.canvas=null,c.context=null}_createCanvas(c,O){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=a;class s{constructor({baseUrl:c=null,isCompressed:O=!0}){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=c,this.isCompressed=O}async fetch({name:c}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!c)throw new Error("CMap name must be specified.");const O=this.baseUrl+c+(this.isCompressed?".bcmap":""),C=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(O,C).catch(m=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${O}`)})}_fetchData(c,O){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=s;class b{constructor({baseUrl:c=null}){this.constructor===b&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=c}async fetch({filename:c}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!c)throw new Error("Font filename must be specified.");const O=`${this.baseUrl}${c}`;return this._fetchData(O).catch(C=>{throw new Error(`Unable to load font data at: ${O}`)})}_fetchData(c){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=b;class E{constructor(){this.constructor===E&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(c,O,C=!1){if(c<=0||O<=0)throw new Error("Invalid SVG dimensions");const m=this._createSVG("svg:svg");return m.setAttribute("version","1.1"),C||(m.setAttribute("width",`${c}px`),m.setAttribute("height",`${O}px`)),m.setAttribute("preserveAspectRatio","none"),m.setAttribute("viewBox",`0 0 ${c} ${O}`),m}createElement(c){if(typeof c!="string")throw new Error("Invalid SVG element type");return this._createSVG(c)}_createSVG(c){(0,i.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=E},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var i=n(1);const r=3285377520,a=4294901760,s=65535;class b{constructor(l){this.h1=l?l&4294967295:r,this.h2=l?l&4294967295:r}update(l){let c,O;if(typeof l=="string"){c=new Uint8Array(l.length*2),O=0;for(let f=0,h=l.length;f<h;f++){const w=l.charCodeAt(f);w<=255?c[O++]=w:(c[O++]=w>>>8,c[O++]=w&255)}}else if((0,i.isArrayBuffer)(l))c=l.slice(),O=c.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const C=O>>2,m=O-C*4,_=new Uint32Array(c.buffer,0,C);let S=0,d=0,T=this.h1,I=this.h2;const P=3432918353,y=461845907,o=P&s,p=y&s;for(let f=0;f<C;f++)f&1?(S=_[f],S=S*P&a|S*o&s,S=S<<15|S>>>17,S=S*y&a|S*p&s,T^=S,T=T<<13|T>>>19,T=T*5+3864292196):(d=_[f],d=d*P&a|d*o&s,d=d<<15|d>>>17,d=d*y&a|d*p&s,I^=d,I=I<<13|I>>>19,I=I*5+3864292196);switch(S=0,m){case 3:S^=c[C*4+2]<<16;case 2:S^=c[C*4+1]<<8;case 1:S^=c[C*4],S=S*P&a|S*o&s,S=S<<15|S>>>17,S=S*y&a|S*p&s,C&1?T^=S:I^=S}this.h1=T,this.h2=I}hexdigest(){let l=this.h1,c=this.h2;return l^=c>>>1,l=l*3981806797&a|l*36045&s,c=c*4283543511&a|((c<<16|l>>>16)*2950163797&a)>>>16,l^=c>>>1,l=l*444984403&a|l*60499&s,c=c*3301882366&a|((c<<16|l>>>16)*3120437893&a)>>>16,l^=c>>>1,(l>>>0).toString(16).padStart(8,"0")+(c>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=b},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var i=n(1),r=n(10);class a{constructor({ownerDocument:E=globalThis.document,styleElement:l=null}){this._document=E,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(E){this.nativeFontFaces.push(E),this._document.fonts.add(E)}insertRule(E){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const l=this.styleElement.sheet;l.insertRule(E,l.cssRules.length)}clear(){for(const E of this.nativeFontFaces)this._document.fonts.delete(E);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(E){if(E.attached||E.missingFile)return;if(E.attached=!0,this.isFontLoadingAPISupported){const c=E.createNativeFontFace();if(c){this.addNativeFontFace(c);try{await c.loaded}catch(O){throw(0,i.warn)(`Failed to load font '${c.family}': '${O}'.`),E.disableFontFace=!0,O}}return}const l=E.createFontFaceRule();if(l){if(this.insertRule(l),this.isSyncFontLoadingSupported)return;await new Promise(c=>{const O=this._queueLoadingCallback(c);this._prepareFontLoadEvent(E,O)})}}get isFontLoadingAPISupported(){var l;const E=!!((l=this._document)!=null&&l.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",E)}get isSyncFontLoadingSupported(){let E=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(E=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",E)}_queueLoadingCallback(E){function l(){for((0,i.assert)(!O.done,"completeRequest() cannot be called twice."),O.done=!0;c.length>0&&c[0].done;){const C=c.shift();setTimeout(C.callback,0)}}const{loadingRequests:c}=this,O={done:!1,complete:l,callback:E};return c.push(O),O}get _loadTestFont(){const E=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",E)}_prepareFontLoadEvent(E,l){function c(g,H){return g.charCodeAt(H)<<24|g.charCodeAt(H+1)<<16|g.charCodeAt(H+2)<<8|g.charCodeAt(H+3)&255}function O(g,H,X,J){const ee=g.substring(0,H),ie=g.substring(H+X);return ee+J+ie}let C,m;const _=this._document.createElement("canvas");_.width=1,_.height=1;const S=_.getContext("2d");let d=0;function T(g,H){if(++d>30){(0,i.warn)("Load test font never loaded."),H();return}if(S.font="30px "+g,S.fillText(".",0,20),S.getImageData(0,0,1,1).data[3]>0){H();return}setTimeout(T.bind(null,g,H))}const I=`lt${Date.now()}${this.loadTestFontId++}`;let P=this._loadTestFont;P=O(P,976,I.length,I);const o=16,p=1482184792;let f=c(P,o);for(C=0,m=I.length-3;C<m;C+=4)f=f-p+c(I,C)|0;C<I.length&&(f=f-p+c(I+"XXX",C)|0),P=O(P,o,4,(0,i.string32)(f));const h=`url(data:font/opentype;base64,${btoa(P)});`,w=`@font-face {font-family:"${I}";src:${h}}`;this.insertRule(w);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const g of[E.loadedName,I]){const H=this._document.createElement("span");H.textContent="Hi",H.style.fontFamily=g,D.append(H)}this._document.body.append(D),T(I,()=>{D.remove(),l.complete()})}}t.FontLoader=a;class s{constructor(E,{isEvalSupported:l=!0,disableFontFace:c=!1,ignoreErrors:O=!1,inspectFont:C=null}){this.compiledGlyphs=Object.create(null);for(const m in E)this[m]=E[m];this.isEvalSupported=l!==!1,this.disableFontFace=c===!0,this.ignoreErrors=O===!0,this._inspectFont=C}createNativeFontFace(){var l;if(!this.data||this.disableFontFace)return null;let E;if(!this.cssFontInfo)E=new FontFace(this.loadedName,this.data,{});else{const c={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(c.style=`oblique ${this.cssFontInfo.italicAngle}deg`),E=new FontFace(this.cssFontInfo.fontFamily,this.data,c)}return(l=this._inspectFont)==null||l.call(this,this),E}createFontFaceRule(){var O;if(!this.data||this.disableFontFace)return null;const E=(0,i.bytesToString)(this.data),l=`url(data:${this.mimetype};base64,${btoa(E)});`;let c;if(!this.cssFontInfo)c=`@font-face {font-family:"${this.loadedName}";src:${l}}`;else{let C=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(C+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),c=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${C}src:${l}}`}return(O=this._inspectFont)==null||O.call(this,this,l),c}getPathGenerator(E,l){if(this.compiledGlyphs[l]!==void 0)return this.compiledGlyphs[l];let c;try{c=E.get(this.loadedName+"_path_"+l)}catch(O){if(!this.ignoreErrors)throw O;return(0,i.warn)(`getPathGenerator - ignoring character: "${O}".`),this.compiledGlyphs[l]=function(C,m){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const O=[];for(const C of c){const m=C.args!==void 0?C.args.join(","):"";O.push("c.",C.cmd,"(",m,`);
`)}return this.compiledGlyphs[l]=new Function("c","size",O.join(""))}return this.compiledGlyphs[l]=function(O,C){for(const m of c)m.cmd==="scale"&&(m.args=[C,-C]),O[m.cmd].apply(O,m.args)}}}t.FontFaceObject=s},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const n=typeof browser$1=="object"&&browser$1+""=="[object process]"&&!browser$1.versions.nw&&!(browser$1.versions.electron&&browser$1.type&&browser$1.type!=="browser");t.isNodeJS=n},(e,t,n)=>{var de,bt,Ee,vt;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var i=n(1),r=n(6),a=n(12),s=n(13),b=n(10);const E=16,l=100,c=4096,O=15,C=10,m=1e3,_=16;function S(G,x){if(G._removeMirroring)throw new Error("Context is already forwarding operations.");G.__originalSave=G.save,G.__originalRestore=G.restore,G.__originalRotate=G.rotate,G.__originalScale=G.scale,G.__originalTranslate=G.translate,G.__originalTransform=G.transform,G.__originalSetTransform=G.setTransform,G.__originalResetTransform=G.resetTransform,G.__originalClip=G.clip,G.__originalMoveTo=G.moveTo,G.__originalLineTo=G.lineTo,G.__originalBezierCurveTo=G.bezierCurveTo,G.__originalRect=G.rect,G.__originalClosePath=G.closePath,G.__originalBeginPath=G.beginPath,G._removeMirroring=()=>{G.save=G.__originalSave,G.restore=G.__originalRestore,G.rotate=G.__originalRotate,G.scale=G.__originalScale,G.translate=G.__originalTranslate,G.transform=G.__originalTransform,G.setTransform=G.__originalSetTransform,G.resetTransform=G.__originalResetTransform,G.clip=G.__originalClip,G.moveTo=G.__originalMoveTo,G.lineTo=G.__originalLineTo,G.bezierCurveTo=G.__originalBezierCurveTo,G.rect=G.__originalRect,G.closePath=G.__originalClosePath,G.beginPath=G.__originalBeginPath,delete G._removeMirroring},G.save=function(){x.save(),this.__originalSave()},G.restore=function(){x.restore(),this.__originalRestore()},G.translate=function(N,Z){x.translate(N,Z),this.__originalTranslate(N,Z)},G.scale=function(N,Z){x.scale(N,Z),this.__originalScale(N,Z)},G.transform=function(N,Z,q,Y,W,z){x.transform(N,Z,q,Y,W,z),this.__originalTransform(N,Z,q,Y,W,z)},G.setTransform=function(N,Z,q,Y,W,z){x.setTransform(N,Z,q,Y,W,z),this.__originalSetTransform(N,Z,q,Y,W,z)},G.resetTransform=function(){x.resetTransform(),this.__originalResetTransform()},G.rotate=function(N){x.rotate(N),this.__originalRotate(N)},G.clip=function(N){x.clip(N),this.__originalClip(N)},G.moveTo=function(R,N){x.moveTo(R,N),this.__originalMoveTo(R,N)},G.lineTo=function(R,N){x.lineTo(R,N),this.__originalLineTo(R,N)},G.bezierCurveTo=function(R,N,Z,q,Y,W){x.bezierCurveTo(R,N,Z,q,Y,W),this.__originalBezierCurveTo(R,N,Z,q,Y,W)},G.rect=function(R,N,Z,q){x.rect(R,N,Z,q),this.__originalRect(R,N,Z,q)},G.closePath=function(){x.closePath(),this.__originalClosePath()},G.beginPath=function(){x.beginPath(),this.__originalBeginPath()}}class d{constructor(x){this.canvasFactory=x,this.cache=Object.create(null)}getCanvas(x,R,N){let Z;return this.cache[x]!==void 0?(Z=this.cache[x],this.canvasFactory.reset(Z,R,N)):(Z=this.canvasFactory.create(R,N),this.cache[x]=Z),Z}delete(x){delete this.cache[x]}clear(){for(const x in this.cache){const R=this.cache[x];this.canvasFactory.destroy(R),delete this.cache[x]}}}function T(G,x,R,N,Z,q,Y,W,z,j){const[u,A,F,L,k,U]=(0,r.getCurrentTransform)(G);if(A===0&&F===0){const te=Y*u+k,ae=Math.round(te),re=W*L+U,se=Math.round(re),fe=(Y+z)*u+k,pe=Math.abs(Math.round(fe)-ae)||1,Se=(W+j)*L+U,_e=Math.abs(Math.round(Se)-se)||1;return G.setTransform(Math.sign(u),0,0,Math.sign(L),ae,se),G.drawImage(x,R,N,Z,q,0,0,pe,_e),G.setTransform(u,A,F,L,k,U),[pe,_e]}if(u===0&&L===0){const te=W*F+k,ae=Math.round(te),re=Y*A+U,se=Math.round(re),fe=(W+j)*F+k,pe=Math.abs(Math.round(fe)-ae)||1,Se=(Y+z)*A+U,_e=Math.abs(Math.round(Se)-se)||1;return G.setTransform(0,Math.sign(A),Math.sign(F),0,ae,se),G.drawImage(x,R,N,Z,q,0,0,_e,pe),G.setTransform(u,A,F,L,k,U),[_e,pe]}G.drawImage(x,R,N,Z,q,Y,W,z,j);const Q=Math.hypot(u,A),V=Math.hypot(F,L);return[Q*z,V*j]}function I(G){const{width:x,height:R}=G;if(x>m||R>m)return null;const N=1e3,Z=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),q=x+1;let Y=new Uint8Array(q*(R+1)),W,z,j;const u=x+7&-8;let A=new Uint8Array(u*R),F=0;for(const V of G.data){let te=128;for(;te>0;)A[F++]=V&te?0:255,te>>=1}let L=0;for(F=0,A[F]!==0&&(Y[0]=1,++L),z=1;z<x;z++)A[F]!==A[F+1]&&(Y[z]=A[F]?2:1,++L),F++;for(A[F]!==0&&(Y[z]=2,++L),W=1;W<R;W++){F=W*u,j=W*q,A[F-u]!==A[F]&&(Y[j]=A[F]?1:8,++L);let V=(A[F]?4:0)+(A[F-u]?8:0);for(z=1;z<x;z++)V=(V>>2)+(A[F+1]?4:0)+(A[F-u+1]?8:0),Z[V]&&(Y[j+z]=Z[V],++L),F++;if(A[F-u]!==A[F]&&(Y[j+z]=A[F]?2:4,++L),L>N)return null}for(F=u*(R-1),j=W*q,A[F]!==0&&(Y[j]=8,++L),z=1;z<x;z++)A[F]!==A[F+1]&&(Y[j+z]=A[F]?4:8,++L),F++;if(A[F]!==0&&(Y[j+z]=4,++L),L>N)return null;const k=new Int32Array([0,q,-1,0,-q,0,0,0,1]),U=new Path2D;for(W=0;L&&W<=R;W++){let V=W*q;const te=V+x;for(;V<te&&!Y[V];)V++;if(V===te)continue;U.moveTo(V%q,W);const ae=V;let re=Y[V];do{const se=k[re];do V+=se;while(!Y[V]);const fe=Y[V];fe!==5&&fe!==10?(re=fe,Y[V]=0):(re=fe&51*re>>4,Y[V]&=re>>2|re<<2),U.lineTo(V%q,V/q|0),Y[V]||--L}while(ae!==V);--W}return A=null,Y=null,function(V){V.save(),V.scale(1/x,-1/R),V.translate(0,-R),V.fill(U),V.beginPath(),V.restore()}}class P{constructor(x,R){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,x,R])}clone(){const x=Object.create(this);return x.clipBox=this.clipBox.slice(),x}setCurrentPoint(x,R){this.x=x,this.y=R}updatePathMinMax(x,R,N){[R,N]=i.Util.applyTransform([R,N],x),this.minX=Math.min(this.minX,R),this.minY=Math.min(this.minY,N),this.maxX=Math.max(this.maxX,R),this.maxY=Math.max(this.maxY,N)}updateRectMinMax(x,R){const N=i.Util.applyTransform(R,x),Z=i.Util.applyTransform(R.slice(2),x);this.minX=Math.min(this.minX,N[0],Z[0]),this.minY=Math.min(this.minY,N[1],Z[1]),this.maxX=Math.max(this.maxX,N[0],Z[0]),this.maxY=Math.max(this.maxY,N[1],Z[1])}updateScalingPathMinMax(x,R){i.Util.scaleMinMax(x,R),this.minX=Math.min(this.minX,R[0]),this.maxX=Math.max(this.maxX,R[1]),this.minY=Math.min(this.minY,R[2]),this.maxY=Math.max(this.maxY,R[3])}updateCurvePathMinMax(x,R,N,Z,q,Y,W,z,j,u){const A=i.Util.bezierBoundingBox(R,N,Z,q,Y,W,z,j);if(u){u[0]=Math.min(u[0],A[0],A[2]),u[1]=Math.max(u[1],A[0],A[2]),u[2]=Math.min(u[2],A[1],A[3]),u[3]=Math.max(u[3],A[1],A[3]);return}this.updateRectMinMax(x,A)}getPathBoundingBox(x=a.PathType.FILL,R=null){const N=[this.minX,this.minY,this.maxX,this.maxY];if(x===a.PathType.STROKE){R||(0,i.unreachable)("Stroke bounding box must include transform.");const Z=i.Util.singularValueDecompose2dScale(R),q=Z[0]*this.lineWidth/2,Y=Z[1]*this.lineWidth/2;N[0]-=q,N[1]-=Y,N[2]+=q,N[3]+=Y}return N}updateClipFromPath(){const x=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(x||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(x){this.clipBox=x,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(x=a.PathType.FILL,R=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(x,R))}}function y(G,x){if(typeof ImageData<"u"&&x instanceof ImageData){G.putImageData(x,0,0);return}const R=x.height,N=x.width,Z=R%_,q=(R-Z)/_,Y=Z===0?q:q+1,W=G.createImageData(N,_);let z=0,j;const u=x.data,A=W.data;let F,L,k,U;if(x.kind===i.ImageKind.GRAYSCALE_1BPP){const Q=u.byteLength,V=new Uint32Array(A.buffer,0,A.byteLength>>2),te=V.length,ae=N+7>>3,re=4294967295,se=i.FeatureTest.isLittleEndian?4278190080:255;for(F=0;F<Y;F++){for(k=F<q?_:Z,j=0,L=0;L<k;L++){const fe=Q-z;let pe=0;const Se=fe>ae?N:fe*8-7,_e=Se&-8;let we=0,K=0;for(;pe<_e;pe+=8)K=u[z++],V[j++]=K&128?re:se,V[j++]=K&64?re:se,V[j++]=K&32?re:se,V[j++]=K&16?re:se,V[j++]=K&8?re:se,V[j++]=K&4?re:se,V[j++]=K&2?re:se,V[j++]=K&1?re:se;for(;pe<Se;pe++)we===0&&(K=u[z++],we=128),V[j++]=K&we?re:se,we>>=1}for(;j<te;)V[j++]=0;G.putImageData(W,0,F*_)}}else if(x.kind===i.ImageKind.RGBA_32BPP){for(L=0,U=N*_*4,F=0;F<q;F++)A.set(u.subarray(z,z+U)),z+=U,G.putImageData(W,0,L),L+=_;F<Y&&(U=N*Z*4,A.set(u.subarray(z,z+U)),G.putImageData(W,0,L))}else if(x.kind===i.ImageKind.RGB_24BPP)for(k=_,U=N*k,F=0;F<Y;F++){for(F>=q&&(k=Z,U=N*k),j=0,L=U;L--;)A[j++]=u[z++],A[j++]=u[z++],A[j++]=u[z++],A[j++]=255;G.putImageData(W,0,F*_)}else throw new Error(`bad image kind: ${x.kind}`)}function o(G,x){if(x.bitmap){G.drawImage(x.bitmap,0,0);return}const R=x.height,N=x.width,Z=R%_,q=(R-Z)/_,Y=Z===0?q:q+1,W=G.createImageData(N,_);let z=0;const j=x.data,u=W.data;for(let A=0;A<Y;A++){const F=A<q?_:Z;({srcPos:z}=(0,s.convertBlackAndWhiteToRGBA)({src:j,srcPos:z,dest:u,width:N,height:F,nonBlackColor:0})),G.putImageData(W,0,A*_)}}function p(G,x){const R=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const N of R)G[N]!==void 0&&(x[N]=G[N]);G.setLineDash!==void 0&&(x.setLineDash(G.getLineDash()),x.lineDashOffset=G.lineDashOffset)}function f(G){G.strokeStyle=G.fillStyle="#000000",G.fillRule="nonzero",G.globalAlpha=1,G.lineWidth=1,G.lineCap="butt",G.lineJoin="miter",G.miterLimit=10,G.globalCompositeOperation="source-over",G.font="10px sans-serif",G.setLineDash!==void 0&&(G.setLineDash([]),G.lineDashOffset=0),b.isNodeJS||(G.filter="none")}function h(G,x,R,N){const Z=G.length;for(let q=3;q<Z;q+=4){const Y=G[q];if(Y===0)G[q-3]=x,G[q-2]=R,G[q-1]=N;else if(Y<255){const W=255-Y;G[q-3]=G[q-3]*Y+x*W>>8,G[q-2]=G[q-2]*Y+R*W>>8,G[q-1]=G[q-1]*Y+N*W>>8}}}function w(G,x,R){const N=G.length,Z=1/255;for(let q=3;q<N;q+=4){const Y=R?R[G[q]]:G[q];x[q]=x[q]*Y*Z|0}}function D(G,x,R){const N=G.length;for(let Z=3;Z<N;Z+=4){const q=G[Z-3]*77+G[Z-2]*152+G[Z-1]*28;x[Z]=R?x[Z]*R[q>>8]>>8:x[Z]*q>>16}}function g(G,x,R,N,Z,q,Y,W,z,j,u){const A=!!q,F=A?q[0]:0,L=A?q[1]:0,k=A?q[2]:0;let U;Z==="Luminosity"?U=D:U=w;const V=Math.min(N,Math.ceil(1048576/R));for(let te=0;te<N;te+=V){const ae=Math.min(V,N-te),re=G.getImageData(W-j,te+(z-u),R,ae),se=x.getImageData(W,te+z,R,ae);A&&h(re.data,F,L,k),U(re.data,se.data,Y),x.putImageData(se,W,te+z)}}function H(G,x,R,N){const Z=N[0],q=N[1],Y=N[2]-Z,W=N[3]-q;Y===0||W===0||(g(x.context,R,Y,W,x.subtype,x.backdrop,x.transferMap,Z,q,x.offsetX,x.offsetY),G.save(),G.globalAlpha=1,G.globalCompositeOperation="source-over",G.setTransform(1,0,0,1,0,0),G.drawImage(R.canvas,0,0),G.restore())}function X(G,x){const R=i.Util.singularValueDecompose2dScale(G);R[0]=Math.fround(R[0]),R[1]=Math.fround(R[1]);const N=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return x!==void 0?x:R[0]<=N||R[1]<=N}const J=["butt","round","square"],ee=["miter","round","bevel"],ie={},he={},Ae=class Ae{constructor(x,R,N,Z,q,{optionalContentConfig:Y,markedContentStack:W=null},z,j){ne(this,de);ne(this,Ee);this.ctx=x,this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=R,this.objs=N,this.canvasFactory=Z,this.filterFactory=q,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=W||[],this.optionalContentConfig=Y,this.cachedCanvases=new d(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=z,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=j,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(x,R=null){return typeof x=="string"?x.startsWith("g_")?this.commonObjs.get(x):this.objs.get(x):R}beginDrawing({transform:x,viewport:R,transparency:N=!1,background:Z=null}){const q=this.ctx.canvas.width,Y=this.ctx.canvas.height,W=this.ctx.fillStyle;if(this.ctx.fillStyle=Z||"#ffffff",this.ctx.fillRect(0,0,q,Y),this.ctx.fillStyle=W,N){const z=this.cachedCanvases.getCanvas("transparent",q,Y);this.compositeCtx=this.ctx,this.transparentCanvas=z.canvas,this.ctx=z.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),f(this.ctx),x&&(this.ctx.transform(...x),this.outputScaleX=x[0],this.outputScaleY=x[0]),this.ctx.transform(...R.transform),this.viewportScale=R.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(x,R,N,Z){const q=x.argsArray,Y=x.fnArray;let W=R||0;const z=q.length;if(z===W)return W;const j=z-W>C&&typeof N=="function",u=j?Date.now()+O:0;let A=0;const F=this.commonObjs,L=this.objs;let k;for(;;){if(Z!==void 0&&W===Z.nextBreakPoint)return Z.breakIt(W,N),W;if(k=Y[W],k!==i.OPS.dependency)this[k].apply(this,q[W]);else for(const U of q[W]){const Q=U.startsWith("g_")?F:L;if(!Q.has(U))return Q.get(U,N),W}if(W++,W===z)return W;if(j&&++A>C){if(Date.now()>u)return N(),W;A=0}}}endDrawing(){oe(this,de,bt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const x of this._cachedBitmapsMap.values()){for(const R of x.values())typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement&&(R.width=R.height=0);x.clear()}this._cachedBitmapsMap.clear(),oe(this,Ee,vt).call(this)}_scaleImage(x,R){const N=x.width,Z=x.height;let q=Math.max(Math.hypot(R[0],R[1]),1),Y=Math.max(Math.hypot(R[2],R[3]),1),W=N,z=Z,j="prescale1",u,A;for(;q>2&&W>1||Y>2&&z>1;){let F=W,L=z;q>2&&W>1&&(F=W>=16384?Math.floor(W/2)-1||1:Math.ceil(W/2),q/=W/F),Y>2&&z>1&&(L=z>=16384?Math.floor(z/2)-1||1:Math.ceil(z)/2,Y/=z/L),u=this.cachedCanvases.getCanvas(j,F,L),A=u.context,A.clearRect(0,0,F,L),A.drawImage(x,0,0,W,z,0,0,F,L),x=u.canvas,W=F,z=L,j=j==="prescale1"?"prescale2":"prescale1"}return{img:x,paintWidth:W,paintHeight:z}}_createMaskCanvas(x){const R=this.ctx,{width:N,height:Z}=x,q=this.current.fillColor,Y=this.current.patternFill,W=(0,r.getCurrentTransform)(R);let z,j,u,A;if((x.bitmap||x.data)&&x.count>1){const pe=x.bitmap||x.data.buffer;j=JSON.stringify(Y?W:[W.slice(0,4),q]),z=this._cachedBitmapsMap.get(pe),z||(z=new Map,this._cachedBitmapsMap.set(pe,z));const Se=z.get(j);if(Se&&!Y){const _e=Math.round(Math.min(W[0],W[2])+W[4]),we=Math.round(Math.min(W[1],W[3])+W[5]);return{canvas:Se,offsetX:_e,offsetY:we}}u=Se}u||(A=this.cachedCanvases.getCanvas("maskCanvas",N,Z),o(A.context,x));let F=i.Util.transform(W,[1/N,0,0,-1/Z,0,0]);F=i.Util.transform(F,[1,0,0,1,0,-Z]);const L=i.Util.applyTransform([0,0],F),k=i.Util.applyTransform([N,Z],F),U=i.Util.normalizeRect([L[0],L[1],k[0],k[1]]),Q=Math.round(U[2]-U[0])||1,V=Math.round(U[3]-U[1])||1,te=this.cachedCanvases.getCanvas("fillCanvas",Q,V),ae=te.context,re=Math.min(L[0],k[0]),se=Math.min(L[1],k[1]);ae.translate(-re,-se),ae.transform(...F),u||(u=this._scaleImage(A.canvas,(0,r.getCurrentTransformInverse)(ae)),u=u.img,z&&Y&&z.set(j,u)),ae.imageSmoothingEnabled=X((0,r.getCurrentTransform)(ae),x.interpolate),T(ae,u,0,0,u.width,u.height,0,0,N,Z),ae.globalCompositeOperation="source-in";const fe=i.Util.transform((0,r.getCurrentTransformInverse)(ae),[1,0,0,1,-re,-se]);return ae.fillStyle=Y?q.getPattern(R,this,fe,a.PathType.FILL):q,ae.fillRect(0,0,N,Z),z&&!Y&&(this.cachedCanvases.delete("fillCanvas"),z.set(j,te.canvas)),{canvas:te.canvas,offsetX:Math.round(re),offsetY:Math.round(se)}}setLineWidth(x){x!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=x,this.ctx.lineWidth=x}setLineCap(x){this.ctx.lineCap=J[x]}setLineJoin(x){this.ctx.lineJoin=ee[x]}setMiterLimit(x){this.ctx.miterLimit=x}setDash(x,R){const N=this.ctx;N.setLineDash!==void 0&&(N.setLineDash(x),N.lineDashOffset=R)}setRenderingIntent(x){}setFlatness(x){}setGState(x){for(const[R,N]of x)switch(R){case"LW":this.setLineWidth(N);break;case"LC":this.setLineCap(N);break;case"LJ":this.setLineJoin(N);break;case"ML":this.setMiterLimit(N);break;case"D":this.setDash(N[0],N[1]);break;case"RI":this.setRenderingIntent(N);break;case"FL":this.setFlatness(N);break;case"Font":this.setFont(N[0],N[1]);break;case"CA":this.current.strokeAlpha=N;break;case"ca":this.current.fillAlpha=N,this.ctx.globalAlpha=N;break;case"BM":this.ctx.globalCompositeOperation=N;break;case"SMask":this.current.activeSMask=N?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(N);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const x=this.inSMaskMode;this.current.activeSMask&&!x?this.beginSMaskMode():!this.current.activeSMask&&x&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const x=this.ctx.canvas.width,R=this.ctx.canvas.height,N="smaskGroupAt"+this.groupLevel,Z=this.cachedCanvases.getCanvas(N,x,R);this.suspendedCtx=this.ctx,this.ctx=Z.context;const q=this.ctx;q.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),p(this.suspendedCtx,q),S(q,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),p(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(x){if(!this.current.activeSMask)return;x?(x[0]=Math.floor(x[0]),x[1]=Math.floor(x[1]),x[2]=Math.ceil(x[2]),x[3]=Math.ceil(x[3])):x=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const R=this.current.activeSMask,N=this.suspendedCtx;H(N,R,this.ctx,x),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(p(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const x=this.current;this.stateStack.push(x),this.current=x.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),p(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(x,R,N,Z,q,Y){this.ctx.transform(x,R,N,Z,q,Y),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(x,R,N){const Z=this.ctx,q=this.current;let Y=q.x,W=q.y,z,j;const u=(0,r.getCurrentTransform)(Z),A=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,F=A?N.slice(0):null;for(let L=0,k=0,U=x.length;L<U;L++)switch(x[L]|0){case i.OPS.rectangle:Y=R[k++],W=R[k++];const Q=R[k++],V=R[k++],te=Y+Q,ae=W+V;Z.moveTo(Y,W),Q===0||V===0?Z.lineTo(te,ae):(Z.lineTo(te,W),Z.lineTo(te,ae),Z.lineTo(Y,ae)),A||q.updateRectMinMax(u,[Y,W,te,ae]),Z.closePath();break;case i.OPS.moveTo:Y=R[k++],W=R[k++],Z.moveTo(Y,W),A||q.updatePathMinMax(u,Y,W);break;case i.OPS.lineTo:Y=R[k++],W=R[k++],Z.lineTo(Y,W),A||q.updatePathMinMax(u,Y,W);break;case i.OPS.curveTo:z=Y,j=W,Y=R[k+4],W=R[k+5],Z.bezierCurveTo(R[k],R[k+1],R[k+2],R[k+3],Y,W),q.updateCurvePathMinMax(u,z,j,R[k],R[k+1],R[k+2],R[k+3],Y,W,F),k+=6;break;case i.OPS.curveTo2:z=Y,j=W,Z.bezierCurveTo(Y,W,R[k],R[k+1],R[k+2],R[k+3]),q.updateCurvePathMinMax(u,z,j,Y,W,R[k],R[k+1],R[k+2],R[k+3],F),Y=R[k+2],W=R[k+3],k+=4;break;case i.OPS.curveTo3:z=Y,j=W,Y=R[k+2],W=R[k+3],Z.bezierCurveTo(R[k],R[k+1],Y,W,Y,W),q.updateCurvePathMinMax(u,z,j,R[k],R[k+1],Y,W,Y,W,F),k+=4;break;case i.OPS.closePath:Z.closePath();break}A&&q.updateScalingPathMinMax(u,F),q.setCurrentPoint(Y,W)}closePath(){this.ctx.closePath()}stroke(x=!0){const R=this.ctx,N=this.current.strokeColor;R.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof N=="object"&&(N!=null&&N.getPattern)?(R.save(),R.strokeStyle=N.getPattern(R,this,(0,r.getCurrentTransformInverse)(R),a.PathType.STROKE),this.rescaleAndStroke(!1),R.restore()):this.rescaleAndStroke(!0)),x&&this.consumePath(this.current.getClippedPathBoundingBox()),R.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(x=!0){const R=this.ctx,N=this.current.fillColor,Z=this.current.patternFill;let q=!1;Z&&(R.save(),R.fillStyle=N.getPattern(R,this,(0,r.getCurrentTransformInverse)(R),a.PathType.FILL),q=!0);const Y=this.current.getClippedPathBoundingBox();this.contentVisible&&Y!==null&&(this.pendingEOFill?(R.fill("evenodd"),this.pendingEOFill=!1):R.fill()),q&&R.restore(),x&&this.consumePath(Y)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ie}eoClip(){this.pendingClip=he}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const x=this.pendingTextPaths,R=this.ctx;if(x===void 0){R.beginPath();return}R.save(),R.beginPath();for(const N of x)R.setTransform(...N.transform),R.translate(N.x,N.y),N.addToPath(R,N.fontSize);R.restore(),R.clip(),R.beginPath(),delete this.pendingTextPaths}setCharSpacing(x){this.current.charSpacing=x}setWordSpacing(x){this.current.wordSpacing=x}setHScale(x){this.current.textHScale=x/100}setLeading(x){this.current.leading=-x}setFont(x,R){const N=this.commonObjs.get(x),Z=this.current;if(!N)throw new Error(`Can't find font for ${x}`);if(Z.fontMatrix=N.fontMatrix||i.FONT_IDENTITY_MATRIX,(Z.fontMatrix[0]===0||Z.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+x),R<0?(R=-R,Z.fontDirection=-1):Z.fontDirection=1,this.current.font=N,this.current.fontSize=R,N.isType3Font)return;const q=N.loadedName||"sans-serif";let Y="normal";N.black?Y="900":N.bold&&(Y="bold");const W=N.italic?"italic":"normal",z=`"${q}", ${N.fallbackName}`;let j=R;R<E?j=E:R>l&&(j=l),this.current.fontSizeScale=R/j,this.ctx.font=`${W} ${Y} ${j}px ${z}`}setTextRenderingMode(x){this.current.textRenderingMode=x}setTextRise(x){this.current.textRise=x}moveText(x,R){this.current.x=this.current.lineX+=x,this.current.y=this.current.lineY+=R}setLeadingMoveText(x,R){this.setLeading(-R),this.moveText(x,R)}setTextMatrix(x,R,N,Z,q,Y){this.current.textMatrix=[x,R,N,Z,q,Y],this.current.textMatrixScale=Math.hypot(x,R),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(x,R,N,Z){const q=this.ctx,Y=this.current,W=Y.font,z=Y.textRenderingMode,j=Y.fontSize/Y.fontSizeScale,u=z&i.TextRenderingMode.FILL_STROKE_MASK,A=!!(z&i.TextRenderingMode.ADD_TO_PATH_FLAG),F=Y.patternFill&&!W.missingFile;let L;(W.disableFontFace||A||F)&&(L=W.getPathGenerator(this.commonObjs,x)),W.disableFontFace||F?(q.save(),q.translate(R,N),q.beginPath(),L(q,j),Z&&q.setTransform(...Z),(u===i.TextRenderingMode.FILL||u===i.TextRenderingMode.FILL_STROKE)&&q.fill(),(u===i.TextRenderingMode.STROKE||u===i.TextRenderingMode.FILL_STROKE)&&q.stroke(),q.restore()):((u===i.TextRenderingMode.FILL||u===i.TextRenderingMode.FILL_STROKE)&&q.fillText(x,R,N),(u===i.TextRenderingMode.STROKE||u===i.TextRenderingMode.FILL_STROKE)&&q.strokeText(x,R,N)),A&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(q),x:R,y:N,fontSize:j,addToPath:L})}get isFontSubpixelAAEnabled(){const{context:x}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);x.scale(1.5,1),x.fillText("I",0,10);const R=x.getImageData(0,0,10,10).data;let N=!1;for(let Z=3;Z<R.length;Z+=4)if(R[Z]>0&&R[Z]<255){N=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",N)}showText(x){const R=this.current,N=R.font;if(N.isType3Font)return this.showType3Text(x);const Z=R.fontSize;if(Z===0)return;const q=this.ctx,Y=R.fontSizeScale,W=R.charSpacing,z=R.wordSpacing,j=R.fontDirection,u=R.textHScale*j,A=x.length,F=N.vertical,L=F?1:-1,k=N.defaultVMetrics,U=Z*R.fontMatrix[0],Q=R.textRenderingMode===i.TextRenderingMode.FILL&&!N.disableFontFace&&!R.patternFill;q.save(),q.transform(...R.textMatrix),q.translate(R.x,R.y+R.textRise),j>0?q.scale(u,-1):q.scale(u,1);let V;if(R.patternFill){q.save();const fe=R.fillColor.getPattern(q,this,(0,r.getCurrentTransformInverse)(q),a.PathType.FILL);V=(0,r.getCurrentTransform)(q),q.restore(),q.fillStyle=fe}let te=R.lineWidth;const ae=R.textMatrixScale;if(ae===0||te===0){const fe=R.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(fe===i.TextRenderingMode.STROKE||fe===i.TextRenderingMode.FILL_STROKE)&&(te=this.getSinglePixelWidth())}else te/=ae;if(Y!==1&&(q.scale(Y,Y),te/=Y),q.lineWidth=te,N.isInvalidPDFjsFont){const fe=[];let pe=0;for(const Se of x)fe.push(Se.unicode),pe+=Se.width;q.fillText(fe.join(""),0,0),R.x+=pe*U*u,q.restore(),this.compose();return}let re=0,se;for(se=0;se<A;++se){const fe=x[se];if(typeof fe=="number"){re+=L*fe*Z/1e3;continue}let pe=!1;const Se=(fe.isSpace?z:0)+W,_e=fe.fontChar,we=fe.accent;let K,be,ye=fe.width;if(F){const ue=fe.vmetric||k,B=-(fe.vmetric?ue[1]:ye*.5)*U,$=ue[2]*U;ye=ue?-ue[0]:ye,K=B/Y,be=(re+$)/Y}else K=re/Y,be=0;if(N.remeasure&&ye>0){const ue=q.measureText(_e).width*1e3/Z*Y;if(ye<ue&&this.isFontSubpixelAAEnabled){const B=ye/ue;pe=!0,q.save(),q.scale(B,1),K/=B}else ye!==ue&&(K+=(ye-ue)/2e3*Z/Y)}if(this.contentVisible&&(fe.isInFont||N.missingFile)){if(Q&&!we)q.fillText(_e,K,be);else if(this.paintChar(_e,K,be,V),we){const ue=K+Z*we.offset.x/Y,B=be-Z*we.offset.y/Y;this.paintChar(we.fontChar,ue,B,V)}}let Fe;F?Fe=ye*U-Se*j:Fe=ye*U+Se*j,re+=Fe,pe&&q.restore()}F?R.y-=re:R.x+=re*u,q.restore(),this.compose()}showType3Text(x){const R=this.ctx,N=this.current,Z=N.font,q=N.fontSize,Y=N.fontDirection,W=Z.vertical?1:-1,z=N.charSpacing,j=N.wordSpacing,u=N.textHScale*Y,A=N.fontMatrix||i.FONT_IDENTITY_MATRIX,F=x.length,L=N.textRenderingMode===i.TextRenderingMode.INVISIBLE;let k,U,Q,V;if(!(L||q===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,R.save(),R.transform(...N.textMatrix),R.translate(N.x,N.y),R.scale(u,Y),k=0;k<F;++k){if(U=x[k],typeof U=="number"){V=W*U*q/1e3,this.ctx.translate(V,0),N.x+=V*u;continue}const te=(U.isSpace?j:0)+z,ae=Z.charProcOperatorList[U.operatorListId];if(!ae){(0,i.warn)(`Type3 character "${U.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=U,this.save(),R.scale(q,q),R.transform(...A),this.executeOperatorList(ae),this.restore()),Q=i.Util.applyTransform([U.width,0],A)[0]*q+te,R.translate(Q,0),N.x+=Q*u}R.restore(),this.processingType3=null}}setCharWidth(x,R){}setCharWidthAndBounds(x,R,N,Z,q,Y){this.ctx.rect(N,Z,q-N,Y-Z),this.ctx.clip(),this.endPath()}getColorN_Pattern(x){let R;if(x[0]==="TilingPattern"){const N=x[1],Z=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),q={createCanvasGraphics:Y=>new Ae(Y,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};R=new a.TilingPattern(x,N,this.ctx,q,Z)}else R=this._getPattern(x[1],x[2]);return R}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(x,R,N){const Z=i.Util.makeHexColor(x,R,N);this.ctx.strokeStyle=Z,this.current.strokeColor=Z}setFillRGBColor(x,R,N){const Z=i.Util.makeHexColor(x,R,N);this.ctx.fillStyle=Z,this.current.fillColor=Z,this.current.patternFill=!1}_getPattern(x,R=null){let N;return this.cachedPatterns.has(x)?N=this.cachedPatterns.get(x):(N=(0,a.getShadingPattern)(this.getObject(x)),this.cachedPatterns.set(x,N)),R&&(N.matrix=R),N}shadingFill(x){if(!this.contentVisible)return;const R=this.ctx;this.save();const N=this._getPattern(x);R.fillStyle=N.getPattern(R,this,(0,r.getCurrentTransformInverse)(R),a.PathType.SHADING);const Z=(0,r.getCurrentTransformInverse)(R);if(Z){const q=R.canvas,Y=q.width,W=q.height,z=i.Util.applyTransform([0,0],Z),j=i.Util.applyTransform([0,W],Z),u=i.Util.applyTransform([Y,0],Z),A=i.Util.applyTransform([Y,W],Z),F=Math.min(z[0],j[0],u[0],A[0]),L=Math.min(z[1],j[1],u[1],A[1]),k=Math.max(z[0],j[0],u[0],A[0]),U=Math.max(z[1],j[1],u[1],A[1]);this.ctx.fillRect(F,L,k-F,U-L)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(x,R){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(x)&&x.length===6&&this.transform(...x),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),R)){const N=R[2]-R[0],Z=R[3]-R[1];this.ctx.rect(R[0],R[1],N,Z),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),R),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(x){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const R=this.ctx;x.isolated||(0,i.info)("TODO: Support non-isolated groups."),x.knockout&&(0,i.warn)("Knockout groups not supported.");const N=(0,r.getCurrentTransform)(R);if(x.matrix&&R.transform(...x.matrix),!x.bbox)throw new Error("Bounding box is required.");let Z=i.Util.getAxialAlignedBoundingBox(x.bbox,(0,r.getCurrentTransform)(R));const q=[0,0,R.canvas.width,R.canvas.height];Z=i.Util.intersect(Z,q)||[0,0,0,0];const Y=Math.floor(Z[0]),W=Math.floor(Z[1]);let z=Math.max(Math.ceil(Z[2])-Y,1),j=Math.max(Math.ceil(Z[3])-W,1),u=1,A=1;z>c&&(u=z/c,z=c),j>c&&(A=j/c,j=c),this.current.startNewPathAndClipBox([0,0,z,j]);let F="groupAt"+this.groupLevel;x.smask&&(F+="_smask_"+this.smaskCounter++%2);const L=this.cachedCanvases.getCanvas(F,z,j),k=L.context;k.scale(1/u,1/A),k.translate(-Y,-W),k.transform(...N),x.smask?this.smaskStack.push({canvas:L.canvas,context:k,offsetX:Y,offsetY:W,scaleX:u,scaleY:A,subtype:x.smask.subtype,backdrop:x.smask.backdrop,transferMap:x.smask.transferMap||null,startTransformInverse:null}):(R.setTransform(1,0,0,1,0,0),R.translate(Y,W),R.scale(u,A),R.save()),p(R,k),this.ctx=k,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(R),this.groupLevel++}endGroup(x){if(!this.contentVisible)return;this.groupLevel--;const R=this.ctx,N=this.groupStack.pop();if(this.ctx=N,this.ctx.imageSmoothingEnabled=!1,x.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Z=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Z);const q=i.Util.getAxialAlignedBoundingBox([0,0,R.canvas.width,R.canvas.height],Z);this.ctx.drawImage(R.canvas,0,0),this.ctx.restore(),this.compose(q)}}beginAnnotation(x,R,N,Z,q){if(oe(this,de,bt).call(this),f(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(R)&&R.length===4){const Y=R[2]-R[0],W=R[3]-R[1];if(q&&this.annotationCanvasMap){N=N.slice(),N[4]-=R[0],N[5]-=R[1],R=R.slice(),R[0]=R[1]=0,R[2]=Y,R[3]=W;const[z,j]=i.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:u}=this,A=Math.ceil(Y*this.outputScaleX*u),F=Math.ceil(W*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(A,F);const{canvas:L,context:k}=this.annotationCanvas;this.annotationCanvasMap.set(x,L),this.annotationCanvas.savedCtx=this.ctx,this.ctx=k,this.ctx.save(),this.ctx.setTransform(z,0,0,-j,0,W*j),f(this.ctx)}else f(this.ctx),this.ctx.rect(R[0],R[1],Y,W),this.ctx.clip(),this.endPath()}this.current=new P(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...N),this.transform(...Z)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),oe(this,Ee,vt).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(x){if(!this.contentVisible)return;const R=x.count;x=this.getObject(x.data,x),x.count=R;const N=this.ctx,Z=this.processingType3;if(Z&&(Z.compiled===void 0&&(Z.compiled=I(x)),Z.compiled)){Z.compiled(N);return}const q=this._createMaskCanvas(x),Y=q.canvas;N.save(),N.setTransform(1,0,0,1,0,0),N.drawImage(Y,q.offsetX,q.offsetY),N.restore(),this.compose()}paintImageMaskXObjectRepeat(x,R,N=0,Z=0,q,Y){if(!this.contentVisible)return;x=this.getObject(x.data,x);const W=this.ctx;W.save();const z=(0,r.getCurrentTransform)(W);W.transform(R,N,Z,q,0,0);const j=this._createMaskCanvas(x);W.setTransform(1,0,0,1,j.offsetX-z[4],j.offsetY-z[5]);for(let u=0,A=Y.length;u<A;u+=2){const F=i.Util.transform(z,[R,N,Z,q,Y[u],Y[u+1]]),[L,k]=i.Util.applyTransform([0,0],F);W.drawImage(j.canvas,L,k)}W.restore(),this.compose()}paintImageMaskXObjectGroup(x){if(!this.contentVisible)return;const R=this.ctx,N=this.current.fillColor,Z=this.current.patternFill;for(const q of x){const{data:Y,width:W,height:z,transform:j}=q,u=this.cachedCanvases.getCanvas("maskCanvas",W,z),A=u.context;A.save();const F=this.getObject(Y,q);o(A,F),A.globalCompositeOperation="source-in",A.fillStyle=Z?N.getPattern(A,this,(0,r.getCurrentTransformInverse)(R),a.PathType.FILL):N,A.fillRect(0,0,W,z),A.restore(),R.save(),R.transform(...j),R.scale(1,-1),T(R,u.canvas,0,0,W,z,0,-1,1,1),R.restore()}this.compose()}paintImageXObject(x){if(!this.contentVisible)return;const R=this.getObject(x);if(!R){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(R)}paintImageXObjectRepeat(x,R,N,Z){if(!this.contentVisible)return;const q=this.getObject(x);if(!q){(0,i.warn)("Dependent image isn't ready yet");return}const Y=q.width,W=q.height,z=[];for(let j=0,u=Z.length;j<u;j+=2)z.push({transform:[R,0,0,N,Z[j],Z[j+1]],x:0,y:0,w:Y,h:W});this.paintInlineImageXObjectGroup(q,z)}applyTransferMapsToCanvas(x){return this.current.transferMaps!=="none"&&(x.filter=this.current.transferMaps,x.drawImage(x.canvas,0,0),x.filter="none"),x.canvas}applyTransferMapsToBitmap(x){if(this.current.transferMaps==="none")return x.bitmap;const{bitmap:R,width:N,height:Z}=x,q=this.cachedCanvases.getCanvas("inlineImage",N,Z),Y=q.context;return Y.filter=this.current.transferMaps,Y.drawImage(R,0,0),Y.filter="none",q.canvas}paintInlineImageXObject(x){if(!this.contentVisible)return;const R=x.width,N=x.height,Z=this.ctx;this.save(),b.isNodeJS||(Z.filter="none"),Z.scale(1/R,-1/N);let q;if(x.bitmap)q=this.applyTransferMapsToBitmap(x);else if(typeof HTMLElement=="function"&&x instanceof HTMLElement||!x.data)q=x;else{const z=this.cachedCanvases.getCanvas("inlineImage",R,N).context;y(z,x),q=this.applyTransferMapsToCanvas(z)}const Y=this._scaleImage(q,(0,r.getCurrentTransformInverse)(Z));Z.imageSmoothingEnabled=X((0,r.getCurrentTransform)(Z),x.interpolate),T(Z,Y.img,0,0,Y.paintWidth,Y.paintHeight,0,-N,R,N),this.compose(),this.restore()}paintInlineImageXObjectGroup(x,R){if(!this.contentVisible)return;const N=this.ctx;let Z;if(x.bitmap)Z=x.bitmap;else{const q=x.width,Y=x.height,z=this.cachedCanvases.getCanvas("inlineImage",q,Y).context;y(z,x),Z=this.applyTransferMapsToCanvas(z)}for(const q of R)N.save(),N.transform(...q.transform),N.scale(1,-1),T(N,Z,q.x,q.y,q.w,q.h,0,-1,1,1),N.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(x){}markPointProps(x,R){}beginMarkedContent(x){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(x,R){x==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(R)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(x){const R=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(x);const N=this.ctx;this.pendingClip&&(R||(this.pendingClip===he?N.clip("evenodd"):N.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),N.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const x=(0,r.getCurrentTransform)(this.ctx);if(x[1]===0&&x[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(x[0]),Math.abs(x[3]));else{const R=Math.abs(x[0]*x[3]-x[2]*x[1]),N=Math.hypot(x[0],x[2]),Z=Math.hypot(x[1],x[3]);this._cachedGetSinglePixelWidth=Math.max(N,Z)/R}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:x}=this.current,R=(0,r.getCurrentTransform)(this.ctx);let N,Z;if(R[1]===0&&R[2]===0){const q=Math.abs(R[0]),Y=Math.abs(R[3]);if(x===0)N=1/q,Z=1/Y;else{const W=q*x,z=Y*x;N=W<1?1/W:1,Z=z<1?1/z:1}}else{const q=Math.abs(R[0]*R[3]-R[2]*R[1]),Y=Math.hypot(R[0],R[1]),W=Math.hypot(R[2],R[3]);if(x===0)N=W/q,Z=Y/q;else{const z=x*q;N=W>z?W/z:1,Z=Y>z?Y/z:1}}this._cachedScaleForStroking=[N,Z]}return this._cachedScaleForStroking}rescaleAndStroke(x){const{ctx:R}=this,{lineWidth:N}=this.current,[Z,q]=this.getScaleForStroking();if(R.lineWidth=N||1,Z===1&&q===1){R.stroke();return}let Y,W,z;x&&(Y=(0,r.getCurrentTransform)(R),W=R.getLineDash().slice(),z=R.lineDashOffset),R.scale(Z,q);const j=Math.max(Z,q);R.setLineDash(R.getLineDash().map(u=>u/j)),R.lineDashOffset/=j,R.stroke(),x&&(R.setTransform(...Y),R.setLineDash(W),R.lineDashOffset=z)}isContentVisible(){for(let x=this.markedContentStack.length-1;x>=0;x--)if(!this.markedContentStack[x].visible)return!1;return!0}};de=new WeakSet,bt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ee=new WeakSet,vt=function(){if(this.pageColors){const x=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(x!=="none"){const R=this.ctx.filter;this.ctx.filter=x,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=R}}};let le=Ae;t.CanvasGraphics=le;for(const G in i.OPS)le.prototype[G]!==void 0&&(le.prototype[i.OPS[G]]=le.prototype[G])},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=m;var i=n(1),r=n(6);const a={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=a;function s(T,I){if(!I)return;const P=I[2]-I[0],y=I[3]-I[1],o=new Path2D;o.rect(I[0],I[1],P,y),T.clip(o)}class b{constructor(){this.constructor===b&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class E extends b{constructor(I){super(),this._type=I[1],this._bbox=I[2],this._colorStops=I[3],this._p0=I[4],this._p1=I[5],this._r0=I[6],this._r1=I[7],this.matrix=null}_createGradient(I){let P;this._type==="axial"?P=I.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(P=I.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const y of this._colorStops)P.addColorStop(y[0],y[1]);return P}getPattern(I,P,y,o){let p;if(o===a.STROKE||o===a.FILL){const f=P.current.getClippedPathBoundingBox(o,(0,r.getCurrentTransform)(I))||[0,0,0,0],h=Math.ceil(f[2]-f[0])||1,w=Math.ceil(f[3]-f[1])||1,D=P.cachedCanvases.getCanvas("pattern",h,w,!0),g=D.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-f[0],-f[1]),y=i.Util.transform(y,[1,0,0,1,f[0],f[1]]),g.transform(...P.baseTransform),this.matrix&&g.transform(...this.matrix),s(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),p=I.createPattern(D.canvas,"no-repeat");const H=new DOMMatrix(y);p.setTransform(H)}else s(I,this._bbox),p=this._createGradient(I);return p}}function l(T,I,P,y,o,p,f,h){const w=I.coords,D=I.colors,g=T.data,H=T.width*4;let X;w[P+1]>w[y+1]&&(X=P,P=y,y=X,X=p,p=f,f=X),w[y+1]>w[o+1]&&(X=y,y=o,o=X,X=f,f=h,h=X),w[P+1]>w[y+1]&&(X=P,P=y,y=X,X=p,p=f,f=X);const J=(w[P]+I.offsetX)*I.scaleX,ee=(w[P+1]+I.offsetY)*I.scaleY,ie=(w[y]+I.offsetX)*I.scaleX,he=(w[y+1]+I.offsetY)*I.scaleY,le=(w[o]+I.offsetX)*I.scaleX,de=(w[o+1]+I.offsetY)*I.scaleY;if(ee>=de)return;const ve=D[p],Ee=D[p+1],Te=D[p+2],Ae=D[f],G=D[f+1],x=D[f+2],R=D[h],N=D[h+1],Z=D[h+2],q=Math.round(ee),Y=Math.round(de);let W,z,j,u,A,F,L,k;for(let U=q;U<=Y;U++){if(U<he){let re;U<ee?re=0:re=(ee-U)/(ee-he),W=J-(J-ie)*re,z=ve-(ve-Ae)*re,j=Ee-(Ee-G)*re,u=Te-(Te-x)*re}else{let re;U>de?re=1:he===de?re=0:re=(he-U)/(he-de),W=ie-(ie-le)*re,z=Ae-(Ae-R)*re,j=G-(G-N)*re,u=x-(x-Z)*re}let Q;U<ee?Q=0:U>de?Q=1:Q=(ee-U)/(ee-de),A=J-(J-le)*Q,F=ve-(ve-R)*Q,L=Ee-(Ee-N)*Q,k=Te-(Te-Z)*Q;const V=Math.round(Math.min(W,A)),te=Math.round(Math.max(W,A));let ae=H*U+V*4;for(let re=V;re<=te;re++)Q=(W-re)/(W-A),Q<0?Q=0:Q>1&&(Q=1),g[ae++]=z-(z-F)*Q|0,g[ae++]=j-(j-L)*Q|0,g[ae++]=u-(u-k)*Q|0,g[ae++]=255}}function c(T,I,P){const y=I.coords,o=I.colors;let p,f;switch(I.type){case"lattice":const h=I.verticesPerRow,w=Math.floor(y.length/h)-1,D=h-1;for(p=0;p<w;p++){let g=p*h;for(let H=0;H<D;H++,g++)l(T,P,y[g],y[g+1],y[g+h],o[g],o[g+1],o[g+h]),l(T,P,y[g+h+1],y[g+1],y[g+h],o[g+h+1],o[g+1],o[g+h])}break;case"triangles":for(p=0,f=y.length;p<f;p+=3)l(T,P,y[p],y[p+1],y[p+2],o[p],o[p+1],o[p+2]);break;default:throw new Error("illegal figure")}}class O extends b{constructor(I){super(),this._coords=I[2],this._colors=I[3],this._figures=I[4],this._bounds=I[5],this._bbox=I[7],this._background=I[8],this.matrix=null}_createMeshCanvas(I,P,y){const h=Math.floor(this._bounds[0]),w=Math.floor(this._bounds[1]),D=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-w,H=Math.min(Math.ceil(Math.abs(D*I[0]*1.1)),3e3),X=Math.min(Math.ceil(Math.abs(g*I[1]*1.1)),3e3),J=D/H,ee=g/X,ie={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-w,scaleX:1/J,scaleY:1/ee},he=H+2*2,le=X+2*2,de=y.getCanvas("mesh",he,le,!1),ve=de.context,Ee=ve.createImageData(H,X);if(P){const Ae=Ee.data;for(let G=0,x=Ae.length;G<x;G+=4)Ae[G]=P[0],Ae[G+1]=P[1],Ae[G+2]=P[2],Ae[G+3]=255}for(const Ae of this._figures)c(Ee,Ae,ie);return ve.putImageData(Ee,2,2),{canvas:de.canvas,offsetX:h-2*J,offsetY:w-2*ee,scaleX:J,scaleY:ee}}getPattern(I,P,y,o){s(I,this._bbox);let p;if(o===a.SHADING)p=i.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(I));else if(p=i.Util.singularValueDecompose2dScale(P.baseTransform),this.matrix){const h=i.Util.singularValueDecompose2dScale(this.matrix);p=[p[0]*h[0],p[1]*h[1]]}const f=this._createMeshCanvas(p,o===a.SHADING?null:this._background,P.cachedCanvases);return o!==a.SHADING&&(I.setTransform(...P.baseTransform),this.matrix&&I.transform(...this.matrix)),I.translate(f.offsetX,f.offsetY),I.scale(f.scaleX,f.scaleY),I.createPattern(f.canvas,"no-repeat")}}class C extends b{getPattern(){return"hotpink"}}function m(T){switch(T[0]){case"RadialAxial":return new E(T);case"Mesh":return new O(T);case"Dummy":return new C}throw new Error(`Unknown IR type: ${T[0]}`)}const _={COLORED:1,UNCOLORED:2},d=class d{constructor(I,P,y,o,p){this.operatorList=I[2],this.matrix=I[3]||[1,0,0,1,0,0],this.bbox=I[4],this.xstep=I[5],this.ystep=I[6],this.paintType=I[7],this.tilingType=I[8],this.color=P,this.ctx=y,this.canvasGraphicsFactory=o,this.baseTransform=p}createPatternCanvas(I){const P=this.operatorList,y=this.bbox,o=this.xstep,p=this.ystep,f=this.paintType,h=this.tilingType,w=this.color,D=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+h);const g=y[0],H=y[1],X=y[2],J=y[3],ee=i.Util.singularValueDecompose2dScale(this.matrix),ie=i.Util.singularValueDecompose2dScale(this.baseTransform),he=[ee[0]*ie[0],ee[1]*ie[1]],le=this.getSizeAndScale(o,this.ctx.canvas.width,he[0]),de=this.getSizeAndScale(p,this.ctx.canvas.height,he[1]),ve=I.cachedCanvases.getCanvas("pattern",le.size,de.size,!0),Ee=ve.context,Te=D.createCanvasGraphics(Ee);Te.groupLevel=I.groupLevel,this.setFillAndStrokeStyleToContext(Te,f,w);let Ae=g,G=H,x=X,R=J;return g<0&&(Ae=0,x+=Math.abs(g)),H<0&&(G=0,R+=Math.abs(H)),Ee.translate(-(le.scale*Ae),-(de.scale*G)),Te.transform(le.scale,0,0,de.scale,0,0),Ee.save(),this.clipBbox(Te,Ae,G,x,R),Te.baseTransform=(0,r.getCurrentTransform)(Te.ctx),Te.executeOperatorList(P),Te.endDrawing(),{canvas:ve.canvas,scaleX:le.scale,scaleY:de.scale,offsetX:Ae,offsetY:G}}getSizeAndScale(I,P,y){I=Math.abs(I);const o=Math.max(d.MAX_PATTERN_SIZE,P);let p=Math.ceil(I*y);return p>=o?p=o:y=p/I,{scale:y,size:p}}clipBbox(I,P,y,o,p){const f=o-P,h=p-y;I.ctx.rect(P,y,f,h),I.current.updateRectMinMax((0,r.getCurrentTransform)(I.ctx),[P,y,o,p]),I.clip(),I.endPath()}setFillAndStrokeStyleToContext(I,P,y){const o=I.ctx,p=I.current;switch(P){case _.COLORED:const f=this.ctx;o.fillStyle=f.fillStyle,o.strokeStyle=f.strokeStyle,p.fillColor=f.fillStyle,p.strokeColor=f.strokeStyle;break;case _.UNCOLORED:const h=i.Util.makeHexColor(y[0],y[1],y[2]);o.fillStyle=h,o.strokeStyle=h,p.fillColor=h,p.strokeColor=h;break;default:throw new i.FormatError(`Unsupported paint type: ${P}`)}}getPattern(I,P,y,o){let p=y;o!==a.SHADING&&(p=i.Util.transform(p,P.baseTransform),this.matrix&&(p=i.Util.transform(p,this.matrix)));const f=this.createPatternCanvas(P);let h=new DOMMatrix(p);h=h.translate(f.offsetX,f.offsetY),h=h.scale(1/f.scaleX,1/f.scaleY);const w=I.createPattern(f.canvas,"repeat");return w.setTransform(h),w}};De(d,"MAX_PATTERN_SIZE",3e3);let S=d;t.TilingPattern=S},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=a,t.convertToRGBA=r,t.grayToRGBA=b;var i=n(1);function r(E){switch(E.kind){case i.ImageKind.GRAYSCALE_1BPP:return a(E);case i.ImageKind.RGB_24BPP:return s(E)}return null}function a({src:E,srcPos:l=0,dest:c,width:O,height:C,nonBlackColor:m=4294967295,inverseDecode:_=!1}){const S=i.FeatureTest.isLittleEndian?4278190080:255,[d,T]=_?[m,S]:[S,m],I=O>>3,P=O&7,y=E.length;c=new Uint32Array(c.buffer);let o=0;for(let p=0;p<C;p++){for(const h=l+I;l<h;l++){const w=l<y?E[l]:255;c[o++]=w&128?T:d,c[o++]=w&64?T:d,c[o++]=w&32?T:d,c[o++]=w&16?T:d,c[o++]=w&8?T:d,c[o++]=w&4?T:d,c[o++]=w&2?T:d,c[o++]=w&1?T:d}if(P===0)continue;const f=l<y?E[l++]:255;for(let h=0;h<P;h++)c[o++]=f&1<<7-h?T:d}return{srcPos:l,destPos:o}}function s({src:E,srcPos:l=0,dest:c,destPos:O=0,width:C,height:m}){let _=0;const S=E.length>>2,d=new Uint32Array(E.buffer,l,S);if(i.FeatureTest.isLittleEndian){for(;_<S-2;_+=3,O+=4){const T=d[_],I=d[_+1],P=d[_+2];c[O]=T|4278190080,c[O+1]=T>>>24|I<<8|4278190080,c[O+2]=I>>>16|P<<16|4278190080,c[O+3]=P>>>8|4278190080}for(let T=_*4,I=E.length;T<I;T+=3)c[O++]=E[T]|E[T+1]<<8|E[T+2]<<16|4278190080}else{for(;_<S-2;_+=3,O+=4){const T=d[_],I=d[_+1],P=d[_+2];c[O]=T|255,c[O+1]=T<<24|I>>>8|255,c[O+2]=I<<16|P>>>16|255,c[O+3]=P<<8|255}for(let T=_*4,I=E.length;T<I;T+=3)c[O++]=E[T]<<24|E[T+1]<<16|E[T+2]<<8|255}return{srcPos:l,destPos:O}}function b(E,l){if(i.FeatureTest.isLittleEndian)for(let c=0,O=E.length;c<O;c++)l[c]=E[c]*65793|4278190080;else for(let c=0,O=E.length;c<O;c++)l[c]=E[c]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(e,t,n)=>{var E,zt,c,jt,C,ot;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var i=n(1);const r={UNKNOWN:0,DATA:1,ERROR:2},a={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function s(_){switch(_ instanceof Error||typeof _=="object"&&_!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),_.name){case"AbortException":return new i.AbortException(_.message);case"MissingPDFException":return new i.MissingPDFException(_.message);case"PasswordException":return new i.PasswordException(_.message,_.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(_.message,_.status);case"UnknownErrorException":return new i.UnknownErrorException(_.message,_.details);default:return new i.UnknownErrorException(_.message,_.toString())}}class b{constructor(S,d,T){ne(this,E);ne(this,c);ne(this,C);this.sourceName=S,this.targetName=d,this.comObj=T,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=I=>{const P=I.data;if(P.targetName!==this.sourceName)return;if(P.stream){oe(this,c,jt).call(this,P);return}if(P.callback){const o=P.callbackId,p=this.callbackCapabilities[o];if(!p)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],P.callback===r.DATA)p.resolve(P.data);else if(P.callback===r.ERROR)p.reject(s(P.reason));else throw new Error("Unexpected callback case");return}const y=this.actionHandler[P.action];if(!y)throw new Error(`Unknown action from worker: ${P.action}`);if(P.callbackId){const o=this.sourceName,p=P.sourceName;new Promise(function(f){f(y(P.data))}).then(function(f){T.postMessage({sourceName:o,targetName:p,callback:r.DATA,callbackId:P.callbackId,data:f})},function(f){T.postMessage({sourceName:o,targetName:p,callback:r.ERROR,callbackId:P.callbackId,reason:s(f)})});return}if(P.streamId){oe(this,E,zt).call(this,P);return}y(P.data)},T.addEventListener("message",this._onComObjOnMessage)}on(S,d){const T=this.actionHandler;if(T[S])throw new Error(`There is already an actionName called "${S}"`);T[S]=d}send(S,d,T){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:S,data:d},T)}sendWithPromise(S,d,T){const I=this.callbackId++,P=new i.PromiseCapability;this.callbackCapabilities[I]=P;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:S,callbackId:I,data:d},T)}catch(y){P.reject(y)}return P.promise}sendWithStream(S,d,T,I){const P=this.streamId++,y=this.sourceName,o=this.targetName,p=this.comObj;return new ReadableStream({start:f=>{const h=new i.PromiseCapability;return this.streamControllers[P]={controller:f,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:y,targetName:o,action:S,streamId:P,data:d,desiredSize:f.desiredSize},I),h.promise},pull:f=>{const h=new i.PromiseCapability;return this.streamControllers[P].pullCall=h,p.postMessage({sourceName:y,targetName:o,stream:a.PULL,streamId:P,desiredSize:f.desiredSize}),h.promise},cancel:f=>{(0,i.assert)(f instanceof Error,"cancel must have a valid reason");const h=new i.PromiseCapability;return this.streamControllers[P].cancelCall=h,this.streamControllers[P].isClosed=!0,p.postMessage({sourceName:y,targetName:o,stream:a.CANCEL,streamId:P,reason:s(f)}),h.promise}},T)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}E=new WeakSet,zt=function(S){const d=S.streamId,T=this.sourceName,I=S.sourceName,P=this.comObj,y=this,o=this.actionHandler[S.action],p={enqueue(f,h=1,w){if(this.isCancelled)return;const D=this.desiredSize;this.desiredSize-=h,D>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),P.postMessage({sourceName:T,targetName:I,stream:a.ENQUEUE,streamId:d,chunk:f},w)},close(){this.isCancelled||(this.isCancelled=!0,P.postMessage({sourceName:T,targetName:I,stream:a.CLOSE,streamId:d}),delete y.streamSinks[d])},error(f){(0,i.assert)(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,P.postMessage({sourceName:T,targetName:I,stream:a.ERROR,streamId:d,reason:s(f)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:S.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[d]=p,new Promise(function(f){f(o(S.data,p))}).then(function(){P.postMessage({sourceName:T,targetName:I,stream:a.START_COMPLETE,streamId:d,success:!0})},function(f){P.postMessage({sourceName:T,targetName:I,stream:a.START_COMPLETE,streamId:d,reason:s(f)})})},c=new WeakSet,jt=function(S){const d=S.streamId,T=this.sourceName,I=S.sourceName,P=this.comObj,y=this.streamControllers[d],o=this.streamSinks[d];switch(S.stream){case a.START_COMPLETE:S.success?y.startCall.resolve():y.startCall.reject(s(S.reason));break;case a.PULL_COMPLETE:S.success?y.pullCall.resolve():y.pullCall.reject(s(S.reason));break;case a.PULL:if(!o){P.postMessage({sourceName:T,targetName:I,stream:a.PULL_COMPLETE,streamId:d,success:!0});break}o.desiredSize<=0&&S.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=S.desiredSize,new Promise(function(p){var f;p((f=o.onPull)==null?void 0:f.call(o))}).then(function(){P.postMessage({sourceName:T,targetName:I,stream:a.PULL_COMPLETE,streamId:d,success:!0})},function(p){P.postMessage({sourceName:T,targetName:I,stream:a.PULL_COMPLETE,streamId:d,reason:s(p)})});break;case a.ENQUEUE:if((0,i.assert)(y,"enqueue should have stream controller"),y.isClosed)break;y.controller.enqueue(S.chunk);break;case a.CLOSE:if((0,i.assert)(y,"close should have stream controller"),y.isClosed)break;y.isClosed=!0,y.controller.close(),oe(this,C,ot).call(this,y,d);break;case a.ERROR:(0,i.assert)(y,"error should have stream controller"),y.controller.error(s(S.reason)),oe(this,C,ot).call(this,y,d);break;case a.CANCEL_COMPLETE:S.success?y.cancelCall.resolve():y.cancelCall.reject(s(S.reason)),oe(this,C,ot).call(this,y,d);break;case a.CANCEL:if(!o)break;new Promise(function(p){var f;p((f=o.onCancel)==null?void 0:f.call(o,s(S.reason)))}).then(function(){P.postMessage({sourceName:T,targetName:I,stream:a.CANCEL_COMPLETE,streamId:d,success:!0})},function(p){P.postMessage({sourceName:T,targetName:I,stream:a.CANCEL_COMPLETE,streamId:d,reason:s(p)})}),o.sinkCapability.reject(s(S.reason)),o.isCancelled=!0,delete this.streamSinks[d];break;default:throw new Error("Unexpected stream case")}},C=new WeakSet,ot=async function(S,d){var T,I,P;await Promise.allSettled([(T=S.startCall)==null?void 0:T.promise,(I=S.pullCall)==null?void 0:I.promise,(P=S.cancelCall)==null?void 0:P.promise]),delete this.streamControllers[d]},t.MessageHandler=b},(e,t,n)=>{var a,s;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var i=n(1);class r{constructor({parsedData:E,rawData:l}){ne(this,a,void 0);ne(this,s,void 0);ge(this,a,E),ge(this,s,l)}getRaw(){return M(this,s)}get(E){return M(this,a).get(E)??null}getAll(){return(0,i.objectFromMap)(M(this,a))}has(E){return M(this,a).has(E)}}a=new WeakMap,s=new WeakMap,t.Metadata=r},(e,t,n)=>{var E,l,c,O,C,m,At;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var i=n(1),r=n(8);const a=Symbol("INTERNAL");class s{constructor(d,T){ne(this,E,!0);this.name=d,this.intent=T}get visible(){return M(this,E)}_setVisible(d,T){d!==a&&(0,i.unreachable)("Internal method `_setVisible` called."),ge(this,E,T)}}E=new WeakMap;class b{constructor(d){ne(this,m);ne(this,l,null);ne(this,c,new Map);ne(this,O,null);ne(this,C,null);if(this.name=null,this.creator=null,d!==null){this.name=d.name,this.creator=d.creator,ge(this,C,d.order);for(const T of d.groups)M(this,c).set(T.id,new s(T.name,T.intent));if(d.baseState==="OFF")for(const T of M(this,c).values())T._setVisible(a,!1);for(const T of d.on)M(this,c).get(T)._setVisible(a,!0);for(const T of d.off)M(this,c).get(T)._setVisible(a,!1);ge(this,O,this.getHash())}}isVisible(d){if(M(this,c).size===0)return!0;if(!d)return(0,i.warn)("Optional content group not defined."),!0;if(d.type==="OCG")return M(this,c).has(d.id)?M(this,c).get(d.id).visible:((0,i.warn)(`Optional content group not found: ${d.id}`),!0);if(d.type==="OCMD"){if(d.expression)return oe(this,m,At).call(this,d.expression);if(!d.policy||d.policy==="AnyOn"){for(const T of d.ids){if(!M(this,c).has(T))return(0,i.warn)(`Optional content group not found: ${T}`),!0;if(M(this,c).get(T).visible)return!0}return!1}else if(d.policy==="AllOn"){for(const T of d.ids){if(!M(this,c).has(T))return(0,i.warn)(`Optional content group not found: ${T}`),!0;if(!M(this,c).get(T).visible)return!1}return!0}else if(d.policy==="AnyOff"){for(const T of d.ids){if(!M(this,c).has(T))return(0,i.warn)(`Optional content group not found: ${T}`),!0;if(!M(this,c).get(T).visible)return!0}return!1}else if(d.policy==="AllOff"){for(const T of d.ids){if(!M(this,c).has(T))return(0,i.warn)(`Optional content group not found: ${T}`),!0;if(M(this,c).get(T).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${d.policy}.`),!0}return(0,i.warn)(`Unknown group type ${d.type}.`),!0}setVisibility(d,T=!0){if(!M(this,c).has(d)){(0,i.warn)(`Optional content group not found: ${d}`);return}M(this,c).get(d)._setVisible(a,!!T),ge(this,l,null)}get hasInitialVisibility(){return this.getHash()===M(this,O)}getOrder(){return M(this,c).size?M(this,C)?M(this,C).slice():[...M(this,c).keys()]:null}getGroups(){return M(this,c).size>0?(0,i.objectFromMap)(M(this,c)):null}getGroup(d){return M(this,c).get(d)||null}getHash(){if(M(this,l)!==null)return M(this,l);const d=new r.MurmurHash3_64;for(const[T,I]of M(this,c))d.update(`${T}:${I.visible}`);return ge(this,l,d.hexdigest())}}l=new WeakMap,c=new WeakMap,O=new WeakMap,C=new WeakMap,m=new WeakSet,At=function(d){const T=d.length;if(T<2)return!0;const I=d[0];for(let P=1;P<T;P++){const y=d[P];let o;if(Array.isArray(y))o=oe(this,m,At).call(this,y);else if(M(this,c).has(y))o=M(this,c).get(y).visible;else return(0,i.warn)(`Optional content group not found: ${y}`),!0;switch(I){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return I==="And"},t.OptionalContentConfig=b},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var i=n(1),r=n(6);class a{constructor({length:l,initialData:c,progressiveDone:O=!1,contentDispositionFilename:C=null,disableRange:m=!1,disableStream:_=!1},S){if((0,i.assert)(S,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=O,this._contentDispositionFilename=C,(c==null?void 0:c.length)>0){const d=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=S,this._isStreamingSupported=!_,this._isRangeSupported=!m,this._contentLength=l,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((d,T)=>{this._onReceiveData({begin:d,chunk:T})}),this._pdfDataRangeTransport.addProgressListener((d,T)=>{this._onProgress({loaded:d,total:T})}),this._pdfDataRangeTransport.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:l,chunk:c}){const O=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;if(l===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(O):this._queuedChunks.push(O);else{const C=this._rangeReaders.some(function(m){return m._begin!==l?!1:(m._enqueue(O),!0)});(0,i.assert)(C,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var l;return((l=this._fullRequestReader)==null?void 0:l._loaded)??0}_onProgress(l){var c,O,C,m;l.total===void 0?(O=(c=this._rangeReaders[0])==null?void 0:c.onProgress)==null||O.call(c,{loaded:l.loaded}):(m=(C=this._fullRequestReader)==null?void 0:C.onProgress)==null||m.call(C,{loaded:l.loaded,total:l.total})}_onProgressiveDone(){var l;(l=this._fullRequestReader)==null||l.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(l){const c=this._rangeReaders.indexOf(l);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const l=this._queuedChunks;return this._queuedChunks=null,new s(this,l,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(l,c){if(c<=this._progressiveDataLength)return null;const O=new b(this,l,c);return this._pdfDataRangeTransport.requestDataRange(l,c),this._rangeReaders.push(O),O}cancelAllRequests(l){var c;(c=this._fullRequestReader)==null||c.cancel(l);for(const O of this._rangeReaders.slice(0))O.cancel(l);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=a;class s{constructor(l,c,O=!1,C=null){this._stream=l,this._done=O||!1,this._filename=(0,r.isPdfFile)(C)?C:null,this._queuedChunks=c||[],this._loaded=0;for(const m of this._queuedChunks)this._loaded+=m.byteLength;this._requests=[],this._headersReady=Promise.resolve(),l._fullRequestReader=this,this.onProgress=null}_enqueue(l){this._done||(this._requests.length>0?this._requests.shift().resolve({value:l,done:!1}):this._queuedChunks.push(l),this._loaded+=l.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const l=new i.PromiseCapability;return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class b{constructor(l,c,O){this._stream=l,this._begin=c,this._end=O,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(l){if(!this._done){if(this._requests.length===0)this._queuedChunk=l;else{this._requests.shift().resolve({value:l,done:!1});for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const l=new i.PromiseCapability;return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(r){const a=[],s={items:a,styles:Object.create(null)};function b(E){var O;if(!E)return;let l=null;const c=E.name;if(c==="#text")l=E.value;else if(n.shouldBuildText(c))(O=E==null?void 0:E.attributes)!=null&&O.textContent?l=E.attributes.textContent:E.value&&(l=E.value);else return;if(l!==null&&a.push({str:l}),!!E.children)for(const C of E.children)b(C)}return b(r),s}static shouldBuildText(r){return!(r==="textarea"||r==="input"||r==="option"||r==="select")}}t.XfaText=n},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var i=n(7);const r=function(l){return new Promise((c,O)=>{require$$0.readFile(l,(m,_)=>{if(m||!_){O(new Error(m));return}c(new Uint8Array(_))})})};class a extends i.BaseFilterFactory{}t.NodeFilterFactory=a;class s extends i.BaseCanvasFactory{_createCanvas(c,O){return require$$1.createCanvas(c,O)}}t.NodeCanvasFactory=s;class b extends i.BaseCMapReaderFactory{_fetchData(c,O){return r(c).then(C=>({cMapData:C,compressionType:O}))}}t.NodeCMapReaderFactory=b;class E extends i.BaseStandardFontDataFactory{_fetchData(c){return r(c)}}t.NodeStandardFontDataFactory=E},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var i=n(1),r=n(22);const a=require$$0,s=require$$2,b=require$$3,E=require$$4,l=/^file:\/\/\/[a-zA-Z]:\//;function c(P){const y=E.parse(P);return y.protocol==="file:"||y.host?y:/^[a-z]:[/\\]/i.test(P)?E.parse(`file:///${P}`):(y.host||(y.protocol="file:"),y)}class O{constructor(y){this.source=y,this.url=c(y.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&y.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var y;return((y=this._fullRequestReader)==null?void 0:y._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new T(this):new S(this),this._fullRequestReader}getRangeReader(y,o){if(o<=this._progressiveDataLength)return null;const p=this.isFsUrl?new I(this,y,o):new d(this,y,o);return this._rangeRequestReaders.push(p),p}cancelAllRequests(y){var o;(o=this._fullRequestReader)==null||o.cancel(y);for(const p of this._rangeRequestReaders.slice(0))p.cancel(y)}}t.PDFNodeStream=O;class C{constructor(y){this._url=y.url,this._done=!1,this._storedError=null,this.onProgress=null;const o=y.source;this._contentLength=o.length,this._loaded=0,this._filename=null,this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var p;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const y=this._readableStream.read();return y===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=y.length,(p=this.onProgress)==null||p.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(y).buffer,done:!1})}cancel(y){if(!this._readableStream){this._error(y);return}this._readableStream.destroy(y)}_error(y){this._storedError=y,this._readCapability.resolve()}_setReadableStream(y){this._readableStream=y,y.on("readable",()=>{this._readCapability.resolve()}),y.on("end",()=>{y.destroy(),this._done=!0,this._readCapability.resolve()}),y.on("error",o=>{this._error(o)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class m{constructor(y){this._url=y.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const o=y.source;this._isStreamingSupported=!o.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var p;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const y=this._readableStream.read();return y===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=y.length,(p=this.onProgress)==null||p.call(this,{loaded:this._loaded}),{value:new Uint8Array(y).buffer,done:!1})}cancel(y){if(!this._readableStream){this._error(y);return}this._readableStream.destroy(y)}_error(y){this._storedError=y,this._readCapability.resolve()}_setReadableStream(y){this._readableStream=y,y.on("readable",()=>{this._readCapability.resolve()}),y.on("end",()=>{y.destroy(),this._done=!0,this._readCapability.resolve()}),y.on("error",o=>{this._error(o)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function _(P,y){return{protocol:P.protocol,auth:P.auth,host:P.hostname,port:P.port,path:P.path,method:"GET",headers:y}}class S extends C{constructor(y){super(y);const o=p=>{if(p.statusCode===404){const D=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=D,this._headersCapability.reject(D);return}this._headersCapability.resolve(),this._setReadableStream(p);const f=D=>this._readableStream.headers[D.toLowerCase()],{allowRangeRequests:h,suggestedLength:w}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:y.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=w||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(f)};this._request=null,this._url.protocol==="http:"?this._request=s.request(_(this._url,y.httpHeaders),o):this._request=b.request(_(this._url,y.httpHeaders),o),this._request.on("error",p=>{this._storedError=p,this._headersCapability.reject(p)}),this._request.end()}}class d extends m{constructor(y,o,p){super(y),this._httpHeaders={};for(const h in y.httpHeaders){const w=y.httpHeaders[h];w!==void 0&&(this._httpHeaders[h]=w)}this._httpHeaders.Range=`bytes=${o}-${p-1}`;const f=h=>{if(h.statusCode===404){const w=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=w;return}this._setReadableStream(h)};this._request=null,this._url.protocol==="http:"?this._request=s.request(_(this._url,this._httpHeaders),f):this._request=b.request(_(this._url,this._httpHeaders),f),this._request.on("error",h=>{this._storedError=h}),this._request.end()}}class T extends C{constructor(y){super(y);let o=decodeURIComponent(this._url.path);l.test(this._url.href)&&(o=o.replace(/^\//,"")),a.lstat(o,(p,f)=>{if(p){p.code==="ENOENT"&&(p=new i.MissingPDFException(`Missing PDF "${o}".`)),this._storedError=p,this._headersCapability.reject(p);return}this._contentLength=f.size,this._setReadableStream(a.createReadStream(o)),this._headersCapability.resolve()})}}class I extends m{constructor(y,o,p){super(y);let f=decodeURIComponent(this._url.path);l.test(this._url.href)&&(f=f.replace(/^\//,"")),this._setReadableStream(a.createReadStream(f,{start:o,end:p-1}))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=E,t.extractFilenameFromHeader=b,t.validateRangeRequestCapabilities=s,t.validateResponseStatus=l;var i=n(1),r=n(23),a=n(6);function s({getResponseHeader:c,isHttp:O,rangeChunkSize:C,disableRange:m}){const _={allowRangeRequests:!1,suggestedLength:void 0},S=parseInt(c("Content-Length"),10);return!Number.isInteger(S)||(_.suggestedLength=S,S<=2*C)||m||!O||c("Accept-Ranges")!=="bytes"||(c("Content-Encoding")||"identity")!=="identity"||(_.allowRangeRequests=!0),_}function b(c){const O=c("Content-Disposition");if(O){let C=(0,r.getFilenameFromContentDispositionHeader)(O);if(C.includes("%"))try{C=decodeURIComponent(C)}catch{}if((0,a.isPdfFile)(C))return C}return null}function E(c,O){return c===404||c===0&&O.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+O+'".'):new i.UnexpectedResponseException(`Unexpected server response (${c}) while retrieving PDF "${O}".`,c)}function l(c){return c===200||c===206}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=r;var i=n(1);function r(a){let s=!0,b=E("filename\\*","i").exec(a);if(b){b=b[1];let S=C(b);return S=unescape(S),S=m(S),S=_(S),c(S)}if(b=O(a),b){const S=_(b);return c(S)}if(b=E("filename","i").exec(a),b){b=b[1];let S=C(b);return S=_(S),c(S)}function E(S,d){return new RegExp("(?:^|;)\\s*"+S+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function l(S,d){if(S){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const T=new TextDecoder(S,{fatal:!0}),I=(0,i.stringToBytes)(d);d=T.decode(I),s=!1}catch{}}return d}function c(S){return s&&/[\x80-\xff]/.test(S)&&(S=l("utf-8",S),s&&(S=l("iso-8859-1",S))),S}function O(S){const d=[];let T;const I=E("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(T=I.exec(S))!==null;){let[,y,o,p]=T;if(y=parseInt(y,10),y in d){if(y===0)break;continue}d[y]=[o,p]}const P=[];for(let y=0;y<d.length&&y in d;++y){let[o,p]=d[y];p=C(p),o&&(p=unescape(p),y===0&&(p=m(p))),P.push(p)}return P.join("")}function C(S){if(S.startsWith('"')){const d=S.slice(1).split('\\"');for(let T=0;T<d.length;++T){const I=d[T].indexOf('"');I!==-1&&(d[T]=d[T].slice(0,I),d.length=T+1),d[T]=d[T].replaceAll(/\\(.)/g,"$1")}S=d.join('"')}return S}function m(S){const d=S.indexOf("'");if(d===-1)return S;const T=S.slice(0,d),P=S.slice(d+1).replace(/^[^']*'/,"");return l(T,P)}function _(S){return!S.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(S)?S:S.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,T,I,P){if(I==="q"||I==="Q")return P=P.replaceAll("_"," "),P=P.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,o){return String.fromCharCode(parseInt(o,16))}),l(T,P);try{P=atob(P)}catch{}return l(T,P)})}return""}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var i=n(1),r=n(22);const a=200,s=206;function b(C){const m=C.response;return typeof m!="string"?m:(0,i.stringToBytes)(m).buffer}class E{constructor(m,_={}){this.url=m,this.isHttp=/^https?:/i.test(m),this.httpHeaders=this.isHttp&&_.httpHeaders||Object.create(null),this.withCredentials=_.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(m,_,S){const d={begin:m,end:_};for(const T in S)d[T]=S[T];return this.request(d)}requestFull(m){return this.request(m)}request(m){const _=new XMLHttpRequest,S=this.currXhrId++,d=this.pendingRequests[S]={xhr:_};_.open("GET",this.url),_.withCredentials=this.withCredentials;for(const T in this.httpHeaders){const I=this.httpHeaders[T];I!==void 0&&_.setRequestHeader(T,I)}return this.isHttp&&"begin"in m&&"end"in m?(_.setRequestHeader("Range",`bytes=${m.begin}-${m.end-1}`),d.expectedStatus=s):d.expectedStatus=a,_.responseType="arraybuffer",m.onError&&(_.onerror=function(T){m.onError(_.status)}),_.onreadystatechange=this.onStateChange.bind(this,S),_.onprogress=this.onProgress.bind(this,S),d.onHeadersReceived=m.onHeadersReceived,d.onDone=m.onDone,d.onError=m.onError,d.onProgress=m.onProgress,_.send(null),S}onProgress(m,_){var d;const S=this.pendingRequests[m];S&&((d=S.onProgress)==null||d.call(S,_))}onStateChange(m,_){var y,o,p;const S=this.pendingRequests[m];if(!S)return;const d=S.xhr;if(d.readyState>=2&&S.onHeadersReceived&&(S.onHeadersReceived(),delete S.onHeadersReceived),d.readyState!==4||!(m in this.pendingRequests))return;if(delete this.pendingRequests[m],d.status===0&&this.isHttp){(y=S.onError)==null||y.call(S,d.status);return}const T=d.status||a;if(!(T===a&&S.expectedStatus===s)&&T!==S.expectedStatus){(o=S.onError)==null||o.call(S,d.status);return}const P=b(d);if(T===s){const f=d.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);S.onDone({begin:parseInt(h[1],10),chunk:P})}else P?S.onDone({begin:0,chunk:P}):(p=S.onError)==null||p.call(S,d.status)}getRequestXhr(m){return this.pendingRequests[m].xhr}isPendingRequest(m){return m in this.pendingRequests}abortRequest(m){const _=this.pendingRequests[m].xhr;delete this.pendingRequests[m],_.abort()}}class l{constructor(m){this._source=m,this._manager=new E(m.url,{httpHeaders:m.httpHeaders,withCredentials:m.withCredentials}),this._rangeChunkSize=m.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(m){const _=this._rangeRequestReaders.indexOf(m);_>=0&&this._rangeRequestReaders.splice(_,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._manager,this._source),this._fullRequestReader}getRangeReader(m,_){const S=new O(this._manager,m,_);return S.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(S),S}cancelAllRequests(m){var _;(_=this._fullRequestReader)==null||_.cancel(m);for(const S of this._rangeRequestReaders.slice(0))S.cancel(m)}}t.PDFNetworkStream=l;class c{constructor(m,_){this._manager=m;const S={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_.url,this._fullRequestId=m.requestFull(S),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=_.disableRange||!1,this._contentLength=_.length,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const m=this._fullRequestId,_=this._manager.getRequestXhr(m),S=I=>_.getResponseHeader(I),{allowRangeRequests:d,suggestedLength:T}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});d&&(this._isRangeSupported=!0),this._contentLength=T||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(S),this._isRangeSupported&&this._manager.abortRequest(m),this._headersReceivedCapability.resolve()}_onDone(m){if(m&&(this._requests.length>0?this._requests.shift().resolve({value:m.chunk,done:!1}):this._cachedChunks.push(m.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(m){this._storedError=(0,r.createResponseStatusError)(m,this._url),this._headersReceivedCapability.reject(this._storedError);for(const _ of this._requests)_.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(m){var _;(_=this.onProgress)==null||_.call(this,{loaded:m.loaded,total:m.lengthComputable?m.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const m=new i.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0,this._headersReceivedCapability.reject(m);for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class O{constructor(m,_,S){this._manager=m;const d={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._requestId=m.requestRange(_,S,d),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var m;(m=this.onClosed)==null||m.call(this,this)}_onDone(m){const _=m.chunk;this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunk=_,this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(m){this._storedError=(0,r.createResponseStatusError)(m,this._url);for(const _ of this._requests)_.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(m){var _;this.isStreamingSupported||(_=this.onProgress)==null||_.call(this,{loaded:m.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const _=this._queuedChunk;return this._queuedChunk=null,{value:_,done:!1}}if(this._done)return{value:void 0,done:!0};const m=new i.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var i=n(1),r=n(22);function a(O,C,m){return{method:"GET",headers:O,signal:m.signal,mode:"cors",credentials:C?"include":"same-origin",redirect:"follow"}}function s(O){const C=new Headers;for(const m in O){const _=O[m];_!==void 0&&C.append(m,_)}return C}function b(O){return O instanceof Uint8Array?O.buffer:O instanceof ArrayBuffer?O:((0,i.warn)(`getArrayBuffer - unexpected data format: ${O}`),new Uint8Array(O).buffer)}class E{constructor(C){this.source=C,this.isHttp=/^https?:/i.test(C.url),this.httpHeaders=this.isHttp&&C.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var C;return((C=this._fullRequestReader)==null?void 0:C._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new l(this),this._fullRequestReader}getRangeReader(C,m){if(m<=this._progressiveDataLength)return null;const _=new c(this,C,m);return this._rangeRequestReaders.push(_),_}cancelAllRequests(C){var m;(m=this._fullRequestReader)==null||m.cancel(C);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(C)}}t.PDFFetchStream=E;class l{constructor(C){this._stream=C,this._reader=null,this._loaded=0,this._filename=null;const m=C.source;this._withCredentials=m.withCredentials||!1,this._contentLength=m.length,this._headersCapability=new i.PromiseCapability,this._disableRange=m.disableRange||!1,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._headers=s(this._stream.httpHeaders);const _=m.url;fetch(_,a(this._headers,this._withCredentials,this._abortController)).then(S=>{if(!(0,r.validateResponseStatus)(S.status))throw(0,r.createResponseStatusError)(S.status,_);this._reader=S.body.getReader(),this._headersCapability.resolve();const d=P=>S.headers.get(P),{allowRangeRequests:T,suggestedLength:I}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=I||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(d),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var _;await this._headersCapability.promise;const{value:C,done:m}=await this._reader.read();return m?{value:C,done:m}:(this._loaded+=C.byteLength,(_=this.onProgress)==null||_.call(this,{loaded:this._loaded,total:this._contentLength}),{value:b(C),done:!1})}cancel(C){var m;(m=this._reader)==null||m.cancel(C),this._abortController.abort()}}class c{constructor(C,m,_){this._stream=C,this._reader=null,this._loaded=0;const S=C.source;this._withCredentials=S.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!S.disableStream,this._abortController=new AbortController,this._headers=s(this._stream.httpHeaders),this._headers.append("Range",`bytes=${m}-${_-1}`);const d=S.url;fetch(d,a(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,r.validateResponseStatus)(T.status))throw(0,r.createResponseStatusError)(T.status,d);this._readCapability.resolve(),this._reader=T.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var _;await this._readCapability.promise;const{value:C,done:m}=await this._reader.read();return m?{value:C,done:m}:(this._loaded+=C.byteLength,(_=this.onProgress)==null||_.call(this,{loaded:this._loaded}),{value:b(C),done:!1})}cancel(C){var m;(m=this._reader)==null||m.cancel(C),this._abortController.abort()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=S,t.updateTextLayer=d;var i=n(1),r=n(6);const a=1e5,s=30,b=.8,E=new Map;function l(T,I){let P;if(I&&i.FeatureTest.isOffscreenCanvasSupported)P=new OffscreenCanvas(T,T).getContext("2d",{alpha:!1});else{const y=document.createElement("canvas");y.width=y.height=T,P=y.getContext("2d",{alpha:!1})}return P}function c(T,I){const P=E.get(T);if(P)return P;const y=l(s,I);y.font=`${s}px ${T}`;const o=y.measureText("");let p=o.fontBoundingBoxAscent,f=Math.abs(o.fontBoundingBoxDescent);if(p){const w=p/(p+f);return E.set(T,w),y.canvas.width=y.canvas.height=0,w}y.strokeStyle="red",y.clearRect(0,0,s,s),y.strokeText("g",0,0);let h=y.getImageData(0,0,s,s).data;f=0;for(let w=h.length-1-3;w>=0;w-=4)if(h[w]>0){f=Math.ceil(w/4/s);break}y.clearRect(0,0,s,s),y.strokeText("A",0,s),h=y.getImageData(0,0,s,s).data,p=0;for(let w=0,D=h.length;w<D;w+=4)if(h[w]>0){p=s-Math.floor(w/4/s);break}if(y.canvas.width=y.canvas.height=0,p){const w=p/(p+f);return E.set(T,w),w}return E.set(T,b),b}function O(T,I,P){const y=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:I.str!=="",hasEOL:I.hasEOL,fontSize:0};T._textDivs.push(y);const p=i.Util.transform(T._transform,I.transform);let f=Math.atan2(p[1],p[0]);const h=P[I.fontName];h.vertical&&(f+=Math.PI/2);const w=Math.hypot(p[2],p[3]),D=w*c(h.fontFamily,T._isOffscreenCanvasSupported);let g,H;f===0?(g=p[4],H=p[5]-D):(g=p[4]+D*Math.sin(f),H=p[5]-D*Math.cos(f));const X="calc(var(--scale-factor)*",J=y.style;T._container===T._rootContainer?(J.left=`${(100*g/T._pageWidth).toFixed(2)}%`,J.top=`${(100*H/T._pageHeight).toFixed(2)}%`):(J.left=`${X}${g.toFixed(2)}px)`,J.top=`${X}${H.toFixed(2)}px)`),J.fontSize=`${X}${w.toFixed(2)}px)`,J.fontFamily=h.fontFamily,o.fontSize=w,y.setAttribute("role","presentation"),y.textContent=I.str,y.dir=I.dir,T._fontInspectorEnabled&&(y.dataset.fontName=I.fontName),f!==0&&(o.angle=f*(180/Math.PI));let ee=!1;if(I.str.length>1)ee=!0;else if(I.str!==" "&&I.transform[0]!==I.transform[3]){const ie=Math.abs(I.transform[0]),he=Math.abs(I.transform[3]);ie!==he&&Math.max(ie,he)/Math.min(ie,he)>1.5&&(ee=!0)}ee&&(o.canvasWidth=h.vertical?I.height:I.width),T._textDivProperties.set(y,o),T._isReadableStream&&T._layoutText(y)}function C(T){const{div:I,scale:P,properties:y,ctx:o,prevFontSize:p,prevFontFamily:f}=T,{style:h}=I;let w="";if(y.canvasWidth!==0&&y.hasText){const{fontFamily:D}=h,{canvasWidth:g,fontSize:H}=y;(p!==H||f!==D)&&(o.font=`${H*P}px ${D}`,T.prevFontSize=H,T.prevFontFamily=D);const{width:X}=o.measureText(I.textContent);X>0&&(w=`scaleX(${g*P/X})`)}y.angle!==0&&(w=`rotate(${y.angle}deg) ${w}`),w.length>0&&(h.transform=w)}function m(T){if(T._canceled)return;const I=T._textDivs,P=T._capability;if(I.length>a){P.resolve();return}if(!T._isReadableStream)for(const o of I)T._layoutText(o);P.resolve()}class _{constructor({textContentSource:I,container:P,viewport:y,textDivs:o,textDivProperties:p,textContentItemsStr:f,isOffscreenCanvasSupported:h}){var X;this._textContentSource=I,this._isReadableStream=I instanceof ReadableStream,this._container=this._rootContainer=P,this._textDivs=o||[],this._textContentItemsStr=f||[],this._isOffscreenCanvasSupported=h,this._fontInspectorEnabled=!!((X=globalThis.FontInspector)!=null&&X.enabled),this._reader=null,this._textDivProperties=p||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:y.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:l(0,h)};const{pageWidth:w,pageHeight:D,pageX:g,pageY:H}=y.rawDims;this._transform=[1,0,0,-1,-g,H+D],this._pageWidth=w,this._pageHeight=D,(0,r.setLayerDimensions)(P,y),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(I,P){for(const y of I){if(y.str===void 0){if(y.type==="beginMarkedContentProps"||y.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),y.id!==null&&this._container.setAttribute("id",`${y.id}`),o.append(this._container)}else y.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(y.str),O(this,y,P)}}_layoutText(I){const P=this._layoutTextParams.properties=this._textDivProperties.get(I);if(this._layoutTextParams.div=I,C(this._layoutTextParams),P.hasText&&this._container.append(I),P.hasEOL){const y=document.createElement("br");y.setAttribute("role","presentation"),this._container.append(y)}}_render(){const I=new i.PromiseCapability;let P=Object.create(null);if(this._isReadableStream){const y=()=>{this._reader.read().then(({value:o,done:p})=>{if(p){I.resolve();return}Object.assign(P,o.styles),this._processItems(o.items,P),y()},I.reject)};this._reader=this._textContentSource.getReader(),y()}else if(this._textContentSource){const{items:y,styles:o}=this._textContentSource;this._processItems(y,o),I.resolve()}else throw new Error('No "textContentSource" parameter specified.');I.promise.then(()=>{P=null,m(this)},this._capability.reject)}}t.TextLayerRenderTask=_;function S(T){!T.textContentSource&&(T.textContent||T.textContentStream)&&((0,r.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),T.textContentSource=T.textContent||T.textContentStream);const{container:I,viewport:P}=T,y=getComputedStyle(I),o=y.getPropertyValue("visibility"),p=parseFloat(y.getPropertyValue("--scale-factor"));o==="visible"&&(!p||Math.abs(p-P.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const f=new _(T);return f._render(),f}function d({container:T,viewport:I,textDivs:P,textDivProperties:y,isOffscreenCanvasSupported:o,mustRotate:p=!0,mustRescale:f=!0}){if(p&&(0,r.setLayerDimensions)(T,{rotation:I.rotation}),f){const h=l(0,o),D={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h};for(const g of P)D.properties=y.get(g),D.div=g,C(D)}}},(e,t,n)=>{var l,c,O,C,m,_,S,d,T,yt,P,qt,o,Et,f,St;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var i=n(1),r=n(5),a=n(28),s=n(29),b=n(6);const w=class w{constructor(g){ne(this,T);ne(this,P);ne(this,o);ne(this,f);ne(this,l,void 0);ne(this,c,!1);ne(this,O,this.pointerup.bind(this));ne(this,C,this.pointerdown.bind(this));ne(this,m,new Map);ne(this,_,!1);ne(this,S,!1);ne(this,d,void 0);w._initialized||(w._initialized=!0,a.FreeTextEditor.initialize(g.l10n),s.InkEditor.initialize(g.l10n)),g.uiManager.registerEditorTypes([a.FreeTextEditor,s.InkEditor]),ge(this,d,g.uiManager),this.pageIndex=g.pageIndex,this.div=g.div,ge(this,l,g.accessibilityManager),M(this,d).addLayer(this)}get isEmpty(){return M(this,m).size===0}updateToolbar(g){M(this,d).updateToolbar(g)}updateMode(g=M(this,d).getMode()){oe(this,f,St).call(this),g===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),M(this,d).unselectAll(),g!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",g===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",g===i.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(g){if(!g&&M(this,d).getMode()!==i.AnnotationEditorType.INK)return;if(!g){for(const X of M(this,m).values())if(X.isEmpty()){X.setInBackground();return}}oe(this,o,Et).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(g){M(this,d).setEditingState(g)}addCommands(g){M(this,d).addCommands(g)}enable(){this.div.style.pointerEvents="auto";for(const g of M(this,m).values())g.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const g of M(this,m).values())g.disableEditing();oe(this,f,St).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(g){M(this,d).getActive()!==g&&M(this,d).setActiveEditor(g)}enableClick(){this.div.addEventListener("pointerdown",M(this,C)),this.div.addEventListener("pointerup",M(this,O))}disableClick(){this.div.removeEventListener("pointerdown",M(this,C)),this.div.removeEventListener("pointerup",M(this,O))}attach(g){M(this,m).set(g.id,g)}detach(g){var H;M(this,m).delete(g.id),(H=M(this,l))==null||H.removePointerInTextLayer(g.contentDiv)}remove(g){M(this,d).removeEditor(g),this.detach(g),g.div.style.display="none",setTimeout(()=>{g.div.style.display="",g.div.remove(),g.isAttachedToDOM=!1,document.activeElement===document.body&&M(this,d).focusMainContainer()},0),M(this,S)||this.addInkEditorIfNeeded(!1)}add(g){if(oe(this,T,yt).call(this,g),M(this,d).addEditor(g),this.attach(g),!g.isAttachedToDOM){const H=g.render();this.div.append(H),g.isAttachedToDOM=!0}this.moveEditorInDOM(g),g.onceAdded(),M(this,d).addToAnnotationStorage(g)}moveEditorInDOM(g){var H;(H=M(this,l))==null||H.moveElementInDOM(this.div,g.div,g.contentDiv,!0)}addOrRebuild(g){g.needsToBeRebuilt()?g.rebuild():this.add(g)}addANewEditor(g){const H=()=>{this.addOrRebuild(g)},X=()=>{g.remove()};this.addCommands({cmd:H,undo:X,mustExec:!0})}addUndoableEditor(g){const H=()=>{this.addOrRebuild(g)},X=()=>{g.remove()};this.addCommands({cmd:H,undo:X,mustExec:!1})}getNextId(){return M(this,d).getId()}deserialize(g){switch(g.annotationType){case i.AnnotationEditorType.FREETEXT:return a.FreeTextEditor.deserialize(g,this,M(this,d));case i.AnnotationEditorType.INK:return s.InkEditor.deserialize(g,this,M(this,d))}return null}setSelected(g){M(this,d).setSelected(g)}toggleSelected(g){M(this,d).toggleSelected(g)}isSelected(g){return M(this,d).isSelected(g)}unselect(g){M(this,d).unselect(g)}pointerup(g){const{isMac:H}=i.FeatureTest.platform;if(!(g.button!==0||g.ctrlKey&&H)&&g.target===this.div&&M(this,_)){if(ge(this,_,!1),!M(this,c)){ge(this,c,!0);return}oe(this,o,Et).call(this,g)}}pointerdown(g){const{isMac:H}=i.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&H||g.target!==this.div)return;ge(this,_,!0);const X=M(this,d).getActive();ge(this,c,!X||X.isEmpty())}drop(g){const H=g.dataTransfer.getData("text/plain"),X=M(this,d).getEditor(H);if(!X)return;g.preventDefault(),g.dataTransfer.dropEffect="move",oe(this,T,yt).call(this,X);const J=this.div.getBoundingClientRect(),ee=g.clientX-J.x,ie=g.clientY-J.y;X.translate(ee-X.startX,ie-X.startY),this.moveEditorInDOM(X),X.div.focus()}dragover(g){g.preventDefault()}destroy(){var g,H;((g=M(this,d).getActive())==null?void 0:g.parent)===this&&M(this,d).setActiveEditor(null);for(const X of M(this,m).values())(H=M(this,l))==null||H.removePointerInTextLayer(X.contentDiv),X.setParent(null),X.isAttachedToDOM=!1,X.div.remove();this.div=null,M(this,m).clear(),M(this,d).removeLayer(this)}render({viewport:g}){this.viewport=g,(0,b.setLayerDimensions)(this.div,g),(0,r.bindEvents)(this,this.div,["dragover","drop"]);for(const H of M(this,d).getEditors(this.pageIndex))this.add(H);this.updateMode()}update({viewport:g}){M(this,d).commitOrRemove(),this.viewport=g,(0,b.setLayerDimensions)(this.div,{rotation:g.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:g,pageHeight:H}=this.viewport.rawDims;return[g,H]}};l=new WeakMap,c=new WeakMap,O=new WeakMap,C=new WeakMap,m=new WeakMap,_=new WeakMap,S=new WeakMap,d=new WeakMap,T=new WeakSet,yt=function(g){var H;g.parent!==this&&(this.attach(g),(H=g.parent)==null||H.detach(g),g.setParent(this),g.div&&g.isAttachedToDOM&&(g.div.remove(),this.div.append(g.div)))},P=new WeakSet,qt=function(g){switch(M(this,d).getMode()){case i.AnnotationEditorType.FREETEXT:return new a.FreeTextEditor(g);case i.AnnotationEditorType.INK:return new s.InkEditor(g)}return null},o=new WeakSet,Et=function(g){const H=this.getNextId(),X=oe(this,P,qt).call(this,{parent:this,id:H,x:g.offsetX,y:g.offsetY,uiManager:M(this,d)});return X&&this.add(X),X},f=new WeakSet,St=function(){ge(this,S,!0);for(const g of M(this,m).values())g.isEmpty()&&g.remove();ge(this,S,!1)},De(w,"_initialized",!1);let E=w;t.AnnotationEditorLayer=E},(e,t,n)=>{var b,E,l,c,O,C,m,_,S,d,Wt,I,Zt,y,Gt,p,wt;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var i=n(1),r=n(5),a=n(4);const h=class h extends a.AnnotationEditor{constructor(g){super({...g,name:"freeTextEditor"});ne(this,d);ne(this,I);ne(this,y);ne(this,p);ne(this,b,this.editorDivBlur.bind(this));ne(this,E,this.editorDivFocus.bind(this));ne(this,l,this.editorDivInput.bind(this));ne(this,c,this.editorDivKeydown.bind(this));ne(this,O,void 0);ne(this,C,"");ne(this,m,`${this.id}-editor`);ne(this,_,!1);ne(this,S,void 0);ge(this,O,g.color||h._defaultColor||a.AnnotationEditor._defaultLineColor),ge(this,S,g.fontSize||h._defaultFontSize)}static initialize(g){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(X=>[X,g.get(X)]));const H=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(H.getPropertyValue("--freetext-padding"))}static updateDefaultParams(g,H){switch(g){case i.AnnotationEditorParamsType.FREETEXT_SIZE:h._defaultFontSize=H;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:h._defaultColor=H;break}}updateParams(g,H){switch(g){case i.AnnotationEditorParamsType.FREETEXT_SIZE:oe(this,d,Wt).call(this,H);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:oe(this,I,Zt).call(this,H);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,h._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,h._defaultColor||a.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,M(this,S)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,M(this,O)]]}getInitialTranslation(){const g=this.parentScale;return[-h._internalPadding*g,-(h._internalPadding+M(this,S))*g]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",M(this,c)),this.editorDiv.addEventListener("focus",M(this,E)),this.editorDiv.addEventListener("blur",M(this,b)),this.editorDiv.addEventListener("input",M(this,l)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",M(this,m)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",M(this,c)),this.editorDiv.removeEventListener("focus",M(this,E)),this.editorDiv.removeEventListener("blur",M(this,b)),this.editorDiv.removeEventListener("input",M(this,l)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(g){super.focusin(g),g.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),M(this,_)||(ge(this,_,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),ge(this,C,oe(this,y,Gt).call(this).trimEnd()),oe(this,p,wt).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(g){this.enableEditMode(),this.editorDiv.focus()}keydown(g){g.target===this.div&&g.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(g){h._keyboardManager.exec(this,g)}editorDivFocus(g){this.isEditing=!0}editorDivBlur(g){this.isEditing=!1}editorDivInput(g){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let g,H;this.width&&(g=this.x,H=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",M(this,m)),this.enableEditing(),h._l10nPromise.get("editor_free_text2_aria_label").then(J=>{var ee;return(ee=this.editorDiv)==null?void 0:ee.setAttribute("aria-label",J)}),h._l10nPromise.get("free_text2_default_content").then(J=>{var ee;return(ee=this.editorDiv)==null?void 0:ee.setAttribute("default-content",J)}),this.editorDiv.contentEditable=!0;const{style:X}=this.editorDiv;if(X.fontSize=`calc(${M(this,S)}px * var(--scale-factor))`,X.color=M(this,O),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[J,ee]=this.parentDimensions;this.setAt(g*J,H*ee,this.width*J,this.height*ee);for(const ie of M(this,C).split(`
`)){const he=document.createElement("div");he.append(ie?document.createTextNode(ie):document.createElement("br")),this.editorDiv.append(he)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(g,H,X){const J=super.deserialize(g,H,X);return ge(J,S,g.fontSize),ge(J,O,i.Util.makeHexColor(...g.color)),ge(J,C,g.value),J}serialize(){if(this.isEmpty())return null;const g=h._internalPadding*this.parentScale,H=this.getRect(g,g),X=a.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:M(this,O));return{annotationType:i.AnnotationEditorType.FREETEXT,color:X,fontSize:M(this,S),value:M(this,C),pageIndex:this.pageIndex,rect:H,rotation:this.rotation}}};b=new WeakMap,E=new WeakMap,l=new WeakMap,c=new WeakMap,O=new WeakMap,C=new WeakMap,m=new WeakMap,_=new WeakMap,S=new WeakMap,d=new WeakSet,Wt=function(g){const H=J=>{this.editorDiv.style.fontSize=`calc(${J}px * var(--scale-factor))`,this.translate(0,-(J-M(this,S))*this.parentScale),ge(this,S,J),oe(this,p,wt).call(this)},X=M(this,S);this.addCommands({cmd:()=>{H(g)},undo:()=>{H(X)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},I=new WeakSet,Zt=function(g){const H=M(this,O);this.addCommands({cmd:()=>{ge(this,O,this.editorDiv.style.color=g)},undo:()=>{ge(this,O,this.editorDiv.style.color=H)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},y=new WeakSet,Gt=function(){const g=this.editorDiv.getElementsByTagName("div");if(g.length===0)return this.editorDiv.innerText;const H=[];for(const X of g)H.push(X.innerText.replace(/\r\n?|\n/,""));return H.join(`
`)},p=new WeakSet,wt=function(){const[g,H]=this.parentDimensions;let X;if(this.isAttachedToDOM)X=this.div.getBoundingClientRect();else{const{currentLayer:J,div:ee}=this,ie=ee.style.display;ee.style.display="hidden",J.div.append(this.div),X=ee.getBoundingClientRect(),ee.remove(),ee.style.display=ie}this.width=X.width/g,this.height=X.height/H},De(h,"_freeTextDefaultContent",""),De(h,"_l10nPromise"),De(h,"_internalPadding",0),De(h,"_defaultColor",null),De(h,"_defaultFontSize",10),De(h,"_keyboardManager",new r.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],h.prototype.commitOrRemove]])),De(h,"_type","freetext");let s=h;t.FreeTextEditor=s},(e,t,n)=>{var l,c,O,C,m,_,S,d,T,I,P,y,o,p,f,Xt,w,Vt,g,Yt,X,Kt,ee,Tt,he,Jt,de,Qt,Ee,en,Ae,Ge,x,xt,N,lt,q,ct,W,Qe,j,Ct,A,ht,L,Rt,U,tn,V,nn,ae,rn,se,kt,pe,ut,_e,et,K,Mt;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return a.fitCurve}});var i=n(1),r=n(4),a=n(30),s=n(5);const b=16,ye=class ye extends r.AnnotationEditor{constructor(B){super({...B,name:"inkEditor"});ne(this,f);ne(this,w);ne(this,g);ne(this,X);ne(this,ee);ne(this,he);ne(this,de);ne(this,Ee);ne(this,Ae);ne(this,x);ne(this,N);ne(this,q);ne(this,W);ne(this,j);ne(this,A);ne(this,U);ne(this,V);ne(this,ae);ne(this,se);ne(this,pe);ne(this,_e);ne(this,K);ne(this,l,0);ne(this,c,0);ne(this,O,0);ne(this,C,this.canvasPointermove.bind(this));ne(this,m,this.canvasPointerleave.bind(this));ne(this,_,this.canvasPointerup.bind(this));ne(this,S,this.canvasPointerdown.bind(this));ne(this,d,!1);ne(this,T,!1);ne(this,I,null);ne(this,P,null);ne(this,y,0);ne(this,o,0);ne(this,p,null);this.color=B.color||null,this.thickness=B.thickness||null,this.opacity=B.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(B){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map($=>[$,B.get($)]))}static updateDefaultParams(B,$){switch(B){case i.AnnotationEditorParamsType.INK_THICKNESS:ye._defaultThickness=$;break;case i.AnnotationEditorParamsType.INK_COLOR:ye._defaultColor=$;break;case i.AnnotationEditorParamsType.INK_OPACITY:ye._defaultOpacity=$/100;break}}updateParams(B,$){switch(B){case i.AnnotationEditorParamsType.INK_THICKNESS:oe(this,f,Xt).call(this,$);break;case i.AnnotationEditorParamsType.INK_COLOR:oe(this,w,Vt).call(this,$);break;case i.AnnotationEditorParamsType.INK_OPACITY:oe(this,g,Yt).call(this,$);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,ye._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,ye._defaultColor||r.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(ye._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ye._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||ye._defaultColor||r.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ye._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(oe(this,N,lt).call(this),oe(this,q,ct).call(this)),this.isAttachedToDOM||(this.parent.add(this),oe(this,W,Qe).call(this)),oe(this,_e,et).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,M(this,P).disconnect(),ge(this,P,null),super.remove())}setParent(B){!this.parent&&B?this._uiManager.removeShouldRescale(this):this.parent&&B===null&&this._uiManager.addShouldRescale(this),super.setParent(B)}onScaleChanging(){const[B,$]=this.parentDimensions,ce=this.width*B,me=this.height*$;this.setDimensions(ce,me)}enableEditMode(){M(this,d)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",M(this,S)),this.canvas.addEventListener("pointerup",M(this,_)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",M(this,S)),this.canvas.removeEventListener("pointerup",M(this,_)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){M(this,d)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ge(this,d,!0),this.div.classList.add("disabled"),oe(this,_e,et).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(B){super.focusin(B),this.enableEditMode()}canvasPointerdown(B){B.button!==0||!this.isInEditMode()||M(this,d)||(this.setInForeground(),B.type!=="mouse"&&this.div.focus(),B.stopPropagation(),this.canvas.addEventListener("pointerleave",M(this,m)),this.canvas.addEventListener("pointermove",M(this,C)),oe(this,he,Jt).call(this,B.offsetX,B.offsetY))}canvasPointermove(B){B.stopPropagation(),oe(this,de,Qt).call(this,B.offsetX,B.offsetY)}canvasPointerup(B){B.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(B.stopPropagation(),oe(this,x,xt).call(this,B),this.setInBackground())}canvasPointerleave(B){oe(this,x,xt).call(this,B),this.setInBackground()}render(){if(this.div)return this.div;let B,$;this.width&&(B=this.x,$=this.y),super.render(),ye._l10nPromise.get("editor_ink2_aria_label").then(Me=>{var ke;return(ke=this.div)==null?void 0:ke.setAttribute("aria-label",Me)});const[ce,me,xe,Re]=oe(this,X,Kt).call(this);if(this.setAt(ce,me,0,0),this.setDims(xe,Re),oe(this,N,lt).call(this),this.width){const[Me,ke]=this.parentDimensions;this.setAt(B*Me,$*ke,this.width*Me,this.height*ke),ge(this,T,!0),oe(this,W,Qe).call(this),this.setDims(this.width*Me,this.height*ke),oe(this,Ae,Ge).call(this),oe(this,K,Mt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return oe(this,q,ct).call(this),this.div}setDimensions(B,$){const ce=Math.round(B),me=Math.round($);if(M(this,y)===ce&&M(this,o)===me)return;ge(this,y,ce),ge(this,o,me),this.canvas.style.visibility="hidden",M(this,l)&&Math.abs(M(this,l)-B/$)>.01&&($=Math.ceil(B/M(this,l)),this.setDims(B,$));const[xe,Re]=this.parentDimensions;this.width=B/xe,this.height=$/Re,M(this,d)&&oe(this,j,Ct).call(this,B,$),oe(this,W,Qe).call(this),oe(this,Ae,Ge).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(B,$,ce){var Oe,Le;const me=super.deserialize(B,$,ce);me.thickness=B.thickness,me.color=i.Util.makeHexColor(...B.color),me.opacity=B.opacity;const[xe,Re]=me.pageDimensions,Me=me.width*xe,ke=me.height*Re,Ie=me.parentScale,Ce=B.thickness/2;ge(me,l,Me/ke),ge(me,d,!0),ge(me,y,Math.round(Me)),ge(me,o,Math.round(ke));for(const{bezier:Pe}of B.paths){const $e=[];me.paths.push($e);let He=Ie*(Pe[0]-Ce),ze=Ie*(ke-Pe[1]-Ce);for(let Be=2,Ue=Pe.length;Be<Ue;Be+=6){const We=Ie*(Pe[Be]-Ce),Xe=Ie*(ke-Pe[Be+1]-Ce),it=Ie*(Pe[Be+2]-Ce),rt=Ie*(ke-Pe[Be+3]-Ce),It=Ie*(Pe[Be+4]-Ce),Ot=Ie*(ke-Pe[Be+5]-Ce);$e.push([[He,ze],[We,Xe],[it,rt],[It,Ot]]),He=It,ze=Ot}const qe=oe(this,L,Rt).call(this,$e);me.bezierPath2D.push(qe)}const Ne=oe(Oe=me,se,kt).call(Oe);return ge(me,O,Math.max(b,Ne[2]-Ne[0])),ge(me,c,Math.max(b,Ne[3]-Ne[1])),oe(Le=me,j,Ct).call(Le,Me,ke),me}serialize(){if(this.isEmpty())return null;const B=this.getRect(0,0),$=this.rotation%180===0?B[3]-B[1]:B[2]-B[0],ce=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:ce,thickness:this.thickness,opacity:this.opacity,paths:oe(this,U,tn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,$),pageIndex:this.pageIndex,rect:B,rotation:this.rotation}}};l=new WeakMap,c=new WeakMap,O=new WeakMap,C=new WeakMap,m=new WeakMap,_=new WeakMap,S=new WeakMap,d=new WeakMap,T=new WeakMap,I=new WeakMap,P=new WeakMap,y=new WeakMap,o=new WeakMap,p=new WeakMap,f=new WeakSet,Xt=function(B){const $=this.thickness;this.addCommands({cmd:()=>{this.thickness=B,oe(this,_e,et).call(this)},undo:()=>{this.thickness=$,oe(this,_e,et).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,Vt=function(B){const $=this.color;this.addCommands({cmd:()=>{this.color=B,oe(this,Ae,Ge).call(this)},undo:()=>{this.color=$,oe(this,Ae,Ge).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,Yt=function(B){B/=100;const $=this.opacity;this.addCommands({cmd:()=>{this.opacity=B,oe(this,Ae,Ge).call(this)},undo:()=>{this.opacity=$,oe(this,Ae,Ge).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},X=new WeakSet,Kt=function(){const{parentRotation:B,parentDimensions:[$,ce]}=this;switch(B){case 90:return[0,ce,ce,$];case 180:return[$,ce,$,ce];case 270:return[$,0,ce,$];default:return[0,0,$,ce]}},ee=new WeakSet,Tt=function(){const{ctx:B,color:$,opacity:ce,thickness:me,parentScale:xe,scaleFactor:Re}=this;B.lineWidth=me*xe/Re,B.lineCap="round",B.lineJoin="round",B.miterLimit=10,B.strokeStyle=`${$}${(0,s.opacityToHex)(ce)}`},he=new WeakSet,Jt=function(B,$){this.isEditing=!0,M(this,T)||(ge(this,T,!0),oe(this,W,Qe).call(this),this.thickness||(this.thickness=ye._defaultThickness),this.color||(this.color=ye._defaultColor||r.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ye._defaultOpacity)),this.currentPath.push([B,$]),ge(this,I,null),oe(this,ee,Tt).call(this),this.ctx.beginPath(),this.ctx.moveTo(B,$),ge(this,p,()=>{M(this,p)&&(M(this,I)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):oe(this,Ae,Ge).call(this),this.ctx.lineTo(...M(this,I)),ge(this,I,null),this.ctx.stroke()),window.requestAnimationFrame(M(this,p)))}),window.requestAnimationFrame(M(this,p))},de=new WeakSet,Qt=function(B,$){const[ce,me]=this.currentPath.at(-1);B===ce&&$===me||(this.currentPath.push([B,$]),ge(this,I,[B,$]))},Ee=new WeakSet,en=function(B,$){var Ie;this.ctx.closePath(),ge(this,p,null),B=Math.min(Math.max(B,0),this.canvas.width),$=Math.min(Math.max($,0),this.canvas.height);const[ce,me]=this.currentPath.at(-1);(B!==ce||$!==me)&&this.currentPath.push([B,$]);let xe;if(this.currentPath.length!==1)xe=(0,a.fitCurve)(this.currentPath,30,null);else{const Ce=[B,$];xe=[[Ce,Ce.slice(),Ce.slice(),Ce]]}const Re=oe(Ie=ye,L,Rt).call(Ie,xe);this.currentPath.length=0;const Me=()=>{this.paths.push(xe),this.bezierPath2D.push(Re),this.rebuild()},ke=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(oe(this,N,lt).call(this),oe(this,q,ct).call(this)),oe(this,_e,et).call(this))};this.addCommands({cmd:Me,undo:ke,mustExec:!0})},Ae=new WeakSet,Ge=function(){if(this.isEmpty()){oe(this,A,ht).call(this);return}oe(this,ee,Tt).call(this);const{canvas:B,ctx:$}=this;$.setTransform(1,0,0,1,0,0),$.clearRect(0,0,B.width,B.height),oe(this,A,ht).call(this);for(const ce of this.bezierPath2D)$.stroke(ce)},x=new WeakSet,xt=function(B){oe(this,Ee,en).call(this,B.offsetX,B.offsetY),this.canvas.removeEventListener("pointerleave",M(this,m)),this.canvas.removeEventListener("pointermove",M(this,C)),this.addToAnnotationStorage()},N=new WeakSet,lt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",ye._l10nPromise.get("editor_ink_canvas_aria_label").then(B=>{var $;return($=this.canvas)==null?void 0:$.setAttribute("aria-label",B)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},q=new WeakSet,ct=function(){ge(this,P,new ResizeObserver(B=>{const $=B[0].contentRect;$.width&&$.height&&this.setDimensions($.width,$.height)})),M(this,P).observe(this.div)},W=new WeakSet,Qe=function(){if(!M(this,T))return;const[B,$]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*B),this.canvas.height=Math.ceil(this.height*$),oe(this,A,ht).call(this)},j=new WeakSet,Ct=function(B,$){const ce=oe(this,pe,ut).call(this),me=(B-ce)/M(this,O),xe=($-ce)/M(this,c);this.scaleFactor=Math.min(me,xe)},A=new WeakSet,ht=function(){const B=oe(this,pe,ut).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+B,this.translationY*this.scaleFactor+B)},L=new WeakSet,Rt=function(B){const $=new Path2D;for(let ce=0,me=B.length;ce<me;ce++){const[xe,Re,Me,ke]=B[ce];ce===0&&$.moveTo(...xe),$.bezierCurveTo(Re[0],Re[1],Me[0],Me[1],ke[0],ke[1])}return $},U=new WeakSet,tn=function(B,$,ce,me){const Re=[],Me=this.thickness/2;let ke,Ie;for(const Ce of this.paths){ke=[],Ie=[];for(let Ne=0,Oe=Ce.length;Ne<Oe;Ne++){const[Le,Pe,$e,He]=Ce[Ne],ze=B*(Le[0]+$)+Me,qe=me-B*(Le[1]+ce)-Me,Be=B*(Pe[0]+$)+Me,Ue=me-B*(Pe[1]+ce)-Me,We=B*($e[0]+$)+Me,Xe=me-B*($e[1]+ce)-Me,it=B*(He[0]+$)+Me,rt=me-B*(He[1]+ce)-Me;Ne===0&&(ke.push(ze,qe),Ie.push(ze,qe)),ke.push(Be,Ue,We,Xe,it,rt),oe(this,V,nn).call(this,ze,qe,Be,Ue,We,Xe,it,rt,4,Ie)}Re.push({bezier:ke,points:Ie})}return Re},V=new WeakSet,nn=function(B,$,ce,me,xe,Re,Me,ke,Ie,Ce){if(oe(this,ae,rn).call(this,B,$,ce,me,xe,Re,Me,ke)){Ce.push(Me,ke);return}for(let Ne=1;Ne<Ie-1;Ne++){const Oe=Ne/Ie,Le=1-Oe;let Pe=Oe*B+Le*ce,$e=Oe*$+Le*me,He=Oe*ce+Le*xe,ze=Oe*me+Le*Re;const qe=Oe*xe+Le*Me,Be=Oe*Re+Le*ke;Pe=Oe*Pe+Le*He,$e=Oe*$e+Le*ze,He=Oe*He+Le*qe,ze=Oe*ze+Le*Be,Pe=Oe*Pe+Le*He,$e=Oe*$e+Le*ze,Ce.push(Pe,$e)}Ce.push(Me,ke)},ae=new WeakSet,rn=function(B,$,ce,me,xe,Re,Me,ke){const Ce=(3*ce-2*B-Me)**2,Ne=(3*me-2*$-ke)**2,Oe=(3*xe-B-2*Me)**2,Le=(3*Re-$-2*ke)**2;return Math.max(Ce,Oe)+Math.max(Ne,Le)<=10},se=new WeakSet,kt=function(){let B=1/0,$=-1/0,ce=1/0,me=-1/0;for(const xe of this.paths)for(const[Re,Me,ke,Ie]of xe){const Ce=i.Util.bezierBoundingBox(...Re,...Me,...ke,...Ie);B=Math.min(B,Ce[0]),ce=Math.min(ce,Ce[1]),$=Math.max($,Ce[2]),me=Math.max(me,Ce[3])}return[B,ce,$,me]},pe=new WeakSet,ut=function(){return M(this,d)?Math.ceil(this.thickness*this.parentScale):0},_e=new WeakSet,et=function(B=!1){if(this.isEmpty())return;if(!M(this,d)){oe(this,Ae,Ge).call(this);return}const $=oe(this,se,kt).call(this),ce=oe(this,pe,ut).call(this);ge(this,O,Math.max(b,$[2]-$[0])),ge(this,c,Math.max(b,$[3]-$[1]));const me=Math.ceil(ce+M(this,O)*this.scaleFactor),xe=Math.ceil(ce+M(this,c)*this.scaleFactor),[Re,Me]=this.parentDimensions;this.width=me/Re,this.height=xe/Me,ge(this,l,me/xe),oe(this,K,Mt).call(this);const ke=this.translationX,Ie=this.translationY;this.translationX=-$[0],this.translationY=-$[1],oe(this,W,Qe).call(this),oe(this,Ae,Ge).call(this),ge(this,y,me),ge(this,o,xe),this.setDims(me,xe);const Ce=B?ce/this.scaleFactor/2:0;this.translate(ke-this.translationX-Ce,Ie-this.translationY-Ce)},K=new WeakSet,Mt=function(){const{style:B}=this.div;M(this,l)>=1?(B.minHeight=`${b}px`,B.minWidth=`${Math.round(M(this,l)*b)}px`):(B.minWidth=`${b}px`,B.minHeight=`${Math.round(b/M(this,l))}px`)},ne(ye,L),De(ye,"_defaultColor",null),De(ye,"_defaultOpacity",1),De(ye,"_defaultThickness",1),De(ye,"_l10nPromise"),De(ye,"_type","ink");let E=ye;t.InkEditor=E},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const i=n(31);t.fitCurve=i},e=>{function t(_,S,d){if(!Array.isArray(_))throw new TypeError("First argument should be an array");if(_.forEach(y=>{if(!Array.isArray(y)||y.some(o=>typeof o!="number")||y.length!==_[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),_=_.filter((y,o)=>o===0||!y.every((p,f)=>p===_[o-1][f])),_.length<2)return[];const T=_.length,I=O(_[1],_[0]),P=O(_[T-2],_[T-1]);return n(_,I,P,S,d)}function n(_,S,d,T,I){var y,o,p,f,h,w,D,g,H,X,J,ee,ie;if(_.length===2)return ee=C.vectorLen(C.subtract(_[0],_[1]))/3,y=[_[0],C.addArrays(_[0],C.mulItems(S,ee)),C.addArrays(_[1],C.mulItems(d,ee)),_[1]],[y];if(o=b(_),[y,f,w]=i(_,o,o,S,d,I),f===0||f<T)return[y];if(f<T*T)for(p=o,h=f,D=w,ie=0;ie<20;ie++){if(p=a(y,_,p),[y,f,w]=i(_,o,p,S,d,I),f<T)return[y];if(w===D){let he=f/h;if(he>.9999&&he<1.0001)break}h=f,D=w}return J=[],g=C.subtract(_[w-1],_[w+1]),g.every(he=>he===0)&&(g=C.subtract(_[w-1],_[w]),[g[0],g[1]]=[-g[1],g[0]]),H=C.normalize(g),X=C.mulItems(H,-1),J=J.concat(n(_.slice(0,w+1),S,H,T,I)),J=J.concat(n(_.slice(w),X,d,T,I)),J}function i(_,S,d,T,I,P){var y,o,p;return y=r(_,d,T,I),[o,p]=E(_,y,S),P&&P({bez:y,points:_,params:S,maxErr:o,maxPoint:p}),[y,o,p]}function r(_,S,d,T){var I,P,y,o,p,f,h,w,D,g,H,X,J,ee,ie,he,le,de=_[0],ve=_[_.length-1];for(I=[de,null,null,ve],P=C.zeros_Xx2x2(S.length),J=0,ee=S.length;J<ee;J++)he=S[J],le=1-he,y=P[J],y[0]=C.mulItems(d,3*he*(le*le)),y[1]=C.mulItems(T,3*le*(he*he));for(o=[[0,0],[0,0]],p=[0,0],J=0,ee=_.length;J<ee;J++)he=S[J],y=P[J],o[0][0]+=C.dot(y[0],y[0]),o[0][1]+=C.dot(y[0],y[1]),o[1][0]+=C.dot(y[0],y[1]),o[1][1]+=C.dot(y[1],y[1]),ie=C.subtract(_[J],m.q([de,de,ve,ve],he)),p[0]+=C.dot(y[0],ie),p[1]+=C.dot(y[1],ie);return f=o[0][0]*o[1][1]-o[1][0]*o[0][1],h=o[0][0]*p[1]-o[1][0]*p[0],w=p[0]*o[1][1]-p[1]*o[0][1],D=f===0?0:w/f,g=f===0?0:h/f,X=C.vectorLen(C.subtract(de,ve)),H=1e-6*X,D<H||g<H?(I[1]=C.addArrays(de,C.mulItems(d,X/3)),I[2]=C.addArrays(ve,C.mulItems(T,X/3))):(I[1]=C.addArrays(de,C.mulItems(d,D)),I[2]=C.addArrays(ve,C.mulItems(T,g))),I}function a(_,S,d){return d.map((T,I)=>s(_,S[I],T))}function s(_,S,d){var T=C.subtract(m.q(_,d),S),I=m.qprime(_,d),P=C.mulMatrix(T,I),y=C.sum(C.squareItems(I))+2*C.mulMatrix(T,m.qprimeprime(_,d));return y===0?d:d-P/y}function b(_){var S=[],d,T,I;return _.forEach((P,y)=>{d=y?T+C.vectorLen(C.subtract(P,I)):0,S.push(d),T=d,I=P}),S=S.map(P=>P/T),S}function E(_,S,d){var T,I,P,y,o,p,f,h;I=0,P=Math.floor(_.length/2);const w=l(S,10);for(o=0,p=_.length;o<p;o++)f=_[o],h=c(S,d[o],w,10),y=C.subtract(m.q(S,h),f),T=y[0]*y[0]+y[1]*y[1],T>I&&(I=T,P=o);return[I,P]}var l=function(_,S){for(var d,T=[0],I=_[0],P=0,y=1;y<=S;y++)d=m.q(_,y/S),P+=C.vectorLen(C.subtract(d,I)),T.push(P),I=d;return T=T.map(o=>o/P),T};function c(_,S,d,T){if(S<0)return 0;if(S>1)return 1;for(var I,P,y,o,p,f=1;f<=T;f++)if(S<=d[f]){o=(f-1)/T,y=f/T,P=d[f-1],I=d[f],p=(S-P)/(I-P)*(y-o)+o;break}return p}function O(_,S){return C.normalize(C.subtract(_,S))}class C{static zeros_Xx2x2(S){for(var d=[];S--;)d.push([0,0]);return d}static mulItems(S,d){return S.map(T=>T*d)}static mulMatrix(S,d){return S.reduce((T,I,P)=>T+I*d[P],0)}static subtract(S,d){return S.map((T,I)=>T-d[I])}static addArrays(S,d){return S.map((T,I)=>T+d[I])}static addItems(S,d){return S.map(T=>T+d)}static sum(S){return S.reduce((d,T)=>d+T)}static dot(S,d){return C.mulMatrix(S,d)}static vectorLen(S){return Math.hypot(...S)}static divItems(S,d){return S.map(T=>T/d)}static squareItems(S){return S.map(d=>d*d)}static normalize(S){return this.divItems(S,this.vectorLen(S))}}class m{static q(S,d){var T=1-d,I=C.mulItems(S[0],T*T*T),P=C.mulItems(S[1],3*T*T*d),y=C.mulItems(S[2],3*T*d*d),o=C.mulItems(S[3],d*d*d);return C.addArrays(C.addArrays(I,P),C.addArrays(y,o))}static qprime(S,d){var T=1-d,I=C.mulItems(C.subtract(S[1],S[0]),3*T*T),P=C.mulItems(C.subtract(S[2],S[1]),6*T*d),y=C.mulItems(C.subtract(S[3],S[2]),3*d*d);return C.addArrays(C.addArrays(I,P),y)}static qprimeprime(S,d){return C.addArrays(C.mulItems(C.addArrays(C.subtract(S[2],C.mulItems(S[1],2)),S[0]),6*(1-d)),C.mulItems(C.addArrays(C.subtract(S[3],C.mulItems(S[2],2)),S[1]),6*d))}}e.exports=t,e.exports.fitCubic=n,e.exports.createTangent=O},(e,t,n)=>{var Ae,Ye,x,an,Z,Ft,Y,Pt;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var i=n(1),r=n(6),a=n(3),s=n(33),b=n(34);const E=1e3,l=9,c=new WeakSet;function O(j){return{width:j[2]-j[0],height:j[3]-j[1]}}class C{static create(u){switch(u.data.annotationType){case i.AnnotationType.LINK:return new _(u);case i.AnnotationType.TEXT:return new S(u);case i.AnnotationType.WIDGET:switch(u.data.fieldType){case"Tx":return new T(u);case"Btn":return u.data.radioButton?new P(u):u.data.checkBox?new I(u):new y(u);case"Ch":return new o(u)}return new d(u);case i.AnnotationType.POPUP:return new p(u);case i.AnnotationType.FREETEXT:return new h(u);case i.AnnotationType.LINE:return new w(u);case i.AnnotationType.SQUARE:return new D(u);case i.AnnotationType.CIRCLE:return new g(u);case i.AnnotationType.POLYLINE:return new H(u);case i.AnnotationType.CARET:return new J(u);case i.AnnotationType.INK:return new ee(u);case i.AnnotationType.POLYGON:return new X(u);case i.AnnotationType.HIGHLIGHT:return new ie(u);case i.AnnotationType.UNDERLINE:return new he(u);case i.AnnotationType.SQUIGGLY:return new le(u);case i.AnnotationType.STRIKEOUT:return new de(u);case i.AnnotationType.STAMP:return new ve(u);case i.AnnotationType.FILEATTACHMENT:return new Ee(u);default:return new m(u)}}}class m{constructor(u,{isRenderable:A=!1,ignoreBorder:F=!1,createQuadrilaterals:L=!1}={}){this.isRenderable=A,this.data=u.data,this.layer=u.layer,this.page=u.page,this.viewport=u.viewport,this.linkService=u.linkService,this.downloadManager=u.downloadManager,this.imageResourcesPath=u.imageResourcesPath,this.renderForms=u.renderForms,this.svgFactory=u.svgFactory,this.annotationStorage=u.annotationStorage,this.enableScripting=u.enableScripting,this.hasJSActions=u.hasJSActions,this._fieldObjects=u.fieldObjects,A&&(this.container=this._createContainer(F)),L&&(this.quadrilaterals=this._createQuadrilaterals(F))}_createContainer(u=!1){const{data:A,page:F,viewport:L}=this,k=document.createElement("section");k.setAttribute("data-annotation-id",A.id),A.noRotate&&k.classList.add("norotate");const{pageWidth:U,pageHeight:Q,pageX:V,pageY:te}=L.rawDims,{width:ae,height:re}=O(A.rect),se=i.Util.normalizeRect([A.rect[0],F.view[3]-A.rect[1]+F.view[1],A.rect[2],F.view[3]-A.rect[3]+F.view[1]]);if(!u&&A.borderStyle.width>0){k.style.borderWidth=`${A.borderStyle.width}px`;const pe=A.borderStyle.horizontalCornerRadius,Se=A.borderStyle.verticalCornerRadius;if(pe>0||Se>0){const we=`calc(${pe}px * var(--scale-factor)) / calc(${Se}px * var(--scale-factor))`;k.style.borderRadius=we}else if(this instanceof P){const we=`calc(${ae}px * var(--scale-factor)) / calc(${re}px * var(--scale-factor))`;k.style.borderRadius=we}switch(A.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:k.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:k.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:k.style.borderBottomStyle="solid";break}const _e=A.borderColor||null;_e?k.style.borderColor=i.Util.makeHexColor(_e[0]|0,_e[1]|0,_e[2]|0):k.style.borderWidth=0}k.style.left=`${100*(se[0]-V)/U}%`,k.style.top=`${100*(se[1]-te)/Q}%`;const{rotation:fe}=A;return A.hasOwnCanvas||fe===0?(k.style.width=`${100*ae/U}%`,k.style.height=`${100*re/Q}%`):this.setRotation(fe,k),k}setRotation(u,A=this.container){const{pageWidth:F,pageHeight:L}=this.viewport.rawDims,{width:k,height:U}=O(this.data.rect);let Q,V;u%180===0?(Q=100*k/F,V=100*U/L):(Q=100*U/F,V=100*k/L),A.style.width=`${Q}%`,A.style.height=`${V}%`,A.setAttribute("data-main-rotation",(360-u)%360)}get _commonActions(){const u=(A,F,L)=>{const k=L.detail[A];L.target.style[F]=s.ColorConverters[`${k[0]}_HTML`](k.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:A=>{const F=A.detail.display%2===1;this.container.style.visibility=F?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:F,print:A.detail.display===0||A.detail.display===3})},print:A=>{this.annotationStorage.setValue(this.data.id,{print:A.detail.print})},hidden:A=>{this.container.style.visibility=A.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:A.detail.hidden})},focus:A=>{setTimeout(()=>A.target.focus({preventScroll:!1}),0)},userName:A=>{A.target.title=A.detail.userName},readonly:A=>{A.detail.readonly?A.target.setAttribute("readonly",""):A.target.removeAttribute("readonly")},required:A=>{this._setRequired(A.target,A.detail.required)},bgColor:A=>{u("bgColor","backgroundColor",A)},fillColor:A=>{u("fillColor","backgroundColor",A)},fgColor:A=>{u("fgColor","color",A)},textColor:A=>{u("textColor","color",A)},borderColor:A=>{u("borderColor","borderColor",A)},strokeColor:A=>{u("strokeColor","borderColor",A)},rotation:A=>{const F=A.detail.rotation;this.setRotation(F),this.annotationStorage.setValue(this.data.id,{rotation:F})}})}_dispatchEventFromSandbox(u,A){const F=this._commonActions;for(const L of Object.keys(A.detail)){const k=u[L]||F[L];k==null||k(A)}}_setDefaultPropertiesFromJS(u){if(!this.enableScripting)return;const A=this.annotationStorage.getRawValue(this.data.id);if(!A)return;const F=this._commonActions;for(const[L,k]of Object.entries(A)){const U=F[L];if(U){const Q={detail:{[L]:k},target:u};U(Q),delete A[L]}}}_createQuadrilaterals(u=!1){if(!this.data.quadPoints)return null;const A=[],F=this.data.rect;for(const L of this.data.quadPoints)this.data.rect=[L[2].x,L[2].y,L[1].x,L[1].y],A.push(this._createContainer(u));return this.data.rect=F,A}_createPopup(u,A){let F=this.container;this.quadrilaterals&&(u||(u=this.quadrilaterals),F=this.quadrilaterals[0]),u||(u=document.createElement("div"),u.classList.add("popupTriggerArea"),F.append(u));const k=new f({container:F,trigger:u,color:A.color,titleObj:A.titleObj,modificationDate:A.modificationDate,contentsObj:A.contentsObj,richText:A.richText,hideWrapper:!0}).render();k.style.left="100%",F.append(k)}_renderQuadrilaterals(u){for(const A of this.quadrilaterals)A.classList.add(u);return this.quadrilaterals}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(u,A=null){const F=[];if(this._fieldObjects){const L=this._fieldObjects[u];if(L)for(const{page:k,id:U,exportValues:Q}of L){if(k===-1||U===A)continue;const V=typeof Q=="string"?Q:null,te=document.querySelector(`[data-element-id="${U}"]`);if(te&&!c.has(te)){(0,i.warn)(`_getElementsByName - element not allowed: ${U}`);continue}F.push({id:U,exportValue:V,domElement:te})}return F}for(const L of document.getElementsByName(u)){const{exportValue:k}=L,U=L.getAttribute("data-element-id");U!==A&&c.has(L)&&F.push({id:U,exportValue:k,domElement:L})}return F}}class _ extends m{constructor(A,F=null){super(A,{isRenderable:!0,ignoreBorder:!!(F!=null&&F.ignoreBorder),createQuadrilaterals:!0});ne(this,Ae);ne(this,x);this.isTooltipOnly=A.data.isTooltipOnly}render(){const{data:A,linkService:F}=this,L=document.createElement("a");L.setAttribute("data-element-id",A.id);let k=!1;return A.url?(F.addLinkAttributes(L,A.url,A.newWindow),k=!0):A.action?(this._bindNamedAction(L,A.action),k=!0):A.attachment?(this._bindAttachment(L,A.attachment),k=!0):A.setOCGState?(oe(this,x,an).call(this,L,A.setOCGState),k=!0):A.dest?(this._bindLink(L,A.dest),k=!0):(A.actions&&(A.actions.Action||A.actions["Mouse Up"]||A.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(L,A),k=!0),A.resetForm?(this._bindResetFormAction(L,A.resetForm),k=!0):this.isTooltipOnly&&!k&&(this._bindLink(L,""),k=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((U,Q)=>{const V=Q===0?L:L.cloneNode();return U.append(V),U}):(this.container.classList.add("linkAnnotation"),k&&this.container.append(L),this.container)}_bindLink(A,F){A.href=this.linkService.getDestinationHash(F),A.onclick=()=>(F&&this.linkService.goToDestination(F),!1),(F||F==="")&&oe(this,Ae,Ye).call(this)}_bindNamedAction(A,F){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeNamedAction(F),!1),oe(this,Ae,Ye).call(this)}_bindAttachment(A,F){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>{var L;return(L=this.downloadManager)==null||L.openOrDownloadData(this.container,F.content,F.filename),!1},oe(this,Ae,Ye).call(this)}_bindJSAction(A,F){A.href=this.linkService.getAnchorUrl("");const L=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const k of Object.keys(F.actions)){const U=L.get(k);U&&(A[U]=()=>{var Q;return(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F.id,name:k}}),!1})}A.onclick||(A.onclick=()=>!1),oe(this,Ae,Ye).call(this)}_bindResetFormAction(A,F){const L=A.onclick;if(L||(A.href=this.linkService.getAnchorUrl("")),oe(this,Ae,Ye).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),L||(A.onclick=()=>!1);return}A.onclick=()=>{var re;L==null||L();const{fields:k,refs:U,include:Q}=F,V=[];if(k.length!==0||U.length!==0){const se=new Set(U);for(const fe of k){const pe=this._fieldObjects[fe]||[];for(const{id:Se}of pe)se.add(Se)}for(const fe of Object.values(this._fieldObjects))for(const pe of fe)se.has(pe.id)===Q&&V.push(pe)}else for(const se of Object.values(this._fieldObjects))V.push(...se);const te=this.annotationStorage,ae=[];for(const se of V){const{id:fe}=se;switch(ae.push(fe),se.type){case"text":{const Se=se.defaultValue||"";te.setValue(fe,{value:Se});break}case"checkbox":case"radiobutton":{const Se=se.defaultValue===se.exportValues;te.setValue(fe,{value:Se});break}case"combobox":case"listbox":{const Se=se.defaultValue||"";te.setValue(fe,{value:Se});break}default:continue}const pe=document.querySelector(`[data-element-id="${fe}"]`);if(pe){if(!c.has(pe)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${fe}`);continue}}else continue;pe.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((re=this.linkService.eventBus)==null||re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ae,name:"ResetForm"}})),!1}}}Ae=new WeakSet,Ye=function(){this.container.setAttribute("data-internal-link","")},x=new WeakSet,an=function(A,F){A.href=this.linkService.getAnchorUrl(""),A.onclick=()=>(this.linkService.executeSetOCGState(F),!1),oe(this,Ae,Ye).call(this)};class S extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A})}render(){this.container.classList.add("textAnnotation");const u=document.createElement("img");return u.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",u.alt="[{{type}} Annotation]",u.dataset.l10nId="text_annotation_type",u.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(u,this.data),this.container.append(u),this.container}}class d extends m{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(u){var A;this.data.hasOwnCanvas&&(((A=u.previousSibling)==null?void 0:A.nodeName)==="CANVAS"&&(u.previousSibling.hidden=!0),u.hidden=!1)}_getKeyModifier(u){const{isWin:A,isMac:F}=i.FeatureTest.platform;return A&&u.ctrlKey||F&&u.metaKey}_setEventListener(u,A,F,L){A.includes("mouse")?u.addEventListener(A,k=>{var U;(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:F,value:L(k),shift:k.shiftKey,modifier:this._getKeyModifier(k)}})}):u.addEventListener(A,k=>{var U;(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:F,value:L(k)}})})}_setEventListeners(u,A,F){var L;for(const[k,U]of A)(U==="Action"||(L=this.data.actions)!=null&&L[U])&&this._setEventListener(u,k,U,F)}_setBackgroundColor(u){const A=this.data.backgroundColor||null;u.style.backgroundColor=A===null?"transparent":i.Util.makeHexColor(A[0],A[1],A[2])}_setTextStyle(u){const A=["left","center","right"],{fontColor:F}=this.data.defaultAppearanceData,L=this.data.defaultAppearanceData.fontSize||l,k=u.style;let U;const Q=2,V=te=>Math.round(10*te)/10;if(this.data.multiLine){const te=Math.abs(this.data.rect[3]-this.data.rect[1]-Q),ae=Math.round(te/(i.LINE_FACTOR*L))||1,re=te/ae;U=Math.min(L,V(re/i.LINE_FACTOR))}else{const te=Math.abs(this.data.rect[3]-this.data.rect[1]-Q);U=Math.min(L,V(te/i.LINE_FACTOR))}k.fontSize=`calc(${U}px * var(--scale-factor))`,k.color=i.Util.makeHexColor(F[0],F[1],F[2]),this.data.textAlignment!==null&&(k.textAlign=A[this.data.textAlignment])}_setRequired(u,A){A?u.setAttribute("required",!0):u.removeAttribute("required"),u.setAttribute("aria-required",A)}}class T extends d{constructor(u){const A=u.renderForms||!u.data.hasAppearance&&!!u.data.fieldValue;super(u,{isRenderable:A})}setPropertyOnSiblings(u,A,F,L){const k=this.annotationStorage;for(const U of this._getElementsByName(u.name,u.id))U.domElement&&(U.domElement[A]=F),k.setValue(U.id,{[L]:F})}render(){var L;const u=this.annotationStorage,A=this.data.id;this.container.classList.add("textWidgetAnnotation");let F=null;if(this.renderForms){const k=u.getValue(A,{value:this.data.fieldValue});let U=k.formattedValue||k.value||"";const Q=u.getValue(A,{charLimit:this.data.maxLen}).charLimit;Q&&U.length>Q&&(U=U.slice(0,Q));const V={userValue:U,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(F=document.createElement("textarea"),F.textContent=U,this.data.doNotScroll&&(F.style.overflowY="hidden")):(F=document.createElement("input"),F.type="text",F.setAttribute("value",U),this.data.doNotScroll&&(F.style.overflowX="hidden")),this.data.hasOwnCanvas&&(F.hidden=!0),c.add(F),F.setAttribute("data-element-id",A),F.disabled=this.data.readOnly,F.name=this.data.fieldName,F.tabIndex=E,this._setRequired(F,this.data.required),Q&&(F.maxLength=Q),F.addEventListener("input",ae=>{u.setValue(A,{value:ae.target.value}),this.setPropertyOnSiblings(F,"value",ae.target.value,"value")}),F.addEventListener("resetform",ae=>{const re=this.data.defaultFieldValue??"";F.value=V.userValue=re,V.formattedValue=null});let te=ae=>{const{formattedValue:re}=V;re!=null&&(ae.target.value=re),ae.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){F.addEventListener("focus",re=>{const{target:se}=re;V.userValue&&(se.value=V.userValue),V.lastCommittedValue=se.value,V.commitKey=1}),F.addEventListener("updatefromsandbox",re=>{this.showElementAndHideCanvas(re.target);const se={value(fe){V.userValue=fe.detail.value??"",u.setValue(A,{value:V.userValue.toString()}),fe.target.value=V.userValue},formattedValue(fe){const{formattedValue:pe}=fe.detail;V.formattedValue=pe,pe!=null&&fe.target!==document.activeElement&&(fe.target.value=pe),u.setValue(A,{formattedValue:pe})},selRange(fe){fe.target.setSelectionRange(...fe.detail.selRange)},charLimit:fe=>{var we;const{charLimit:pe}=fe.detail,{target:Se}=fe;if(pe===0){Se.removeAttribute("maxLength");return}Se.setAttribute("maxLength",pe);let _e=V.userValue;!_e||_e.length<=pe||(_e=_e.slice(0,pe),Se.value=V.userValue=_e,u.setValue(A,{value:_e}),(we=this.linkService.eventBus)==null||we.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:_e,willCommit:!0,commitKey:1,selStart:Se.selectionStart,selEnd:Se.selectionEnd}}))}};this._dispatchEventFromSandbox(se,re)}),F.addEventListener("keydown",re=>{var pe;V.commitKey=1;let se=-1;if(re.key==="Escape"?se=0:re.key==="Enter"&&!this.data.multiLine?se=2:re.key==="Tab"&&(V.commitKey=3),se===-1)return;const{value:fe}=re.target;V.lastCommittedValue!==fe&&(V.lastCommittedValue=fe,V.userValue=fe,(pe=this.linkService.eventBus)==null||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:fe,willCommit:!0,commitKey:se,selStart:re.target.selectionStart,selEnd:re.target.selectionEnd}}))});const ae=te;te=null,F.addEventListener("blur",re=>{var fe;if(!re.relatedTarget)return;const{value:se}=re.target;V.userValue=se,V.lastCommittedValue!==se&&((fe=this.linkService.eventBus)==null||fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:se,willCommit:!0,commitKey:V.commitKey,selStart:re.target.selectionStart,selEnd:re.target.selectionEnd}})),ae(re)}),(L=this.data.actions)!=null&&L.Keystroke&&F.addEventListener("beforeinput",re=>{var be;V.lastCommittedValue=null;const{data:se,target:fe}=re,{value:pe,selectionStart:Se,selectionEnd:_e}=fe;let we=Se,K=_e;switch(re.inputType){case"deleteWordBackward":{const ye=pe.substring(0,Se).match(/\w*[^\w]*$/);ye&&(we-=ye[0].length);break}case"deleteWordForward":{const ye=pe.substring(Se).match(/^[^\w]*\w*/);ye&&(K+=ye[0].length);break}case"deleteContentBackward":Se===_e&&(we-=1);break;case"deleteContentForward":Se===_e&&(K+=1);break}re.preventDefault(),(be=this.linkService.eventBus)==null||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:pe,change:se||"",willCommit:!1,selStart:we,selEnd:K}})}),this._setEventListeners(F,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],re=>re.target.value)}if(te&&F.addEventListener("blur",te),this.data.comb){const re=(this.data.rect[2]-this.data.rect[0])/Q;F.classList.add("comb"),F.style.letterSpacing=`calc(${re}px * var(--scale-factor) - 1ch)`}}else F=document.createElement("div"),F.textContent=this.data.fieldValue,F.style.verticalAlign="middle",F.style.display="table-cell";return this._setTextStyle(F),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class I extends d{constructor(u){super(u,{isRenderable:u.renderForms})}render(){const u=this.annotationStorage,A=this.data,F=A.id;let L=u.getValue(F,{value:A.exportValue===A.fieldValue}).value;typeof L=="string"&&(L=L!=="Off",u.setValue(F,{value:L})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const k=document.createElement("input");return c.add(k),k.setAttribute("data-element-id",F),k.disabled=A.readOnly,this._setRequired(k,this.data.required),k.type="checkbox",k.name=A.fieldName,L&&k.setAttribute("checked",!0),k.setAttribute("exportValue",A.exportValue),k.tabIndex=E,k.addEventListener("change",U=>{const{name:Q,checked:V}=U.target;for(const te of this._getElementsByName(Q,F)){const ae=V&&te.exportValue===A.exportValue;te.domElement&&(te.domElement.checked=ae),u.setValue(te.id,{value:ae})}u.setValue(F,{value:V})}),k.addEventListener("resetform",U=>{const Q=A.defaultFieldValue||"Off";U.target.checked=Q===A.exportValue}),this.enableScripting&&this.hasJSActions&&(k.addEventListener("updatefromsandbox",U=>{const Q={value(V){V.target.checked=V.detail.value!=="Off",u.setValue(F,{value:V.target.checked})}};this._dispatchEventFromSandbox(Q,U)}),this._setEventListeners(k,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],U=>U.target.checked)),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class P extends d{constructor(u){super(u,{isRenderable:u.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const u=this.annotationStorage,A=this.data,F=A.id;let L=u.getValue(F,{value:A.fieldValue===A.buttonValue}).value;typeof L=="string"&&(L=L!==A.buttonValue,u.setValue(F,{value:L}));const k=document.createElement("input");if(c.add(k),k.setAttribute("data-element-id",F),k.disabled=A.readOnly,this._setRequired(k,this.data.required),k.type="radio",k.name=A.fieldName,L&&k.setAttribute("checked",!0),k.tabIndex=E,k.addEventListener("change",U=>{const{name:Q,checked:V}=U.target;for(const te of this._getElementsByName(Q,F))u.setValue(te.id,{value:!1});u.setValue(F,{value:V})}),k.addEventListener("resetform",U=>{const Q=A.defaultFieldValue;U.target.checked=Q!=null&&Q===A.buttonValue}),this.enableScripting&&this.hasJSActions){const U=A.buttonValue;k.addEventListener("updatefromsandbox",Q=>{const V={value:te=>{const ae=U===te.detail.value;for(const re of this._getElementsByName(te.target.name)){const se=ae&&re.id===F;re.domElement&&(re.domElement.checked=se),u.setValue(re.id,{value:se})}}};this._dispatchEventFromSandbox(V,Q)}),this._setEventListeners(k,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Q=>Q.target.checked)}return this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class y extends _{constructor(u){super(u,{ignoreBorder:u.data.hasAppearance})}render(){const u=super.render();u.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(u.title=this.data.alternativeText);const A=u.lastChild;return this.enableScripting&&this.hasJSActions&&A&&(this._setDefaultPropertiesFromJS(A),A.addEventListener("updatefromsandbox",F=>{this._dispatchEventFromSandbox({},F)})),u}}class o extends d{constructor(u){super(u,{isRenderable:u.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const u=this.annotationStorage,A=this.data.id,F=u.getValue(A,{value:this.data.fieldValue}),L=document.createElement("select");c.add(L),L.setAttribute("data-element-id",A),L.disabled=this.data.readOnly,this._setRequired(L,this.data.required),L.name=this.data.fieldName,L.tabIndex=E;let k=this.data.combo&&this.data.options.length>0;this.data.combo||(L.size=this.data.options.length,this.data.multiSelect&&(L.multiple=!0)),L.addEventListener("resetform",ae=>{const re=this.data.defaultFieldValue;for(const se of L.options)se.selected=se.value===re});for(const ae of this.data.options){const re=document.createElement("option");re.textContent=ae.displayValue,re.value=ae.exportValue,F.value.includes(ae.exportValue)&&(re.setAttribute("selected",!0),k=!1),L.append(re)}let U=null;if(k){const ae=document.createElement("option");ae.value=" ",ae.setAttribute("hidden",!0),ae.setAttribute("selected",!0),L.prepend(ae),U=()=>{ae.remove(),L.removeEventListener("input",U),U=null},L.addEventListener("input",U)}const Q=ae=>{const re=ae?"value":"textContent",{options:se,multiple:fe}=L;return fe?Array.prototype.filter.call(se,pe=>pe.selected).map(pe=>pe[re]):se.selectedIndex===-1?null:se[se.selectedIndex][re]};let V=Q(!1);const te=ae=>{const re=ae.target.options;return Array.prototype.map.call(re,se=>({displayValue:se.textContent,exportValue:se.value}))};return this.enableScripting&&this.hasJSActions?(L.addEventListener("updatefromsandbox",ae=>{const re={value(se){U==null||U();const fe=se.detail.value,pe=new Set(Array.isArray(fe)?fe:[fe]);for(const Se of L.options)Se.selected=pe.has(Se.value);u.setValue(A,{value:Q(!0)}),V=Q(!1)},multipleSelection(se){L.multiple=!0},remove(se){const fe=L.options,pe=se.detail.remove;fe[pe].selected=!1,L.remove(pe),fe.length>0&&Array.prototype.findIndex.call(fe,_e=>_e.selected)===-1&&(fe[0].selected=!0),u.setValue(A,{value:Q(!0),items:te(se)}),V=Q(!1)},clear(se){for(;L.length!==0;)L.remove(0);u.setValue(A,{value:null,items:[]}),V=Q(!1)},insert(se){const{index:fe,displayValue:pe,exportValue:Se}=se.detail.insert,_e=L.children[fe],we=document.createElement("option");we.textContent=pe,we.value=Se,_e?_e.before(we):L.append(we),u.setValue(A,{value:Q(!0),items:te(se)}),V=Q(!1)},items(se){const{items:fe}=se.detail;for(;L.length!==0;)L.remove(0);for(const pe of fe){const{displayValue:Se,exportValue:_e}=pe,we=document.createElement("option");we.textContent=Se,we.value=_e,L.append(we)}L.options.length>0&&(L.options[0].selected=!0),u.setValue(A,{value:Q(!0),items:te(se)}),V=Q(!1)},indices(se){const fe=new Set(se.detail.indices);for(const pe of se.target.options)pe.selected=fe.has(pe.index);u.setValue(A,{value:Q(!0)}),V=Q(!1)},editable(se){se.target.disabled=!se.detail.editable}};this._dispatchEventFromSandbox(re,ae)}),L.addEventListener("input",ae=>{var se;const re=Q(!0);u.setValue(A,{value:re}),ae.preventDefault(),(se=this.linkService.eventBus)==null||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A,name:"Keystroke",value:V,changeEx:re,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(L,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ae=>ae.target.value)):L.addEventListener("input",function(ae){u.setValue(A,{value:Q(!0)})}),this.data.combo&&this._setTextStyle(L),this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}const N=class N extends m{constructor(u){var L,k,U;const{data:A}=u,F=!N.IGNORE_TYPES.has(A.parentType)&&!!((L=A.titleObj)!=null&&L.str||(k=A.contentsObj)!=null&&k.str||(U=A.richText)!=null&&U.str);super(u,{isRenderable:F})}render(){this.container.classList.add("popupAnnotation");const u=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(u.length===0)return this.container;const A=new f({container:this.container,trigger:Array.from(u),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),F=this.page,L=i.Util.normalizeRect([this.data.parentRect[0],F.view[3]-this.data.parentRect[1]+F.view[1],this.data.parentRect[2],F.view[3]-this.data.parentRect[3]+F.view[1]]),k=L[0]+this.data.parentRect[2]-this.data.parentRect[0],U=L[1],{pageWidth:Q,pageHeight:V,pageX:te,pageY:ae}=this.viewport.rawDims;return this.container.style.left=`${100*(k-te)/Q}%`,this.container.style.top=`${100*(U-ae)/V}%`,this.container.append(A.render()),this.container}};De(N,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let p=N;class f{constructor(u){this.container=u.container,this.trigger=u.trigger,this.color=u.color,this.titleObj=u.titleObj,this.modificationDate=u.modificationDate,this.contentsObj=u.contentsObj,this.richText=u.richText,this.hideWrapper=u.hideWrapper||!1,this.pinned=!1}render(){var Q,V;const A=document.createElement("div");A.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?A:this.container,this.hideElement.hidden=!0;const F=document.createElement("div");F.classList.add("popup");const L=this.color;if(L){const te=.7*(255-L[0])+L[0],ae=.7*(255-L[1])+L[1],re=.7*(255-L[2])+L[2];F.style.backgroundColor=i.Util.makeHexColor(te|0,ae|0,re|0)}const k=document.createElement("h1");k.dir=this.titleObj.dir,k.textContent=this.titleObj.str,F.append(k);const U=r.PDFDateString.toDateObject(this.modificationDate);if(U){const te=document.createElement("span");te.classList.add("popupDate"),te.textContent="{{date}}, {{time}}",te.dataset.l10nId="annotation_date_string",te.dataset.l10nArgs=JSON.stringify({date:U.toLocaleDateString(),time:U.toLocaleTimeString()}),F.append(te)}if((Q=this.richText)!=null&&Q.str&&(!((V=this.contentsObj)!=null&&V.str)||this.contentsObj.str===this.richText.str))b.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:F}),F.lastChild.classList.add("richText","popupContent");else{const te=this._formatContents(this.contentsObj);F.append(te)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const te of this.trigger)te.addEventListener("click",this._toggle.bind(this)),te.addEventListener("mouseover",this._show.bind(this,!1)),te.addEventListener("mouseout",this._hide.bind(this,!1));return F.addEventListener("click",this._hide.bind(this,!0)),A.append(F),A}_formatContents({str:u,dir:A}){const F=document.createElement("p");F.classList.add("popupContent"),F.dir=A;const L=u.split(/(?:\r\n?|\n)/);for(let k=0,U=L.length;k<U;++k){const Q=L[k];F.append(document.createTextNode(Q)),k<U-1&&F.append(document.createElement("br"))}return F}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(u=!1){u&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(u=!0){u&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class h extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A,ignoreBorder:!0}),this.textContent=u.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const u=document.createElement("div");u.classList.add("annotationTextContent"),u.setAttribute("role","comment");for(const A of this.textContent){const F=document.createElement("span");F.textContent=A,u.append(F)}this.container.append(u)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class w extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const u=this.data,{width:A,height:F}=O(u.rect),L=this.svgFactory.create(A,F,!0),k=this.svgFactory.createElement("svg:line");return k.setAttribute("x1",u.rect[2]-u.lineCoordinates[0]),k.setAttribute("y1",u.rect[3]-u.lineCoordinates[1]),k.setAttribute("x2",u.rect[2]-u.lineCoordinates[2]),k.setAttribute("y2",u.rect[3]-u.lineCoordinates[3]),k.setAttribute("stroke-width",u.borderStyle.width||1),k.setAttribute("stroke","transparent"),k.setAttribute("fill","transparent"),L.append(k),this.container.append(L),this._createPopup(k,u),this.container}}class D extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const u=this.data,{width:A,height:F}=O(u.rect),L=this.svgFactory.create(A,F,!0),k=u.borderStyle.width,U=this.svgFactory.createElement("svg:rect");return U.setAttribute("x",k/2),U.setAttribute("y",k/2),U.setAttribute("width",A-k),U.setAttribute("height",F-k),U.setAttribute("stroke-width",k||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),L.append(U),this.container.append(L),this._createPopup(U,u),this.container}}class g extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const u=this.data,{width:A,height:F}=O(u.rect),L=this.svgFactory.create(A,F,!0),k=u.borderStyle.width,U=this.svgFactory.createElement("svg:ellipse");return U.setAttribute("cx",A/2),U.setAttribute("cy",F/2),U.setAttribute("rx",A/2-k/2),U.setAttribute("ry",F/2-k/2),U.setAttribute("stroke-width",k||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),L.append(U),this.container.append(L),this._createPopup(U,u),this.container}}class H extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const u=this.data,{width:A,height:F}=O(u.rect),L=this.svgFactory.create(A,F,!0);let k=[];for(const Q of u.vertices){const V=Q.x-u.rect[0],te=u.rect[3]-Q.y;k.push(V+","+te)}k=k.join(" ");const U=this.svgFactory.createElement(this.svgElementName);return U.setAttribute("points",k),U.setAttribute("stroke-width",u.borderStyle.width||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),L.append(U),this.container.append(L),this._createPopup(U,u),this.container}}class X extends H{constructor(u){super(u),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class J extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ee extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const u=this.data,{width:A,height:F}=O(u.rect),L=this.svgFactory.create(A,F,!0);for(const k of u.inkLists){let U=[];for(const V of k){const te=V.x-u.rect[0],ae=u.rect[3]-V.y;U.push(`${te},${ae}`)}U=U.join(" ");const Q=this.svgFactory.createElement(this.svgElementName);Q.setAttribute("points",U),Q.setAttribute("stroke-width",u.borderStyle.width||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),this._createPopup(Q,u),L.append(Q)}return this.container.append(L),this.container}}class ie extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class he extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class le extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class de extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class ve extends m{constructor(u){var F,L,k;const A=!!(u.data.hasPopup||(F=u.data.titleObj)!=null&&F.str||(L=u.data.contentsObj)!=null&&L.str||(k=u.data.richText)!=null&&k.str);super(u,{isRenderable:A,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Ee extends m{constructor(u){var L;super(u,{isRenderable:!0});const{filename:A,content:F}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(A,!0),this.content=F,(L=this.linkService.eventBus)==null||L.dispatch("fileattachmentannotation",{source:this,filename:A,content:F})}render(){var A,F;this.container.classList.add("fileAttachmentAnnotation");let u;return this.data.hasAppearance?u=document.createElement("div"):(u=document.createElement("img"),u.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),u.classList.add("popupTriggerArea"),u.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((A=this.data.titleObj)!=null&&A.str||(F=this.data.contentsObj)!=null&&F.str||this.data.richText)&&this._createPopup(u,this.data),this.container.append(u),this.container}_download(){var u;(u=this.downloadManager)==null||u.openOrDownloadData(this.container,this.content,this.filename)}}const z=class z{static render(u){var V,te;const{annotations:A,div:F,viewport:L,accessibilityManager:k}=u;(0,r.setLayerDimensions)(F,L);const U={data:null,layer:F,page:u.page,viewport:L,linkService:u.linkService,downloadManager:u.downloadManager,imageResourcesPath:u.imageResourcesPath||"",renderForms:u.renderForms!==!1,svgFactory:new r.DOMSVGFactory,annotationStorage:u.annotationStorage||new a.AnnotationStorage,enableScripting:u.enableScripting===!0,hasJSActions:u.hasJSActions,fieldObjects:u.fieldObjects};let Q=0;for(const ae of A){if(ae.noHTML)continue;if(ae.annotationType!==i.AnnotationType.POPUP){const{width:fe,height:pe}=O(ae.rect);if(fe<=0||pe<=0)continue}U.data=ae;const re=C.create(U);if(!re.isRenderable)continue;const se=re.render();if(ae.hidden&&(se.style.visibility="hidden"),Array.isArray(se))for(const fe of se)fe.style.zIndex=Q++,oe(V=z,Z,Ft).call(V,fe,ae.id,F,k);else se.style.zIndex=Q++,re instanceof p?F.prepend(se):oe(te=z,Z,Ft).call(te,se,ae.id,F,k)}oe(this,Y,Pt).call(this,F,u.annotationCanvasMap)}static update(u){const{annotationCanvasMap:A,div:F,viewport:L}=u;(0,r.setLayerDimensions)(F,{rotation:L.rotation}),oe(this,Y,Pt).call(this,F,A),F.hidden=!1}};Z=new WeakSet,Ft=function(u,A,F,L){const k=u.firstChild||u;k.id=`${r.AnnotationPrefix}${A}`,F.append(u),L==null||L.moveElementInDOM(F,u,k,!1)},Y=new WeakSet,Pt=function(u,A){if(A){for(const[F,L]of A){const k=u.querySelector(`[data-annotation-id="${F}"]`);if(!k)continue;const{firstChild:U}=k;U?U.nodeName==="CANVAS"?U.replaceWith(L):U.before(L):k.append(L)}A.clear()}},ne(z,Z),ne(z,Y);let Te=z;t.AnnotationLayer=Te},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function n(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}class i{static CMYK_G([a,s,b,E]){return["G",1-Math.min(1,.3*a+.59*b+.11*s+E)]}static G_CMYK([a]){return["CMYK",0,0,0,1-a]}static G_RGB([a]){return["RGB",a,a,a]}static G_HTML([a]){const s=n(a);return`#${s}${s}${s}`}static RGB_G([a,s,b]){return["G",.3*a+.59*s+.11*b]}static RGB_HTML([a,s,b]){const E=n(a),l=n(s),c=n(b);return`#${E}${l}${c}`}static T_HTML(){return"#00000000"}static CMYK_RGB([a,s,b,E]){return["RGB",1-Math.min(1,a+E),1-Math.min(1,b+E),1-Math.min(1,s+E)]}static CMYK_HTML(a){const s=this.CMYK_RGB(a).slice(1);return this.RGB_HTML(s)}static RGB_CMYK([a,s,b]){const E=1-a,l=1-s,c=1-b,O=Math.min(E,l,c);return["CMYK",E,l,c,O]}}t.ColorConverters=i},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var i=n(19);class r{static setupStorage(s,b,E,l,c){const O=l.getValue(b,{value:null});switch(E.name){case"textarea":if(O.value!==null&&(s.textContent=O.value),c==="print")break;s.addEventListener("input",C=>{l.setValue(b,{value:C.target.value})});break;case"input":if(E.attributes.type==="radio"||E.attributes.type==="checkbox"){if(O.value===E.attributes.xfaOn?s.setAttribute("checked",!0):O.value===E.attributes.xfaOff&&s.removeAttribute("checked"),c==="print")break;s.addEventListener("change",C=>{l.setValue(b,{value:C.target.checked?C.target.getAttribute("xfaOn"):C.target.getAttribute("xfaOff")})})}else{if(O.value!==null&&s.setAttribute("value",O.value),c==="print")break;s.addEventListener("input",C=>{l.setValue(b,{value:C.target.value})})}break;case"select":if(O.value!==null)for(const C of E.children)C.attributes.value===O.value&&(C.attributes.selected=!0);s.addEventListener("input",C=>{const m=C.target.options,_=m.selectedIndex===-1?"":m[m.selectedIndex].value;l.setValue(b,{value:_})});break}}static setAttributes({html:s,element:b,storage:E=null,intent:l,linkService:c}){const{attributes:O}=b,C=s instanceof HTMLAnchorElement;O.type==="radio"&&(O.name=`${O.name}-${l}`);for(const[m,_]of Object.entries(O))if(_!=null)switch(m){case"class":_.length&&s.setAttribute(m,_.join(" "));break;case"dataId":break;case"id":s.setAttribute("data-element-id",_);break;case"style":Object.assign(s.style,_);break;case"textContent":s.textContent=_;break;default:(!C||m!=="href"&&m!=="newWindow")&&s.setAttribute(m,_)}C&&c.addLinkAttributes(s,O.href,O.newWindow),E&&O.dataId&&this.setupStorage(s,O.dataId,b,E)}static render(s){var S;const b=s.annotationStorage,E=s.linkService,l=s.xfaHtml,c=s.intent||"display",O=document.createElement(l.name);l.attributes&&this.setAttributes({html:O,element:l,intent:c,linkService:E});const C=[[l,-1,O]],m=s.div;if(m.append(O),s.viewport){const d=`matrix(${s.viewport.transform.join(",")})`;m.style.transform=d}c!=="richText"&&m.setAttribute("class","xfaLayer xfaFont");const _=[];for(;C.length>0;){const[d,T,I]=C.at(-1);if(T+1===d.children.length){C.pop();continue}const P=d.children[++C.at(-1)[1]];if(P===null)continue;const{name:y}=P;if(y==="#text"){const p=document.createTextNode(P.value);_.push(p),I.append(p);continue}let o;if((S=P==null?void 0:P.attributes)!=null&&S.xmlns?o=document.createElementNS(P.attributes.xmlns,y):o=document.createElement(y),I.append(o),P.attributes&&this.setAttributes({html:o,element:P,storage:b,intent:c,linkService:E}),P.children&&P.children.length>0)C.push([P,-1,o]);else if(P.value){const p=document.createTextNode(P.value);i.XfaText.shouldBuildText(y)&&_.push(p),o.append(p)}}for(const d of m.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:_}}static update(s){const b=`matrix(${s.viewport.transform.join(",")})`;s.div.style.transform=b,s.div.hidden=!1}}t.XfaLayer=r},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var i=n(6),r=n(1),a=n(10);let s=class{constructor(){(0,r.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=s;{let S=function(o){let p=[];const f=[];for(const h of o){if(h.fn==="save"){p.push({fnId:92,fn:"group",items:[]}),f.push(p),p=p.at(-1).items;continue}h.fn==="restore"?p=f.pop():p.push(h)}return p},d=function(o){if(Number.isInteger(o))return o.toString();const p=o.toFixed(10);let f=p.length-1;if(p[f]!=="0")return p;do f--;while(p[f]==="0");return p.substring(0,p[f]==="."?f:f+1)},T=function(o){if(o[4]===0&&o[5]===0){if(o[1]===0&&o[2]===0)return o[0]===1&&o[3]===1?"":`scale(${d(o[0])} ${d(o[3])})`;if(o[0]===o[3]&&o[1]===-o[2]){const p=Math.acos(o[0])*180/Math.PI;return`rotate(${d(p)})`}}else if(o[0]===1&&o[1]===0&&o[2]===0&&o[3]===1)return`translate(${d(o[4])} ${d(o[5])})`;return`matrix(${d(o[0])} ${d(o[1])} ${d(o[2])} ${d(o[3])} ${d(o[4])} ${d(o[5])})`};const b={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},E="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/1999/xlink",c=["butt","round","square"],O=["miter","round","bevel"],C=function(o,p="",f=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!f)return URL.createObjectURL(new Blob([o],{type:p}));const h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let w=`data:${p};base64,`;for(let D=0,g=o.length;D<g;D+=3){const H=o[D]&255,X=o[D+1]&255,J=o[D+2]&255,ee=H>>2,ie=(H&3)<<4|X>>4,he=D+1<g?(X&15)<<2|J>>6:64,le=D+2<g?J&63:64;w+=h[ee]+h[ie]+h[he]+h[le]}return w},m=function(){const o=new Uint8Array([137,80,78,71,13,10,26,10]),p=12,f=new Int32Array(256);for(let J=0;J<256;J++){let ee=J;for(let ie=0;ie<8;ie++)ee&1?ee=3988292384^ee>>1&2147483647:ee=ee>>1&2147483647;f[J]=ee}function h(J,ee,ie){let he=-1;for(let le=ee;le<ie;le++){const de=(he^J[le])&255,ve=f[de];he=he>>>8^ve}return he^-1}function w(J,ee,ie,he){let le=he;const de=ee.length;ie[le]=de>>24&255,ie[le+1]=de>>16&255,ie[le+2]=de>>8&255,ie[le+3]=de&255,le+=4,ie[le]=J.charCodeAt(0)&255,ie[le+1]=J.charCodeAt(1)&255,ie[le+2]=J.charCodeAt(2)&255,ie[le+3]=J.charCodeAt(3)&255,le+=4,ie.set(ee,le),le+=ee.length;const ve=h(ie,he+4,le);ie[le]=ve>>24&255,ie[le+1]=ve>>16&255,ie[le+2]=ve>>8&255,ie[le+3]=ve&255}function D(J,ee,ie){let he=1,le=0;for(let de=ee;de<ie;++de)he=(he+(J[de]&255))%65521,le=(le+he)%65521;return le<<16|he}function g(J){if(!a.isNodeJS)return H(J);try{let ee;parseInt(browser$1.versions.node)>=8?ee=J:ee=Buffer.from(J);const ie=require$$5.deflateSync(ee,{level:9});return ie instanceof Uint8Array?ie:new Uint8Array(ie)}catch(ee){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ee)}return H(J)}function H(J){let ee=J.length;const ie=65535,he=Math.ceil(ee/ie),le=new Uint8Array(2+ee+he*5+4);let de=0;le[de++]=120,le[de++]=156;let ve=0;for(;ee>ie;)le[de++]=0,le[de++]=255,le[de++]=255,le[de++]=0,le[de++]=0,le.set(J.subarray(ve,ve+ie),de),de+=ie,ve+=ie,ee-=ie;le[de++]=1,le[de++]=ee&255,le[de++]=ee>>8&255,le[de++]=~ee&65535&255,le[de++]=(~ee&65535)>>8&255,le.set(J.subarray(ve),de),de+=J.length-ve;const Ee=D(J,0,J.length);return le[de++]=Ee>>24&255,le[de++]=Ee>>16&255,le[de++]=Ee>>8&255,le[de++]=Ee&255,le}function X(J,ee,ie,he){const le=J.width,de=J.height;let ve,Ee,Te;const Ae=J.data;switch(ee){case r.ImageKind.GRAYSCALE_1BPP:Ee=0,ve=1,Te=le+7>>3;break;case r.ImageKind.RGB_24BPP:Ee=2,ve=8,Te=le*3;break;case r.ImageKind.RGBA_32BPP:Ee=6,ve=8,Te=le*4;break;default:throw new Error("invalid format")}const G=new Uint8Array((1+Te)*de);let x=0,R=0;for(let z=0;z<de;++z)G[x++]=0,G.set(Ae.subarray(R,R+Te),x),R+=Te,x+=Te;if(ee===r.ImageKind.GRAYSCALE_1BPP&&he){x=0;for(let z=0;z<de;z++){x++;for(let j=0;j<Te;j++)G[x++]^=255}}const N=new Uint8Array([le>>24&255,le>>16&255,le>>8&255,le&255,de>>24&255,de>>16&255,de>>8&255,de&255,ve,Ee,0,0,0]),Z=g(G),q=o.length+p*3+N.length+Z.length,Y=new Uint8Array(q);let W=0;return Y.set(o,W),W+=o.length,w("IHDR",N,Y,W),W+=p+N.length,w("IDATA",Z,Y,W),W+=p+Z.length,w("IEND",new Uint8Array(0),Y,W),C(Y,"image/png",ie)}return function(ee,ie,he){const le=ee.kind===void 0?r.ImageKind.GRAYSCALE_1BPP:ee.kind;return X(ee,le,ie,he)}}();class _{constructor(){this.fontSizeScale=1,this.fontWeight=b.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=b.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(p,f){this.x=p,this.y=f}}let I=0,P=0,y=0;t.SVGGraphics=s=class{constructor(o,p,f=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new _,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=p,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!f,this._operatorIdMapping=[];for(const h in r.OPS)this._operatorIdMapping[r.OPS[h]]=h}getObject(o,p=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):p}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const p=o.fnArray,f=o.argsArray;for(let h=0,w=p.length;h<w;h++)if(p[h]===r.OPS.dependency)for(const D of f[h]){const g=D.startsWith("g_")?this.commonObjs:this.objs,H=new Promise(X=>{g.get(D,X)});this.current.dependencies.push(H)}return Promise.all(this.current.dependencies)}transform(o,p,f,h,w,D){const g=[o,p,f,h,w,D];this.transformMatrix=r.Util.transform(this.transformMatrix,g),this.tgrp=null}getSVG(o,p){this.viewport=p;const f=this._initialize(p);return this.loadDependencies(o).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),f))}convertOpList(o){const p=this._operatorIdMapping,f=o.argsArray,h=o.fnArray,w=[];for(let D=0,g=h.length;D<g;D++){const H=h[D];w.push({fnId:H,fn:p[H],args:f[D]})}return S(w)}executeOpTree(o){for(const p of o){const f=p.fn,h=p.fnId,w=p.args;switch(h|0){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(w);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(w[0],w[1]);break;case r.OPS.setFont:this.setFont(w);break;case r.OPS.showText:this.showText(w[0]);break;case r.OPS.showSpacedText:this.showText(w[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(w[0],w[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(w[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(w[0]);break;case r.OPS.setHScale:this.setHScale(w[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(w[0],w[1],w[2],w[3],w[4],w[5]);break;case r.OPS.setTextRise:this.setTextRise(w[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(w[0]);break;case r.OPS.setLineWidth:this.setLineWidth(w[0]);break;case r.OPS.setLineJoin:this.setLineJoin(w[0]);break;case r.OPS.setLineCap:this.setLineCap(w[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(w[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(w[0],w[1],w[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(w[0],w[1],w[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(w);break;case r.OPS.setFillColorN:this.setFillColorN(w);break;case r.OPS.shadingFill:this.shadingFill(w[0]);break;case r.OPS.setDash:this.setDash(w[0],w[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(w[0]);break;case r.OPS.setFlatness:this.setFlatness(w[0]);break;case r.OPS.setGState:this.setGState(w[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(w[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(w[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(w[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(w[0],w[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(w[0],w[1],w[2],w[3],w[4],w[5]);break;case r.OPS.constructPath:this.constructPath(w[0],w[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(p.items);break;default:(0,r.warn)(`Unimplemented operator ${f}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,p,f,h,w,D){const g=this.current;g.textMatrix=g.lineMatrix=[o,p,f,h,w,D],g.textMatrixScale=Math.hypot(o,p),g.x=g.lineX=0,g.y=g.lineY=0,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${d(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",d(-g.y)),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtElement.append(g.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=r.IDENTITY_MATRIX,o.lineMatrix=r.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,p){const f=this.current;f.x=f.lineX+=o,f.y=f.lineY+=p,f.xcoords=[],f.ycoords=[],f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${d(f.fontSize)}px`),f.tspan.setAttributeNS(null,"y",d(-f.y))}showText(o){const p=this.current,f=p.font,h=p.fontSize;if(h===0)return;const w=p.fontSizeScale,D=p.charSpacing,g=p.wordSpacing,H=p.fontDirection,X=p.textHScale*H,J=f.vertical,ee=J?1:-1,ie=f.defaultVMetrics,he=h*p.fontMatrix[0];let le=0;for(const Ee of o){if(Ee===null){le+=H*g;continue}else if(typeof Ee=="number"){le+=ee*Ee*h/1e3;continue}const Te=(Ee.isSpace?g:0)+D,Ae=Ee.fontChar;let G,x,R=Ee.width;if(J){let Z;const q=Ee.vmetric||ie;Z=Ee.vmetric?q[1]:R*.5,Z=-Z*he;const Y=q[2]*he;R=q?-q[0]:R,G=Z/w,x=(le+Y)/w}else G=le/w,x=0;(Ee.isInFont||f.missingFile)&&(p.xcoords.push(p.x+G),J&&p.ycoords.push(-p.y+x),p.tspan.textContent+=Ae);let N;J?N=R*he-Te*H:N=R*he+Te*H,le+=N}p.tspan.setAttributeNS(null,"x",p.xcoords.map(d).join(" ")),J?p.tspan.setAttributeNS(null,"y",p.ycoords.map(d).join(" ")):p.tspan.setAttributeNS(null,"y",d(-p.y)),J?p.y-=le:p.x+=le*X,p.tspan.setAttributeNS(null,"font-family",p.fontFamily),p.tspan.setAttributeNS(null,"font-size",`${d(p.fontSize)}px`),p.fontStyle!==b.fontStyle&&p.tspan.setAttributeNS(null,"font-style",p.fontStyle),p.fontWeight!==b.fontWeight&&p.tspan.setAttributeNS(null,"font-weight",p.fontWeight);const de=p.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(de===r.TextRenderingMode.FILL||de===r.TextRenderingMode.FILL_STROKE?(p.fillColor!==b.fillColor&&p.tspan.setAttributeNS(null,"fill",p.fillColor),p.fillAlpha<1&&p.tspan.setAttributeNS(null,"fill-opacity",p.fillAlpha)):p.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?p.tspan.setAttributeNS(null,"fill","transparent"):p.tspan.setAttributeNS(null,"fill","none"),de===r.TextRenderingMode.STROKE||de===r.TextRenderingMode.FILL_STROKE){const Ee=1/(p.textMatrixScale||1);this._setStrokeAttributes(p.tspan,Ee)}let ve=p.textMatrix;p.textRise!==0&&(ve=ve.slice(),ve[5]+=p.textRise),p.txtElement.setAttributeNS(null,"transform",`${T(ve)} scale(${d(X)}, -1)`),p.txtElement.setAttributeNS(E,"xml:space","preserve"),p.txtElement.append(p.tspan),p.txtgrp.append(p.txtElement),this._ensureTransformGroup().append(p.txtElement)}setLeadingMoveText(o,p){this.setLeading(-p),this.moveText(o,p)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const p=C(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${p}); }
`}setFont(o){const p=this.current,f=this.commonObjs.get(o[0]);let h=o[1];p.font=f,this.embedFonts&&!f.missingFile&&!this.embeddedFonts[f.loadedName]&&(this.addFontStyle(f),this.embeddedFonts[f.loadedName]=f),p.fontMatrix=f.fontMatrix||r.FONT_IDENTITY_MATRIX;let w="normal";f.black?w="900":f.bold&&(w="bold");const D=f.italic?"italic":"normal";h<0?(h=-h,p.fontDirection=-1):p.fontDirection=1,p.fontSize=h,p.fontFamily=f.loadedName,p.fontWeight=w,p.fontStyle=D,p.tspan=this.svgFactory.createElement("svg:tspan"),p.tspan.setAttributeNS(null,"y",d(-p.y)),p.xcoords=[],p.ycoords=[]}endText(){var p;const o=this.current;o.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&((p=o.txtElement)!=null&&p.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=c[o]}setLineJoin(o){this.current.lineJoin=O[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,p,f){this.current.strokeColor=r.Util.makeHexColor(o,p,f)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,p,f){this.current.fillColor=r.Util.makeHexColor(o,p,f),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const p=this.viewport.width,f=this.viewport.height,h=r.Util.inverseTransform(this.transformMatrix),w=r.Util.applyTransform([0,0],h),D=r.Util.applyTransform([0,f],h),g=r.Util.applyTransform([p,0],h),H=r.Util.applyTransform([p,f],h),X=Math.min(w[0],D[0],g[0],H[0]),J=Math.min(w[1],D[1],g[1],H[1]),ee=Math.max(w[0],D[0],g[0],H[0]),ie=Math.max(w[1],D[1],g[1],H[1]),he=this.svgFactory.createElement("svg:rect");he.setAttributeNS(null,"x",X),he.setAttributeNS(null,"y",J),he.setAttributeNS(null,"width",ee-X),he.setAttributeNS(null,"height",ie-J),he.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&he.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(he)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const p=o[1],f=o[2],h=o[3]||r.IDENTITY_MATRIX,[w,D,g,H]=o[4],X=o[5],J=o[6],ee=o[7],ie=`shading${y++}`,[he,le,de,ve]=r.Util.normalizeRect([...r.Util.applyTransform([w,D],h),...r.Util.applyTransform([g,H],h)]),[Ee,Te]=r.Util.singularValueDecompose2dScale(h),Ae=X*Ee,G=J*Te,x=this.svgFactory.createElement("svg:pattern");x.setAttributeNS(null,"id",ie),x.setAttributeNS(null,"patternUnits","userSpaceOnUse"),x.setAttributeNS(null,"width",Ae),x.setAttributeNS(null,"height",G),x.setAttributeNS(null,"x",`${he}`),x.setAttributeNS(null,"y",`${le}`);const R=this.svg,N=this.transformMatrix,Z=this.current.fillColor,q=this.current.strokeColor,Y=this.svgFactory.create(de-he,ve-le);if(this.svg=Y,this.transformMatrix=h,ee===2){const W=r.Util.makeHexColor(...p);this.current.fillColor=W,this.current.strokeColor=W}return this.executeOpTree(this.convertOpList(f)),this.svg=R,this.transformMatrix=N,this.current.fillColor=Z,this.current.strokeColor=q,x.append(Y.childNodes[0]),this.defs.append(x),`url(#${ie})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const p=`shading${y++}`,f=o[3];let h;switch(o[1]){case"axial":const w=o[4],D=o[5];h=this.svgFactory.createElement("svg:linearGradient"),h.setAttributeNS(null,"id",p),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"x1",w[0]),h.setAttributeNS(null,"y1",w[1]),h.setAttributeNS(null,"x2",D[0]),h.setAttributeNS(null,"y2",D[1]);break;case"radial":const g=o[4],H=o[5],X=o[6],J=o[7];h=this.svgFactory.createElement("svg:radialGradient"),h.setAttributeNS(null,"id",p),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"cx",H[0]),h.setAttributeNS(null,"cy",H[1]),h.setAttributeNS(null,"r",J),h.setAttributeNS(null,"fx",g[0]),h.setAttributeNS(null,"fy",g[1]),h.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const w of f){const D=this.svgFactory.createElement("svg:stop");D.setAttributeNS(null,"offset",w[0]),D.setAttributeNS(null,"stop-color",w[1]),h.append(D)}return this.defs.append(h),`url(#${p})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,p){this.current.dashArray=o,this.current.dashPhase=p}constructPath(o,p){const f=this.current;let h=f.x,w=f.y,D=[],g=0;for(const H of o)switch(H|0){case r.OPS.rectangle:h=p[g++],w=p[g++];const X=p[g++],J=p[g++],ee=h+X,ie=w+J;D.push("M",d(h),d(w),"L",d(ee),d(w),"L",d(ee),d(ie),"L",d(h),d(ie),"Z");break;case r.OPS.moveTo:h=p[g++],w=p[g++],D.push("M",d(h),d(w));break;case r.OPS.lineTo:h=p[g++],w=p[g++],D.push("L",d(h),d(w));break;case r.OPS.curveTo:h=p[g+4],w=p[g+5],D.push("C",d(p[g]),d(p[g+1]),d(p[g+2]),d(p[g+3]),d(h),d(w)),g+=6;break;case r.OPS.curveTo2:D.push("C",d(h),d(w),d(p[g]),d(p[g+1]),d(p[g+2]),d(p[g+3])),h=p[g+2],w=p[g+3],g+=4;break;case r.OPS.curveTo3:h=p[g+2],w=p[g+3],D.push("C",d(p[g]),d(p[g+1]),d(h),d(w),d(h),d(w)),g+=4;break;case r.OPS.closePath:D.push("Z");break}D=D.join(" "),f.path&&o.length>0&&o[0]!==r.OPS.rectangle&&o[0]!==r.OPS.moveTo?D=f.path.getAttributeNS(null,"d")+D:(f.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(f.path)),f.path.setAttributeNS(null,"d",D),f.path.setAttributeNS(null,"fill","none"),f.element=f.path,f.setCurrentPoint(h,w)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const p=`clippath${I++}`,f=this.svgFactory.createElement("svg:clipPath");f.setAttributeNS(null,"id",p),f.setAttributeNS(null,"transform",T(this.transformMatrix));const h=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?h.setAttributeNS(null,"clip-rule","evenodd"):h.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,f.append(h),this.defs.append(f),o.activeClipUrl){o.clipGroup=null;for(const w of this.extraStack)w.clipGroup=null;f.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${p})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const p=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",p)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[p,f]of o)switch(p){case"LW":this.setLineWidth(f);break;case"LC":this.setLineCap(f);break;case"LJ":this.setLineJoin(f);break;case"ML":this.setMiterLimit(f);break;case"D":this.setDash(f[0],f[1]);break;case"RI":this.setRenderingIntent(f);break;case"FL":this.setFlatness(f);break;case"Font":this.setFont(f);break;case"CA":this.setStrokeAlpha(f);break;case"ca":this.setFillAlpha(f);break;default:(0,r.warn)(`Unimplemented graphic state operator ${p}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,p=1){const f=this.current;let h=f.dashArray;p!==1&&h.length>0&&(h=h.map(function(w){return p*w})),o.setAttributeNS(null,"stroke",f.strokeColor),o.setAttributeNS(null,"stroke-opacity",f.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",d(f.miterLimit)),o.setAttributeNS(null,"stroke-linecap",f.lineCap),o.setAttributeNS(null,"stroke-linejoin",f.lineJoin),o.setAttributeNS(null,"stroke-width",d(p*f.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",h.map(d).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",d(p*f.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const p=this.getObject(o);if(!p){(0,r.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(p)}paintInlineImageXObject(o,p){const f=o.width,h=o.height,w=m(o,this.forceDataSchema,!!p),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y","0"),D.setAttributeNS(null,"width",d(f)),D.setAttributeNS(null,"height",d(h)),this.current.element=D,this.clip("nonzero");const g=this.svgFactory.createElement("svg:image");g.setAttributeNS(l,"xlink:href",w),g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y",d(-h)),g.setAttributeNS(null,"width",d(f)+"px"),g.setAttributeNS(null,"height",d(h)+"px"),g.setAttributeNS(null,"transform",`scale(${d(1/f)} ${d(-1/h)})`),p?p.append(g):this._ensureTransformGroup().append(g)}paintImageMaskXObject(o){const p=this.getObject(o.data,o);if(p.bitmap){(0,r.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const f=this.current,h=p.width,w=p.height,D=f.fillColor;f.maskId=`mask${P++}`;const g=this.svgFactory.createElement("svg:mask");g.setAttributeNS(null,"id",f.maskId);const H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x","0"),H.setAttributeNS(null,"y","0"),H.setAttributeNS(null,"width",d(h)),H.setAttributeNS(null,"height",d(w)),H.setAttributeNS(null,"fill",D),H.setAttributeNS(null,"mask",`url(#${f.maskId})`),this.defs.append(g),this._ensureTransformGroup().append(H),this.paintInlineImageXObject(p,g)}paintFormXObjectBegin(o,p){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),p){const f=p[2]-p[0],h=p[3]-p[1],w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x",p[0]),w.setAttributeNS(null,"y",p[1]),w.setAttributeNS(null,"width",d(f)),w.setAttributeNS(null,"height",d(h)),this.current.element=w,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const p=this.svgFactory.create(o.width,o.height),f=this.svgFactory.createElement("svg:defs");p.append(f),this.defs=f;const h=this.svgFactory.createElement("svg:g");return h.setAttributeNS(null,"transform",T(o.transform)),p.append(h),this.svg=h,p}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",T(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return s.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return b.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return E.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return l.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return r.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return r.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),r=__w_pdfjs_require__(26),a=__w_pdfjs_require__(27),s=__w_pdfjs_require__(5),b=__w_pdfjs_require__(32),E=__w_pdfjs_require__(14),l=__w_pdfjs_require__(35),c=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf$2);var pdfExports=pdf$2.exports;const pdf=pdfExports;var pdf_1=pdf,pdf$1=getDefaultExportFromCjs(pdf_1);function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var basicLightbox_min={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){return function n(i,r,a){function s(l,c){if(!r[l]){if(!i[l]){var O=typeof commonjsRequire=="function"&&commonjsRequire;if(!c&&O)return O(l,!0);if(b)return b(l,!0);var C=new Error("Cannot find module '"+l+"'");throw C.code="MODULE_NOT_FOUND",C}var m=r[l]={exports:{}};i[l][0].call(m.exports,function(_){return s(i[l][1][_]||_)},m,m.exports,n,i,r,a)}return r[l].exports}for(var b=typeof commonjsRequire=="function"&&commonjsRequire,E=0;E<a.length;E++)s(a[E]);return s}({1:[function(n,i,r){Object.defineProperty(r,"__esModule",{value:!0}),r.create=r.visible=void 0;var a=function(E){var l=arguments.length>1&&arguments[1]!==void 0&&arguments[1],c=document.createElement("div");return c.innerHTML=E.trim(),l===!0?c.children:c.firstChild},s=function(E,l){var c=E.children;return c.length===1&&c[0].tagName===l},b=function(E){return(E=E||document.querySelector(".basicLightbox"))!=null&&E.ownerDocument.body.contains(E)===!0};r.visible=b,r.create=function(E,l){var c=function(m,_){var S=a(`
		<div class="basicLightbox `.concat(_.className,`">
			<div class="basicLightbox__placeholder" role="dialog"></div>
		</div>
	`)),d=S.querySelector(".basicLightbox__placeholder");m.forEach(function(y){return d.appendChild(y)});var T=s(d,"IMG"),I=s(d,"VIDEO"),P=s(d,"IFRAME");return T===!0&&S.classList.add("basicLightbox--img"),I===!0&&S.classList.add("basicLightbox--video"),P===!0&&S.classList.add("basicLightbox--iframe"),S}(E=function(m){var _=typeof m=="string",S=m instanceof HTMLElement==1;if(_===!1&&S===!1)throw new Error("Content must be a DOM element/node or string");return _===!0?Array.from(a(m,!0)):m.tagName==="TEMPLATE"?[m.content.cloneNode(!0)]:Array.from(m.children)}(E),l=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if((m=Object.assign({},m)).closable==null&&(m.closable=!0),m.className==null&&(m.className=""),m.onShow==null&&(m.onShow=function(){}),m.onClose==null&&(m.onClose=function(){}),typeof m.closable!="boolean")throw new Error("Property `closable` must be a boolean");if(typeof m.className!="string")throw new Error("Property `className` must be a string");if(typeof m.onShow!="function")throw new Error("Property `onShow` must be a function");if(typeof m.onClose!="function")throw new Error("Property `onClose` must be a function");return m}(l)),O=function(m){return l.onClose(C)!==!1&&function(_,S){return _.classList.remove("basicLightbox--visible"),setTimeout(function(){return b(_)===!1||_.parentElement.removeChild(_),S()},410),!0}(c,function(){if(typeof m=="function")return m(C)})};l.closable===!0&&c.addEventListener("click",function(m){m.target===c&&O()});var C={element:function(){return c},visible:function(){return b(c)},show:function(m){return l.onShow(C)!==!1&&function(_,S){return document.body.appendChild(_),setTimeout(function(){requestAnimationFrame(function(){return _.classList.add("basicLightbox--visible"),S()})},10),!0}(c,function(){if(typeof m=="function")return m(C)})},close:O};return C}},{}]},{},[1])(1)})})(basicLightbox_min);var basicLightbox_minExports=basicLightbox_min.exports;pdf$1.GlobalWorkerOptions.workerSrc="@bundled-es-modules/pdfjs-dist/build/pdf.worker.js";const PDFApp=function(){const e=function(t,n,i){const r={text:t,input:"password",confirmButtonText:"Ok",showCancelButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,inputValidator:function(a){if(!a)return"Password is required"}};Swal.fire(r).then(function(a){if(a.value&&typeof n=="function"){n(a);return}})};return{initPDFUpload:function(t,{filesGrid:n=null,previewPages:i=!1,allowRotate:r=!0,isSortable:a=!1,allowPreview:s=!0,maxFiles:b=1,maxSize:E=null,fileExtensions:l=null,dropOnBody:c=!1,fileMetadataCallback:O=!1,allowProtectedFiles:C=!0},{extensionsError:m,sizeError:_,filesError:S,tooManyInvalidAttempts:d,fileNotSupported:T},{filePasswordRequired:I=p=>{},fileHasPassword:P=p=>{},onFileChange:y=p=>{},onInitMeta:o=p=>{}}){let p=[],f=[],h=0;const w=t.querySelector("[type=file]"),D=t.querySelector(".pdf_file__data"),g=t.querySelector("label.file-drag"),H=c?document.body:g,X=t.querySelector(".uploader-wrapper"),J=document.querySelector(".pdf___more-actions"),ee=n?document.querySelector(n):t.querySelector(".files-grid");w.addEventListener("change",le,!1);var ie=new XMLHttpRequest;r&&W(),ie.upload&&(H.addEventListener("dragover",he,!1),H.addEventListener("dragleave",he,!1),H.addEventListener("drop",le,!1));function he(k){k.stopPropagation(),k.preventDefault(),k.type==="dragover"?g.classList.add("hover"):g.classList.remove("hover")}function le(k){he(k);var U=k.target.files||k.dataTransfer.files;[...U].forEach(Q=>{const V=z(Q);V!==!1&&Ae(Q,V)}),Y()}function de(k){var U=k.name;return new RegExp("(?=.pdf)","gi").test(U)}function ve(k){return k.replace(/^.*?\.([a-zA-Z0-9]+)$/,"$1")}function Ee(k){return k&&k.type.split("/")[0]==="image"}function Te(k){p.splice(k,1),Y(),q()}async function Ae(k,U){const Q=p.findIndex(ae=>ae.id==U);if(de(k)){let ae=0;G(k,re=>{var se=new Uint8Array(re.target.result);const fe=pdfjsLib.getDocument(se);fe.onPassword=(pe,Se)=>{if((Se==1||Se==2)&&ae<3&&C){if(P(k)){Te(Q);return}ae++,e(`Password for ${k.name}`,_e=>{p[Q].password=_e.value,pe(_e.value)})}else ae>3&&ArtisanApp.toastError(d),C||ArtisanApp.toastError(T),Te(Q)},fe.promise.then(pe=>{if(ae==0&&I(k)){Te(Q);return}pe.getMetadata().then(function(_e){typeof O=="function"&&o(_e)});var Se=i?pe.numPages:1;for(let _e=1;_e<=Se;_e++)pe.getPage(_e).then(function(we){h++;var K=document.createElement("div");K.className=`pdf-preview pdf-file-${U} position-relative is-loading grid-item-${h}${a?" item-sortable":""}`,K.bsToggle="tooltip",K.title=k.name,K.dataset.id=U,K.dataset.index=p.findIndex(B=>B.id==U),K.dataset.page=i?_e:"all",K.dataset.rotation=0,K.innerHTML=`<div class="item-actions">
                                                        <button type="button" class="btn btn-primary rounded-pill preview-item p-0 action-btn${s?"":" d-none"}"></button>
                                                        <button type="button" class="btn btn-primary rounded-pill rotate-left-item p-0 action-btn${r?"":" d-none"}"></button>
                                                        <button type="button" class="btn btn-primary rounded-pill rotate-right-item p-0 action-btn${r?"":" d-none"}"></button>
                                                        <button type="button" class="btn btn-danger rounded-pill delete-item p-0 action-btn"></button>
                                                    </div>
                                                    <div class="item-pdf d-flex align-items-center justify-content-center position-relative">
                                                        <div class="file-loader"><div class="spinner-grow" role="status"><span class="sr-only">Loading...</span></div></div>
                                                        <canvas class="item-canvas" id="pdf-preview-${U}-${_e}" width="150"></canvas>
                                                    </div>
                                                    <div class="content">
                                                        <p>${k.name}</p>
                                                        <span>${h}</span>
                                                    </div>`,K.querySelector(".item-actions .delete-item").addEventListener("click",Z),s&&K.querySelector(".item-actions .preview-item").addEventListener("click",x),r&&(K.querySelector(".item-actions .rotate-left-item").addEventListener("click",R),K.querySelector(".item-actions .rotate-right-item").addEventListener("click",N)),ee.appendChild(K),new Tooltip(K,{});var be=document.getElementById(`pdf-preview-${U}-${_e}`),ye=145/we.getViewport({scale:1}).width,Fe=we.getViewport({scale:ye}),ue=be.getContext("2d");be.height=Fe.height,be.width=Fe.width,be.style.height=Fe.height+"px",be.style.width=Fe.width+"px",we.render({canvasContext:ue,viewport:Fe}).promise.then(()=>{K.classList.remove("is-loading"),_e==Se&&q()})})})})}else{var V=`<div class="item-actions">
                                                        <button type="button" class="btn btn-primary rounded-pill rotate-left-item p-0 action-btn${r?"":" d-none"}"></button>
                                                        <button type="button" class="btn btn-primary rounded-pill rotate-right-item p-0 action-btn${r?"":" d-none"}"></button>
                                                        <button type="button" class="btn btn-danger rounded-pill delete-item p-0 action-btn"></button>
                                                    </div>
                                                    <div class="item-pdf overflow-hidden d-flex align-items-center justify-content-center position-relative">
                                                        <div class="file-loader"><div class="spinner-grow" role="status"><span class="sr-only">Loading...</span></div></div>`;Ee(k)?V+=`<img class="item-canvas" src="${URL.createObjectURL(k)}" />`:V+=`<i class="item-canvas an an-overview display-1 text-muted icon-${ve(k.name)}"></i>`,V+=`</div>
                                                    <div class="content">
                                                        <p>${k.name}</p>
                                                        <p class="fw-normal small mb-0">${ArtisanApp.humanFileSize(k.size)}</p>
                                                    </div>`;var te=document.createElement("div");te.className=`pdf-preview pdf-file-${U} position-relative grid-item-${U}${a?" item-sortable":""}`,te.bsToggle="tooltip",te.title=k.name,te.dataset.id=U,te.dataset.index=p.findIndex(ae=>ae.id==U),te.dataset.page=1,te.dataset.rotation=0,te.innerHTML=V,te.querySelector(".item-actions .delete-item").addEventListener("click",Z),r&&(te.querySelector(".item-actions .rotate-left-item").addEventListener("click",R),te.querySelector(".item-actions .rotate-right-item").addEventListener("click",N)),ee.appendChild(te),new Tooltip(te,{})}a&&Sortable.create(ee,{onUpdate:()=>{q()}})}function G(k,U){var Q=new FileReader;Q.onload=U,Q.readAsArrayBuffer(k)}function x(k){const U=k instanceof Event?k.target.closest(".pdf-preview"):k;Tooltip.getInstance(U).hide();const Q=p[U.dataset.index];Q&&G(Q.file,V=>{var te=new Uint8Array(V.target.result);const ae=pdfjsLib.getDocument(te);ae.onPassword=(re,se)=>{se==1&&re(Q.password)},ae.promise.then(re=>{const se=parseInt(U.dataset.page,10);re.getPage(se).then(function(fe){var Se=(window.screen.availWidth/1.5>500?500:window.screen.availWidth/1.5)/fe.getViewport({scale:1}).width,_e=fe.getViewport({scale:Se}),we=document.createElement("canvas"),K=we.getContext("2d");we.height=_e.height,we.width=_e.width,we.style.height=_e.height+"px",we.style.width=_e.width+"px";const be=basicLightbox_minExports.create(`<div class="bg-white shadow pdf-preview-lightbox" id="pdf-preview-lightbox" style="transform:rotate(${U.dataset.rotation}deg)"></div>`);fe.render({canvasContext:K,viewport:_e}).promise.then(()=>{be.show(),document.querySelector("#pdf-preview-lightbox").appendChild(we)})})})})}function R(k){var U=k instanceof Event?k.target.closest(".pdf-preview"):k;const Q=parseInt(U.dataset.rotation);var V=Q<=0?270:Q-90;U.dataset.rotation=V,U.querySelector(".item-canvas").style.transform=`rotate(${V}deg)`,k instanceof Event&&q()}function N(k){var U=k instanceof Event?k.target.closest(".pdf-preview"):k;const Q=parseInt(U.dataset.rotation);var V=Q==270?0:Q+90;U.dataset.rotation=V,U.querySelector(".item-canvas").style.transform=`rotate(${V}deg)`,k instanceof Event&&q()}function Z(k){var U=k.target.closest(".pdf-preview"),Q=U.dataset.id,V=p.findIndex(te=>te.id==Q);Tooltip.getInstance(U).dispose(),U.remove(),document.querySelectorAll(`.pdf-file-${Q}`).length==0&&(p.splice(V,1),Y()),q()}function q(){h=0,f=[],document.querySelectorAll(".pdf-preview").forEach(k=>{var U=k.dataset.id,Q=p.findIndex(te=>te.id==U);k.dataset.index=Q;var V=JSON.parse(JSON.stringify(k.dataset));delete V.bsOriginalTitle,V.password=p[Q].password||!1,f.push(V),h++,k.querySelector(".content span")&&(k.querySelector(".content span").innerHTML=h)}),D&&(D.value=JSON.stringify(f))}function Y(){var U,Q,V;n||(p.length==0?(X.classList.remove("d-none"),(U=t.querySelector(".add-more"))==null||U.classList.add("d-none"),(Q=t.querySelector(".uploader-after > .process-button"))==null||Q.classList.add("d-none"),b>1&&g.classList.remove("pt-0")):(X.classList.add("d-none"),(V=t.querySelector(".uploader-after > .process-button"))==null||V.classList.remove("d-none"),b>1&&g.classList.add("pt-0")));const k=new DataTransfer;p.forEach((te,ae)=>{k.items.add(te.file)}),w.files=k.files,y(p)}function W(){const k=document.createElement("div");k.innerHTML=`<button type="button" class="btn btn-primary rotate-all-left"><i class="an an-flip-text"></i></button>
                                        <button type="button" class="btn btn-primary rotate-all-right"><i class="an an-flip-wording"></i></button>`,k.querySelector(".rotate-all-right").addEventListener("click",()=>{document.querySelectorAll(".pdf-preview").forEach(U=>{N(U)}),q()}),k.querySelector(".rotate-all-left").addEventListener("click",()=>{document.querySelectorAll(".pdf-preview").forEach(U=>{R(U)}),q()}),J.appendChild(k)}function z(k){var U,Q,V;if(u(k)){if(t.querySelector(".uploader-wrapper").classList.add("d-none"),(U=t.querySelector(".uploader-error"))==null||U.classList.add("d-none"),L()){b!=1&&((Q=t.querySelector(".add-more"))==null||Q.classList.remove("d-none"));const te=j();return p.push({id:te,file:k}),te}return!1}else return(V=t.querySelector(".uploader-error"))==null||V.classList.remove("d-none"),t.querySelector("label.file-drag").classList.remove("d-none"),!1}function j(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,k=>(k^crypto.getRandomValues(new Uint8Array(1))[0]&15>>k/4).toString(16))}function u(k){return A(k)&&F(k)}function A(k){var U=k.name;const Q=new RegExp(`(?=${l})`,"gi"),V=!l||Q.test(U);return V||ArtisanApp.toastError(m),V}function F(k){const U=!E||k.size<=E*1024*1024;return U||ArtisanApp.toastError(_),U}function L(){const k=!b||p.length<b;return k||ArtisanApp.toastError(S),k}}}}();window.PDFApp=PDFApp;
